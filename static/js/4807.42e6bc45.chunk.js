"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[4807,7945],{67077:function(e,t,r){function n(){return[0,0,0,0]}function i(e,t,r,n){return[e,t,r,n]}function o(e,t){return new Float64Array(e,t,4)}function a(){return[0,0,0,0]}function l(){return i(1,1,1,1)}function s(){return i(1,0,0,0)}function u(){return i(0,1,0,0)}function p(){return i(0,0,1,0)}function c(){return i(0,0,0,1)}r.d(t,{a:function(){return o},c:function(){return n},f:function(){return i}});var d=[0,0,0,0],y=l(),f=s(),v=u(),m=p(),h=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:y,UNIT_W:h,UNIT_X:f,UNIT_Y:v,UNIT_Z:m,ZEROS:d,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:n,createView:o,fromArray:function(e){for(var t=[0,0,0,0],r=Math.min(4,e.length),n=0;n<r;++n)t[n]=e[n];return t},fromValues:i,ones:l,unitW:c,unitX:s,unitY:u,unitZ:p,zeros:a},Symbol.toStringTag,{value:"Module"}))},16054:function(e,t,r){r.d(t,{z:function(){return a}});var n=r(15671),i=r(43144),o=r(18759),a=function(){function e(t,r){(0,n.Z)(this,e),this._storage=new o.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,i.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return c},Xq:function(){return p}});var n,i,o=r(29439),a=r(37762),l=r(15671),s=r(43144),u=r(27546);(i=n||(n={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";var p=function(){function e(t,r,n){(0,l.Z)(this,e),this.name=t,this._storage=r,this.id=d+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),n&&(this._storage.registerRemoveFunc(this.id,n),this._removeFunc=!0)}return(0,s.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,n)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,l.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new u.Z,this._users=new u.Z}return(0,s.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,i,o){t=e.id+t;var a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==r&&this._notifyRemove(t,a.entry,n.ALL)),i>this._maxSize)this._notifyRemove(t,r,n.ALL);else if(void 0!==r)if(!i||i<0)console.warn("Refusing to cache entry with invalid size "+i);else{var l=1+Math.max(o,-3)- -3;this._db.set(t,{entry:r,size:i,lifetime:l,lives:l}),this._size+=i,e.size+=i,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,i){t=e.id+t;var o=this._db.get(t);if(o&&o.entry===r){for(this._size-=o.size,e.size-=o.size;i>this._maxSize;){var a=this._notifyRemove(t,r,n.SOME);if(!(null!=a&&a>0))return void this._db.delete(t);i=a}o.size=i,this._size+=i,e.size+=i,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},n=new Array;this._db.forEach((function(t,i){var o=t.lifetime;n[o]=(n[o]||0)+t.size,e._users.forAll((function(e){var n=e.id,o=e.name;if(i.startsWith(n)){var a=r[o]||0;r[o]=a+t.size}}))}));var i={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var n=r[t]||0;r[t]=n,i[t]=Math.round(100*e.hitRate)+"%"}else i[t]="0%"}));var o=Object.keys(r);o.sort((function(e,t){return r[t]-r[e]})),o.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+i[e]}));for(var a=n.length-1;a>=0;--a){var l=n[a];l&&(t["Priority "+(a+-3-1)]=Math.round(l/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,i){i.startsWith(r)&&(t._size-=e.size,t._db.delete(i),t._notifyRemove(i,e.entry,n.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,n.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var n;return this._removeFuncs.some((function(i){if(e.startsWith(i[0])){var o=i[1](t,r);return"number"==typeof o&&(n=o),!0}return!1})),n}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,a.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var n=(0,o.Z)(t.value,2),i=n[0],l=n[1];if(this._purgeItem(i,l),this._size<=.9*this.maxSize)return}}catch(s){r.e(s)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,n=(0,a.Z)(e._db);try{for(n.s();!(r=n.n()).done;){var i=(0,o.Z)(r.value,2),l=i[0],u=i[1];if(l.startsWith(t.id)&&(e._purgeItem(l,u,t),t.size<=.9*t.maxSize))return}}catch(s){n.e(s)}finally{n.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var i=this._notifyRemove(e,t.entry,n.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),d=0},48732:function(e,t,r){r.d(t,{Hg:function(){return m},V7:function(){return v},uD:function(){return f}});var n=r(4942),i=r(37762),o=r(7138),a=r(40281),l=r(23879),s=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(e){return e instanceof o.Z}function p(e){return e instanceof a.Z?Object.keys(e.items):u(e)?(0,l.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof a.Z?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function y(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=p(e),a=p(t);if(0!==o.length||0!==a.length){if(!o.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,f=a.filter((function(e){return!o.includes(e)})),v=o.filter((function(e){return!a.includes(e)})),m=o.filter((function(r){return a.includes(r)&&c(e,r)!==c(t,r)})).concat(f,v).sort(),h=d(e);if(h&&s.includes(h)&&m.length)return{type:"complete",oldValue:e,newValue:t};var g,b=u(e)&&u(t),_=(0,i.Z)(m);try{for(_.s();!(g=_.n()).done;){var w=g.value,Z=c(e,w),S=c(t,w),C=void 0;if((b||"function"!=typeof Z&&"function"!=typeof S)&&Z!==S&&(null!=Z||null!=S)){var k;if(r&&r[w]&&"function"==typeof r[w])C=null===(k=r[w])||void 0===k?void 0:k.call(r,Z,S);else if(Z instanceof Date&&S instanceof Date){if(Z.getTime()===S.getTime())continue;C={type:"complete",oldValue:Z,newValue:S}}else C="object"==typeof Z&&"object"==typeof S&&d(Z)===d(S)?y(Z,S):{type:"complete",oldValue:Z,newValue:S};null!=C&&(null!=l?l.diff[w]=C:l={type:"partial",diff:(0,n.Z)({},w,C)})}}}catch(T){_.e(T)}finally{_.f()}return l}}function f(e,t){if(null==e)return!1;var r,n=t.split("."),o=e,a=(0,i.Z)(n);try{for(a.s();!(r=a.n()).done;){var l=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var s=o.diff[l];if(!s)return!1;o=s}}catch(u){a.e(u)}finally{a.f()}return!0}function v(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(f(e,r.value))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}function m(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:y(e,t)}},15909:function(e,t,r){r.d(t,{D:function(){return i}});var n=r(80292);function i(e){e&&e.writtenProperties&&e.writtenProperties.forEach((function(e){var t=e.target,r=e.propName,i=e.newOrigin;(0,n.l)(t)&&i&&t.originOf(r)!==i&&t.updateOrigin(r,i)}))}},80292:function(e,t,r){function n(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{l:function(){return n}})},88257:function(e,t,r){r.r(t),r.d(t,{default:function(){return Jt}});var n=r(93433),i=r(74165),o=r(15671),a=r(43144),l=r(60136),s=r(29388),u=r(15861),p=r(37762),c=r(27366),d=r(42265),y=r(59486),f=r(52639),v=r(44055),m=(r(94931),r(78451),r(98689),r(57823),r(32066),r(30505),r(34999),r(28189),r(9014)),h=r(40281),g=r(10064),b=r(41691),_=r(32718),w=r(97642),Z=r(18202),S=r(66978),C=r(94172),k=r(68860),T=r(35995),N=r(49861),B=r(25243),R=r(63780),x=(r(93169),r(38511)),j=r(69912),A=r(31201),P=r(15909),M=r(53866),O=r(52587),I=r(92975),L=r(30651),F=r(6693),z=r(6061),D=r(29598),J=r(56811),G=r(25899),E=r(51508),q=r(46784),U=r(16072),V=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).break=new U.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),n.first=new U.Z({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),n.unlocated=new U.Z({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),n.last=new U.Z({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),n.middle=new U.Z({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),n.waypoint=new U.Z({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"break",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"first",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"unlocated",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"last",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"middle",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],V.prototype,"waypoint",void 0);var W=V=(0,c._)([(0,j.j)("esri.layers.support.RouteStopSymbols")],V),H=r(16851),X=r(61459),Q=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).directionLines=new H.Z({color:[0,122,194],width:6}),n.directionPoints=new U.Z({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),n.pointBarriers=new U.Z({style:"x",size:10,outline:{color:[255,0,0],width:3}}),n.polygonBarriers=new X.Z({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),n.polylineBarriers=new H.Z({width:7.5,color:[255,85,0,.7]}),n.routeInfo=new H.Z({width:8,color:[20,89,127]}),n.stops=new W,n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"pointBarriers",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"polygonBarriers",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"polylineBarriers",void 0),(0,c._)([(0,N.Cb)({types:E.LB})],Q.prototype,"routeInfo",void 0),(0,c._)([(0,N.Cb)({type:W})],Q.prototype,"stops",void 0);var K=Q=(0,c._)([(0,j.j)("esri.layers.support.RouteSymbols")],Q),Y=r(7575),$=r(98995),ee=r(73117),te=r(76200),re=r(23084),ne=r(27135),ie=r(49022),oe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).dataType=null,n.name=null,n.parameterNames=null,n.restrictionUsageParameterName=null,n.timeNeutralAttributeName=null,n.trafficSupport=null,n.units=null,n.usageType=null,n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"dataType",void 0),(0,c._)([(0,ne.J)(ie.Ul,{ignoreUnknown:!1})],oe.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[String]})],oe.prototype,"parameterNames",void 0),(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"restrictionUsageParameterName",void 0),(0,c._)([(0,ne.J)(ie.ZI,{ignoreUnknown:!1})],oe.prototype,"timeNeutralAttributeName",void 0),(0,c._)([(0,N.Cb)({type:String})],oe.prototype,"trafficSupport",void 0),(0,c._)([(0,ne.J)(ie.dg)],oe.prototype,"units",void 0),(0,c._)([(0,ne.J)(ie.E2)],oe.prototype,"usageType",void 0);var ae=oe=(0,c._)([(0,j.j)("esri.rest.support.NetworkAttribute")],oe),le=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).buildTime=null,n.name=null,n.networkAttributes=null,n.networkSources=null,n.state=null,n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({type:Number})],le.prototype,"buildTime",void 0),(0,c._)([(0,N.Cb)({type:String})],le.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[ae]})],le.prototype,"networkAttributes",void 0),(0,c._)([(0,N.Cb)()],le.prototype,"networkSources",void 0),(0,c._)([(0,N.Cb)({type:String})],le.prototype,"state",void 0);var se=le=(0,c._)([(0,j.j)("esri.rest.support.NetworkDataset")],le),ue=r(77279),pe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).accumulateAttributeNames=null,n.attributeParameterValues=null,n.currentVersion=null,n.defaultTravelMode=null,n.directionsLanguage=null,n.directionsLengthUnits=null,n.directionsSupportedLanguages=null,n.directionsTimeAttribute=null,n.hasZ=null,n.impedance=null,n.networkDataset=null,n.supportedTravelModes=null,n}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return null==e?null:e.map((function(e){return ie.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ie.Ul.toJSON(e)})))}},{key:"readDefaultTravelMode",value:function(e,t){var r,n,i,o=null!==(r=null===(n=t.supportedTravelModes)||void 0===n?void 0:n.find((function(e){return e.id===t.defaultTravelMode})))&&void 0!==r?r:null===(i=t.supportedTravelModes)||void 0===i?void 0:i.find((function(e){return e.itemId===t.defaultTravelMode}));return o?ue.Z.fromJSON(o):null}}]),r}(q.wq);(0,c._)([(0,N.Cb)()],pe.prototype,"accumulateAttributeNames",void 0),(0,c._)([(0,x.r)("accumulateAttributeNames")],pe.prototype,"readAccumulateAttributes",null),(0,c._)([(0,A.c)("accumulateAttributeNames")],pe.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)()],pe.prototype,"attributeParameterValues",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"currentVersion",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"defaultTravelMode",void 0),(0,c._)([(0,x.r)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],pe.prototype,"readDefaultTravelMode",null),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsLanguage",void 0),(0,c._)([(0,ne.J)(ie.GX)],pe.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsSupportedLanguages",void 0),(0,c._)([(0,ne.J)(ie.ZI,{ignoreUnknown:!1})],pe.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"hasZ",void 0),(0,c._)([(0,ne.J)(ie.Ul,{ignoreUnknown:!1})],pe.prototype,"impedance",void 0),(0,c._)([(0,N.Cb)({type:se})],pe.prototype,"networkDataset",void 0),(0,c._)([(0,N.Cb)({type:[ue.Z]})],pe.prototype,"supportedTravelModes",void 0);var ce=pe=(0,c._)([(0,j.j)("esri.rest.support.NetworkServiceDescription")],pe),de=_.Z.getLogger("esri.rest.networkService");function ye(e,t,r,n){n[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}function fe(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var i,o=(0,p.Z)(n);try{for(o.s();!(i=o.n()).done;){i.value.z=void 0}}catch(a){o.e(a)}finally{o.f()}}}de.warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function ve(e,t){for(var r=0;r<t.length;r++){var n=e[t[r]];if(n&&n.length){var i,o=(0,p.Z)(n);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(null!=a&&a.hasZ)return!0}}catch(l){o.e(l)}finally{o.f()}}}return!1}function me(e,t,r){return he.apply(this,arguments)}function he(){return he=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,l,s,u,p,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new g.Z("network-service:missing-url","Url to Network service is missing");case 2:return o=(0,re.lA)({f:"json",token:r},n),e.next=5,(0,te.default)(t,o);case 5:return a=e.sent,l=a.data,s=l.currentVersion>=10.4?_e(t,r,n):ge(t,n),e.next=10,s;case 10:return u=e.sent,p=u.defaultTravelMode,c=u.supportedTravelModes,e.abrupt("return",(l.defaultTravelMode=p,l.supportedTravelModes=c,ce.fromJSON(l)));case 14:case"end":return e.stop()}}),e)}))),he.apply(this,arguments)}function ge(e,t){return be.apply(this,arguments)}function be(){return be=(0,u.Z)((0,i.Z)().mark((function e(t,r){var n,o,a,l,s,u,c,d,y,f,v,m,h,g,b,_,w,S,C,k,N,B,R,x,j;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,re.lA)({f:"json"},r),e.next=3,(0,te.default)(t.replace(/\/rest\/.*$/i,"/info"),o);case 3:if(a=e.sent,(l=a.data)&&l.owningSystemUrl){e.next=7;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 7:return s=l.owningSystemUrl,u=(0,T.Qj)(s)+"/sharing/rest/portals/self",e.next=11,(0,te.default)(u,o);case 11:if(c=e.sent,d=c.data,y=(0,Z.hS)("helperServices.routingUtilities.url",d)){e.next=16;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 16:return f=(0,re.en)(s),v=/\/solve$/i.test(f.path)?"Route":/\/solveclosestfacility$/i.test(f.path)?"ClosestFacility":"ServiceAreas",m=(0,re.lA)({f:"json",serviceName:v},r),h=(0,T.Qj)(y)+"/GetTravelModes/execute",e.next=22,(0,te.default)(h,m);case 22:if(g=e.sent,b=[],_=null,null!==g&&void 0!==g&&null!==(n=g.data)&&void 0!==n&&null!==(n=n.results)&&void 0!==n&&n.length){w=g.data.results,S=(0,p.Z)(w);try{for(S.s();!(C=S.n()).done;)if("supportedTravelModes"===(k=C.value).paramName){if(null!==(N=k.value)&&void 0!==N&&N.features){B=(0,p.Z)(k.value.features);try{for(B.s();!(R=B.n()).done;)(x=R.value.attributes)&&(j=JSON.parse(x.TravelMode),b.push(j))}catch(i){B.e(i)}finally{B.f()}}}else"defaultTravelMode"===k.paramName&&(_=k.value)}catch(i){S.e(i)}finally{S.f()}}return e.abrupt("return",{supportedTravelModes:b,defaultTravelMode:_});case 27:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function _e(e,t,r){return we.apply(this,arguments)}function we(){return we=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,l,s,u,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=(0,re.lA)({f:"json",token:r},n),a=(0,T.Qj)(t)+"/retrieveTravelModes",e.next=5,(0,te.default)(a,o);case 5:return l=e.sent,s=l.data,u=s.supportedTravelModes,p=s.defaultTravelMode,e.abrupt("return",{supportedTravelModes:u,defaultTravelMode:p});case 12:throw e.prev=12,e.t0=e.catch(0),new g.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),we.apply(this,arguments)}var Ze=r(1413),Se=r(91340),Ce=r(3321),ke=r(49818),Te=r(43404),Ne=new Te.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),Be=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).description=null,n.type=null,n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],Be.prototype,"description",void 0),(0,c._)([(0,N.Cb)({type:String,json:{read:Ne.read,write:Ne.write}})],Be.prototype,"type",void 0);var Re=Be=(0,c._)([(0,j.j)("esri.rest.support.GPMessage")],Be),xe=new Te.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),je=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).type=null,n}return(0,a.Z)(r)}(Re);(0,c._)([(0,N.Cb)({type:String,json:{read:xe.read,write:xe.write}})],je.prototype,"type",void 0);var Ae=je=(0,c._)([(0,j.j)("esri.rest.support.NAMessage")],je),Pe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){return(0,o.Z)(this,r),t.call(this,e)}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({json:{read:{source:"string"}}})],Pe.prototype,"text",void 0),(0,c._)([(0,ne.J)(ie.Ks,{name:"stringType"})],Pe.prototype,"type",void 0);var Me=Pe=(0,c._)([(0,j.j)("esri.rest.support.DirectionsString")],Pe),Oe=r(585),Ie=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).arriveTime=null,n.arriveTimeOffset=null,n.geometry=null,n.strings=null,n}return(0,a.Z)(r,[{key:"readArriveTimeOffset",value:function(e,t){return(0,Ce.pQ)(t.ETA,t.arriveTimeUTC)}},{key:"readGeometry",value:function(e,t){return Oe.Z.fromJSON(t.point)}}]),r}(q.wq);(0,c._)([(0,N.Cb)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Ie.prototype,"arriveTime",void 0),(0,c._)([(0,N.Cb)()],Ie.prototype,"arriveTimeOffset",void 0),(0,c._)([(0,x.r)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Ie.prototype,"readArriveTimeOffset",null),(0,c._)([(0,N.Cb)({type:Oe.Z})],Ie.prototype,"geometry",void 0),(0,c._)([(0,x.r)("geometry",["point"])],Ie.prototype,"readGeometry",null),(0,c._)([(0,N.Cb)({type:[Me]})],Ie.prototype,"strings",void 0);var Le=Ie=(0,c._)([(0,j.j)("esri.rest.support.DirectionsEvent")],Ie),Fe=r(29909);var ze=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).events=null,n.strings=null,n}return(0,a.Z)(r,[{key:"readGeometry",value:function(e,t){var r=function(e){if(null==e||""===e)return null;var t,r,n,i,o,a,l,s,u=0,p=0,c=0,d=0,y=[],f=0,v=0,m=0;if((o=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(o=[]),0===parseInt(o[f],32)){f=2;var h=parseInt(o[f],32);f++,a=parseInt(o[f],32),f++,1&h&&(v=o.indexOf("|")+1,l=parseInt(o[v],32),v++),2&h&&(m=o.indexOf("|",v)+1,s=parseInt(o[m],32),m++)}else a=parseInt(o[f],32),f++;for(;f<o.length&&"|"!==o[f];){t=parseInt(o[f],32)+u,f++,u=t,r=parseInt(o[f],32)+p,f++,p=r;var g=[t/a,r/a];v&&(i=parseInt(o[v],32)+c,v++,c=i,g.push(i/l)),m&&(n=parseInt(o[m],32)+d,m++,d=n,g.push(n/s)),y.push(g)}return{paths:[y],hasZ:v>0,hasM:m>0}}(t.compressedGeometry);return null!=r?Fe.Z.fromJSON(r):null}}]),r}(f.Z);(0,c._)([(0,N.Cb)({type:[Le]})],ze.prototype,"events",void 0),(0,c._)([(0,x.r)("geometry",["compressedGeometry"])],ze.prototype,"readGeometry",null),(0,c._)([(0,N.Cb)({type:[Me]})],ze.prototype,"strings",void 0);var De=ze=(0,c._)([(0,j.j)("esri.rest.support.DirectionsFeature")],ze),Je=r(78952);var Ge=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).extent=null,n.features=[],n.geometryType="polyline",n.routeId=null,n.routeName=null,n.totalDriveTime=null,n.totalLength=null,n.totalTime=null,n}return(0,a.Z)(r,[{key:"readFeatures",value:function(e,t){var r;if(!e)return[];var n=null!==(r=t.summary.envelope.spatialReference)&&void 0!==r?r:t.spatialReference,i=n&&Je.Z.fromJSON(n);return e.map((function(e){var t=De.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=i),null!=t.events){var r,n=(0,p.Z)(t.events);try{for(n.s();!(r=n.n()).done;){var o=r.value;null!=o.geometry&&(o.geometry.spatialReference=i)}}catch(a){n.e(a)}finally{n.f()}}return t}))}},{key:"mergedGeometry",get:function(){return this.features?function(e,t){if(0===e.length)return new Fe.Z({spatialReference:t});var r,i=[],o=(0,p.Z)(e);try{for(o.s();!(r=o.n()).done;){var a,l=r.value,s=(0,p.Z)(l.paths);try{for(s.s();!(a=s.n()).done;){var u=a.value;i.push.apply(i,(0,n.Z)(u))}}catch(v){s.e(v)}finally{s.f()}}}catch(v){o.e(v)}finally{o.f()}var c=[];i.forEach((function(e,t){0!==t&&e[0]===i[t-1][0]&&e[1]===i[t-1][1]||c.push(e)}));var d=e[0],y=d.hasM,f=d.hasZ;return new Fe.Z({hasM:y,hasZ:f,paths:[c],spatialReference:t})}(this.features.map((function(e){return e.geometry})),this.extent.spatialReference):null}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings})).flat().filter(R.pC)}}]),r}(ke.Z);(0,c._)([(0,N.Cb)({type:M.Z,json:{read:{source:"summary.envelope"}}})],Ge.prototype,"extent",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0})],Ge.prototype,"features",void 0),(0,c._)([(0,x.r)("features")],Ge.prototype,"readFeatures",null),(0,c._)([(0,N.Cb)()],Ge.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Ge.prototype,"mergedGeometry",null),(0,c._)([(0,N.Cb)()],Ge.prototype,"routeId",void 0),(0,c._)([(0,N.Cb)()],Ge.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({value:null,readOnly:!0})],Ge.prototype,"strings",null),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],Ge.prototype,"totalDriveTime",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalLength"}}})],Ge.prototype,"totalLength",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalTime"}}})],Ge.prototype,"totalTime",void 0);var Ee=Ge=(0,c._)([(0,j.j)("esri.rest.support.DirectionsFeatureSet")],Ge),qe=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).directionLines=null,n.directionPoints=null,n.directions=null,n.route=null,n.routeName=null,n.stops=null,n.traversedEdges=null,n.traversedJunctions=null,n.traversedTurns=null,n}return(0,a.Z)(r)}(q.wq);(0,c._)([(0,N.Cb)({type:ke.Z,json:{write:!0}})],qe.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({type:ke.Z,json:{write:!0}})],qe.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({type:Ee,json:{write:!0}})],qe.prototype,"directions",void 0),(0,c._)([(0,N.Cb)({type:f.Z,json:{write:!0}})],qe.prototype,"route",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],qe.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({type:[f.Z],json:{write:!0}})],qe.prototype,"stops",void 0),(0,c._)([(0,N.Cb)({type:ke.Z,json:{write:!0}})],qe.prototype,"traversedEdges",void 0),(0,c._)([(0,N.Cb)({type:ke.Z,json:{write:!0}})],qe.prototype,"traversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:ke.Z,json:{write:!0}})],qe.prototype,"traversedTurns",void 0);var Ue=qe=(0,c._)([(0,j.j)("esri.rest.support.RouteResult")],qe);function Ve(e){return e?ke.Z.fromJSON(e).features.filter(R.pC):[]}var We=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).messages=null,n.pointBarriers=null,n.polylineBarriers=null,n.polygonBarriers=null,n.routeResults=null,n}return(0,a.Z)(r,[{key:"readPointBarriers",value:function(e,t){return Ve(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return Ve(e)}},{key:"readPolygonBarriers",value:function(e){return Ve(e)}}]),r}(q.wq);(0,c._)([(0,N.Cb)({type:[Ae]})],We.prototype,"messages",void 0),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"pointBarriers",void 0),(0,c._)([(0,x.r)("pointBarriers",["barriers"])],We.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"polylineBarriers",void 0),(0,c._)([(0,x.r)("polylineBarriers")],We.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"polygonBarriers",void 0),(0,c._)([(0,x.r)("polygonBarriers")],We.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({type:[Ue]})],We.prototype,"routeResults",void 0);var He=We=(0,c._)([(0,j.j)("esri.rest.support.RouteSolveResult")],We);function Xe(e){return e instanceof ke.Z}function Qe(e,t,r){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o,a,l,s,u,p,c,d,y,f,v,m,h,g,b,_;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],a=[],l={},s={},u=(0,re.en)(t),p=u.path,Xe(r.stops)&&ye(r.stops.features,a,"stops.features",l),Xe(r.pointBarriers)&&ye(r.pointBarriers.features,a,"pointBarriers.features",l),Xe(r.polylineBarriers)&&ye(r.polylineBarriers.features,a,"polylineBarriers.features",l),Xe(r.polygonBarriers)&&ye(r.polygonBarriers.features,a,"polygonBarriers.features",l),e.next=4,(0,Se.aX)(a);case 4:for(d in c=e.sent,l)y=l[d],o.push(d),s[d]=c.slice(y[0],y[1]);if(!ve(s,o)){e.next=17;break}return f=null,e.prev=8,e.next=11,me(p,r.apiKey,n);case 11:f=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:f&&!f.hasZ&&fe(s,o);case 17:v=(0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s[t].forEach((function(e,n){r.get(t)[n].geometry=e}));case 1:case"end":return e.stop()}}),e)})),e.t1=(0,i.Z)().keys(s);case 19:if((e.t2=e.t1()).done){e.next=24;break}return m=e.t2.value,e.delegateYield(v(m),"t3",22);case 22:e.next=19;break;case 24:return h=(0,Ze.Z)((0,Ze.Z)({},n),{},{query:(0,Ze.Z)((0,Ze.Z)((0,Ze.Z)({},u.query),(0,Ce.Yc)(r)),{},{f:"json"})}),g=p.endsWith("/solve")?p:"".concat(p,"/solve"),e.next=28,(0,te.default)(g,h);case 28:return b=e.sent,_=b.data,e.abrupt("return",Ye(_));case 31:case"end":return e.stop()}}),e,null,[[8,14]])}))),Ke.apply(this,arguments)}function Ye(e){var t,r=e.barriers,n=e.directionLines,i=e.directionPoints,o=e.directions,a=e.messages,l=e.polygonBarriers,s=e.polylineBarriers,u=e.routes,p=e.stops,c=e.traversedEdges,d=e.traversedJunctions,y=e.traversedTurns,f=function(e){var t=m.find((function(t){return t.routeName===e}));if(null!=t)return t;var r={routeId:m.length+1,routeName:e};return m.push(r),r},v=function(e){var t=m.find((function(t){return t.routeId===e}));if(null!=t)return t;var r={routeId:e,routeName:null};return m.push(r),r},m=[];null!==u&&void 0!==u&&u.features.forEach((function(e,t){var r;e.geometry.spatialReference=null!==(r=u.spatialReference)&&void 0!==r?r:void 0;var n=e.attributes.Name,i=t+1;m.push({routeId:i,routeName:n,route:e})})),null===o||void 0===o||o.forEach((function(e){var t=e.routeName;f(t).directions=e}));var h=null!==(t=null===p||void 0===p?void 0:p.features.every((function(e){return null==e.attributes.RouteName})))&&void 0!==t&&t&&m.length>0?m[0].routeName:null;return null!==p&&void 0!==p&&p.features.forEach((function(e){var t,r,n,i;e.geometry&&(null!==(r=(t=e.geometry).spatialReference)&&void 0!==r||(t.spatialReference=null!==(n=p.spatialReference)&&void 0!==n?n:void 0));var o=null!==h&&void 0!==h?h:e.attributes.RouteName,a=f(o);null!==(i=a.stops)&&void 0!==i||(a.stops=[]),a.stops.push(e)})),null!==n&&void 0!==n&&n.features.forEach((function(e){var t,r=e.attributes.RouteID,i=v(r),o=n.geometryType,a=n.spatialReference;null!==(t=i.directionLines)&&void 0!==t||(i.directionLines={features:[],geometryType:o,spatialReference:a}),i.directionLines.features.push(e)})),null!==i&&void 0!==i&&i.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),o=i.geometryType,a=i.spatialReference;null!==(t=n.directionPoints)&&void 0!==t||(n.directionPoints={features:[],geometryType:o,spatialReference:a}),n.directionPoints.features.push(e)})),null!==c&&void 0!==c&&c.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=c.geometryType,o=c.spatialReference;null!==(t=n.traversedEdges)&&void 0!==t||(n.traversedEdges={features:[],geometryType:i,spatialReference:o}),n.traversedEdges.features.push(e)})),null!==d&&void 0!==d&&d.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=d.geometryType,o=d.spatialReference;null!==(t=n.traversedJunctions)&&void 0!==t||(n.traversedJunctions={features:[],geometryType:i,spatialReference:o}),n.traversedJunctions.features.push(e)})),null!==y&&void 0!==y&&y.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r);null!==(t=n.traversedTurns)&&void 0!==t||(n.traversedTurns={features:[]}),n.traversedTurns.features.push(e)})),He.fromJSON({routeResults:m,barriers:r,polygonBarriers:l,polylineBarriers:s,messages:a})}var $e=r(40653),et=r(54889),tt=r(16406),rt=r(44745),nt=r(21604),it=r(99821),ot=r(11582),at={type:String,json:{read:{source:"token"},write:{target:"token"}}},lt=r(77981),st=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n.geometry=null,n.geometryType=null,n.name=null,n.spatialRelationship=null,n.type="layer",n.where=null,n}return(0,a.Z)(r)}((0,ot.J)(q.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],st.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({types:y.qM,json:{read:lt.im,write:!0}})],st.prototype,"geometry",void 0),(0,c._)([(0,ne.J)(ie.KA)],st.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({type:String,json:{name:"layerName",write:!0}})],st.prototype,"name",void 0),(0,c._)([(0,ne.J)(ie.S7,{name:"spatialRel"})],st.prototype,"spatialRelationship",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],st.prototype,"type",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],st.prototype,"where",void 0);var ut,pt=st=(0,c._)([(0,j.j)("esri.rest.support.DataLayer")],st),ct=ut=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n}return(0,a.Z)(r,[{key:"clone",value:function(){return new ut((0,Ze.Z)({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements},this.cloneProperties()))}}]),r}(ke.Z);(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ct.prototype,"doNotLocateOnRestrictedElements",void 0);var dt=ct=ut=(0,c._)([(0,j.j)("esri.rest.support.NetworkFeatureSet")],ct),yt=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).doNotLocateOnRestrictedElements=null,n.url=null,n}return(0,a.Z)(r)}((0,ot.J)(q.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],yt.prototype,"url",void 0);var ft,vt=yt=(0,c._)([(0,j.j)("esri.rest.support.NetworkUrl")],yt),mt=ft=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,o.Z)(this,r),(n=t.call(this,e)).accumulateAttributes=null,n.apiKey=null,n.attributeParameterValues=null,n.directionsLanguage=null,n.directionsLengthUnits=null,n.directionsOutputType=null,n.directionsStyleName=null,n.directionsTimeAttribute=null,n.findBestSequence=null,n.geometryPrecision=null,n.geometryPrecisionM=null,n.geometryPrecisionZ=null,n.ignoreInvalidLocations=null,n.impedanceAttribute=null,n.outputGeometryPrecision=null,n.outputGeometryPrecisionUnits=null,n.outputLines="true-shape",n.outSpatialReference=null,n.overrides=null,n.pointBarriers=null,n.polygonBarriers=null,n.polylineBarriers=null,n.preserveFirstStop=null,n.preserveLastStop=null,n.preserveObjectID=null,n.restrictionAttributes=null,n.restrictUTurns=null,n.returnBarriers=!1,n.returnDirections=!1,n.returnPolygonBarriers=!1,n.returnPolylineBarriers=!1,n.returnRoutes=!0,n.returnStops=!1,n.returnTraversedEdges=null,n.returnTraversedJunctions=null,n.returnTraversedTurns=null,n.returnZ=!0,n.startTime=null,n.startTimeIsUTC=!0,n.stops=null,n.timeWindowsAreUTC=null,n.travelMode=null,n.useHierarchy=null,n.useTimeWindows=null,n}return(0,a.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return null==e?null:e.map((function(e){return ie.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ie.Ul.toJSON(e)})))}},{key:"writePointBarriers",value:function(e,t,r){gt(e,t,r)}},{key:"writePolygonBarrier",value:function(e,t,r){gt(e,t,r)}},{key:"writePolylineBarrier",value:function(e,t,r){gt(e,t,r)}},{key:"readRestrictionAttributes",value:function(e){return null==e?null:e.map((function(e){return ie.kL.fromJSON(e)}))}},{key:"writeRestrictionAttributes",value:function(e,t,r){null!=e&&e.length&&(t[r]=e.map((function(e){return ie.kL.toJSON(e)})))}},{key:"readStartTime",value:function(e,t){var r=t.startTime;return null==r?null:"now"===r?"now":new Date(r)}},{key:"writeStartTime",value:function(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}},{key:"readStops",value:function(e,t){return function(e){return function(e){return e&&"type"in e}(e)?pt.fromJSON(e):function(e){return e&&"url"in e}(e)?vt.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?dt.fromJSON(e):function(e){return e&&"features"in e}(e)?ke.Z.fromJSON(e):null}(t.stops)}},{key:"writeStops",value:function(e,t,r){gt(e,t,r)}}],[{key:"from",value:function(e){return(0,B.TJ)(ft,e)}}]),r}((0,ot.J)(q.wq));(0,c._)([(0,N.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],mt.prototype,"accumulateAttributes",void 0),(0,c._)([(0,x.r)("accumulateAttributes")],mt.prototype,"readAccumulateAttributes",null),(0,c._)([(0,A.c)("accumulateAttributes")],mt.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)(at)],mt.prototype,"apiKey",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],mt.prototype,"attributeParameterValues",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],mt.prototype,"directionsLanguage",void 0),(0,c._)([(0,ne.J)(ie.GX)],mt.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,ne.J)(ie.$7)],mt.prototype,"directionsOutputType",void 0),(0,c._)([(0,ne.J)(ie.WP)],mt.prototype,"directionsStyleName",void 0),(0,c._)([(0,ne.J)(ie.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],mt.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"findBestSequence",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecision",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionM",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionZ",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"ignoreInvalidLocations",void 0),(0,c._)([(0,ne.J)(ie.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],mt.prototype,"impedanceAttribute",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],mt.prototype,"outputGeometryPrecision",void 0),(0,c._)([(0,ne.J)(ie.q$)],mt.prototype,"outputGeometryPrecisionUnits",void 0),(0,c._)([(0,ne.J)(ie.no)],mt.prototype,"outputLines",void 0),(0,c._)([(0,N.Cb)({type:Je.Z,json:{name:"outSR",write:!0}})],mt.prototype,"outSpatialReference",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],mt.prototype,"overrides",void 0),(0,c._)([(0,N.Cb)({json:{name:"barriers",write:!0}})],mt.prototype,"pointBarriers",void 0),(0,c._)([(0,A.c)("pointBarriers")],mt.prototype,"writePointBarriers",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],mt.prototype,"polygonBarriers",void 0),(0,c._)([(0,A.c)("polygonBarriers")],mt.prototype,"writePolygonBarrier",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],mt.prototype,"polylineBarriers",void 0),(0,c._)([(0,A.c)("polylineBarriers")],mt.prototype,"writePolylineBarrier",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveFirstStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveLastStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveObjectID",void 0),(0,c._)([(0,N.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],mt.prototype,"restrictionAttributes",void 0),(0,c._)([(0,x.r)("restrictionAttributes")],mt.prototype,"readRestrictionAttributes",null),(0,c._)([(0,A.c)("restrictionAttributes")],mt.prototype,"writeRestrictionAttributes",null),(0,c._)([(0,ne.J)(ie.ip)],mt.prototype,"restrictUTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnDirections",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolygonBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolylineBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnRoutes",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnStops",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedEdges",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"returnZ",void 0),(0,c._)([(0,N.Cb)({type:Date,json:{type:Number,write:!0}})],mt.prototype,"startTime",void 0),(0,c._)([(0,x.r)("startTime")],mt.prototype,"readStartTime",null),(0,c._)([(0,A.c)("startTime")],mt.prototype,"writeStartTime",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"startTimeIsUTC",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],mt.prototype,"stops",void 0),(0,c._)([(0,x.r)("stops")],mt.prototype,"readStops",null),(0,c._)([(0,A.c)("stops")],mt.prototype,"writeStops",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"timeWindowsAreUTC",void 0),(0,c._)([(0,N.Cb)({type:ue.Z,json:{write:!0}})],mt.prototype,"travelMode",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"useHierarchy",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],mt.prototype,"useTimeWindows",void 0);var ht=mt=ft=(0,c._)([(0,j.j)("esri.rest.support.RouteParameters")],mt);function gt(e,t,r){null!=e&&(t[r]=h.Z.isCollection(e)?{features:e.toArray().map((function(e){return e.toJSON()}))}:e.toJSON())}var bt=r(37321),_t=r(70491),wt=r(77577);function Zt(e){return e.length?e:null}function St(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:St("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:St("esriGeometryPolyline")}}}function Ct(e){return"layers"in e}function kt(e){return"esri.rest.support.FeatureSet"===e.declaredClass}function Tt(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}function Nt(e,t,r){var n,i,o,a,l,s,u,c,d,y,f,v,m,h,b,_,w,Z=null===(n=t.networkDataset)||void 0===n?void 0:n.networkAttributes,S=null!==(i=null===Z||void 0===Z?void 0:Z.filter((function(e){return"cost"===e.usageType})))&&void 0!==i?i:[],C=null!==(o=r.travelMode)&&void 0!==o?o:t.defaultTravelMode;if(null!=C){var k=C.timeAttributeName,T=C.distanceAttributeName,N=S.find((function(e){return e.name===k})),B=S.find((function(e){return e.name===T})),R=null!==(a=null!==(l=null===(s=r.travelMode)||void 0===s?void 0:s.impedanceAttributeName)&&void 0!==l?l:r.impedanceAttribute)&&void 0!==a?a:t.impedance,x=null===N||void 0===N?void 0:N.units,j=null===B||void 0===B?void 0:B.units;if(!x||!j)throw new g.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");var A,P=null!==(u=r.directionsLanguage)&&void 0!==u?u:t.directionsLanguage,M=null!==(c=null!==(d=r.accumulateAttributes)&&void 0!==d?d:t.accumulateAttributeNames)&&void 0!==c?c:[],O=new Set(S.filter((function(e){var t=e.name;return t===k||t===T||t===R||null!=t&&M.includes(t)})).map((function(e){return e.name}))),I=function(e){for(var t in e)O.has(t)||delete e[t]},L=(0,p.Z)(e.pointBarriers);try{for(L.s();!(A=L.n()).done;){var F,z=A.value;null!=z.costs&&(z.addedCost=null!==(F=z.costs[R])&&void 0!==F?F:0,I(z.costs))}}catch(ue){L.e(ue)}finally{L.f()}var D,J=(0,p.Z)(e.polygonBarriers);try{for(J.s();!(D=J.n()).done;){var G,E=D.value;null!=E.costs&&(E.scaleFactor=null!==(G=E.costs[R])&&void 0!==G?G:1,I(E.costs))}}catch(ue){J.e(ue)}finally{J.f()}var q,U=(0,p.Z)(e.polylineBarriers);try{for(U.s();!(q=U.n()).done;){var V,W=q.value;null!=W.costs&&(W.scaleFactor=null!==(V=W.costs[R])&&void 0!==V?V:1,I(W.costs))}}catch(ue){U.e(ue)}finally{U.f()}var H=e.routeInfo,X=r.findBestSequence,Q=r.preserveFirstStop,K=r.preserveLastStop,Y=r.startTimeIsUTC,$=r.timeWindowsAreUTC;H.analysisSettings=new bt.Z({accumulateAttributes:M,directionsLanguage:P,findBestSequence:X,preserveFirstStop:Q,preserveLastStop:K,startTimeIsUTC:Y,timeWindowsAreUTC:$,travelMode:C}),H.totalDuration=xt(null!==(y=null===(f=H.totalCosts)||void 0===f?void 0:f[k])&&void 0!==y?y:0,x),H.totalDistance=jt(null!==(v=null===(m=H.totalCosts)||void 0===m?void 0:m[T])&&void 0!==v?v:0,j),H.totalLateDuration=xt(null!==(h=null===(b=H.totalViolations)||void 0===b?void 0:b[k])&&void 0!==h?h:0,x),H.totalWaitDuration=xt(null!==(_=null===(w=H.totalWait)||void 0===w?void 0:w[k])&&void 0!==_?_:0,x),null!=H.totalCosts&&I(H.totalCosts),null!=H.totalViolations&&I(H.totalViolations),null!=H.totalWait&&I(H.totalWait);var ee,te=(0,p.Z)(e.stops);try{for(te.s();!(ee=te.n()).done;){var re,ne,ie,oe,ae,le,se=ee.value;null!=se.serviceCosts&&(se.serviceDuration=xt(null!==(re=se.serviceCosts[k])&&void 0!==re?re:0,x),se.serviceDistance=jt(null!==(ne=se.serviceCosts[T])&&void 0!==ne?ne:0,j),I(se.serviceCosts)),null!=se.cumulativeCosts&&(se.cumulativeDuration=xt(null!==(ie=se.cumulativeCosts[k])&&void 0!==ie?ie:0,x),se.cumulativeDistance=jt(null!==(oe=se.cumulativeCosts[T])&&void 0!==oe?oe:0,j),I(se.cumulativeCosts)),null!=se.violations&&(se.lateDuration=xt(null!==(ae=se.violations[k])&&void 0!==ae?ae:0,x),I(se.violations)),null!=se.wait&&(se.waitDuration=xt(null!==(le=se.wait[k])&&void 0!==le?le:0,x),I(se.wait))}}catch(ue){te.e(ue)}finally{te.f()}}else zt.warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.")}function Bt(e){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,u.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Je.Z.WGS84,e.next=3,(0,O.initializeProjection)(t.spatialReference,r);case 3:return e.abrupt("return",(0,O.project)(t,r));case 4:case"end":return e.stop()}}),e)}))),Rt.apply(this,arguments)}function xt(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function jt(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,k.En)(e,t,"meters")}var At=h.Z.ofType($e.Z),Pt=h.Z.ofType(et.Z),Mt=h.Z.ofType(tt.Z),Ot=h.Z.ofType(rt.Z),It=h.Z.ofType(nt.Z),Lt=h.Z.ofType(_t.Z),Ft="esri.layers.RouteLayer",zt=_.Z.getLogger(Ft),Dt=function(e){(0,l.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;(0,o.Z)(this,r),(n=t.call(this,e))._cachedServiceDescription=null,n._featureCollection=null,n._type="Feature Collection",n.defaultSymbols=new K,n.directionLines=null,n.directionPoints=null,n.featureCollectionType="route",n.legendEnabled=!1,n.maxScale=0,n.minScale=0,n.pointBarriers=new Mt,n.polygonBarriers=new Ot,n.polylineBarriers=new It,n.routeInfo=null,n.spatialReference=Je.Z.WGS84,n.stops=new Lt,n.type="route";var i=function(){n._setStopSymbol(n.stops)};return n.addHandles((0,C.on)((function(){return n.stops}),"change",i,{sync:!0,onListenerAdd:i})),n}return(0,a.Z)(r,[{key:"writeFeatureCollectionWebmap",value:function(e,t,r,n){var i=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((function(e){return!!e})),o=i.map((function(e,t){return t})),a="web-map"===n.origin?"featureCollection.layers":"layers";(0,Z.RB)(a,i,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=o}},{key:"readDirectionLines",value:function(e,t){return this._getNetworkFeatures(t,"DirectionLines",(function(e){return $e.Z.fromGraphic(e)}))}},{key:"readDirectionPoints",value:function(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(function(e){return et.Z.fromGraphic(e)}))}},{key:"fullExtent",get:function(){var e,t=new M.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:Je.Z.WGS84});if(null!=this.routeInfo&&null!=this.routeInfo.geometry)return null!==(e=this.routeInfo.geometry.extent)&&void 0!==e?e:t;if(null==this.stops)return t;var r=this.stops.filter((function(e){return null!=e.geometry}));if(r.length<2)return t;var n=r.at(0).geometry.spatialReference;if(null==n)return t;var i=r.toArray().map((function(e){var t=e.geometry;return[t.x,t.y]}));return new wt.Z({points:i,spatialReference:n}).extent}},{key:"readMaxScale",value:function(e,t){var r,n,i=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,o=null===i||void 0===i?void 0:i.find((function(e){return null!=e.layerDefinition.maxScale}));return null!==(n=null===o||void 0===o?void 0:o.layerDefinition.maxScale)&&void 0!==n?n:0}},{key:"readMinScale",value:function(e,t){var r,n,i=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,o=null===i||void 0===i?void 0:i.find((function(e){return null!=e.layerDefinition.minScale}));return null!==(n=null===o||void 0===o?void 0:o.layerDefinition.minScale)&&void 0!==n?n:0}},{key:"readPointBarriers",value:function(e,t){return this._getNetworkFeatures(t,"Barriers",(function(e){return tt.Z.fromGraphic(e)}))}},{key:"readPolygonBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(function(e){return rt.Z.fromGraphic(e)}))}},{key:"readPolylineBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(function(e){return nt.Z.fromGraphic(e)}))}},{key:"readRouteInfo",value:function(e,t){var r=this._getNetworkFeatures(t,"RouteInfo",(function(e){return it.Z.fromGraphic(e)}));return r.length>0?r.at(0):null}},{key:"readSpatialReference",value:function(e,t){var r,n,i,o,a,l,s=Ct(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers;if(null===s||void 0===s||!s.length)return Je.Z.WGS84;var u=s[0],p=u.layerDefinition,c=u.featureSet,d=c.features[0],y=null!==(n=null!==(i=null!==(o=null!==(a=null===d||void 0===d||null===(l=d.geometry)||void 0===l?void 0:l.spatialReference)&&void 0!==a?a:c.spatialReference)&&void 0!==o?o:p.spatialReference)&&void 0!==i?i:p.extent.spatialReference)&&void 0!==n?n:I.Zn;return Je.Z.fromJSON(y)}},{key:"readStops",value:function(e,t){var r=this;return this._getNetworkFeatures(t,"Stops",(function(e){return _t.Z.fromGraphic(e)}),(function(e){return r._setStopSymbol(e)}))}},{key:"title",get:function(){return null!=this.routeInfo&&null!=this.routeInfo.name?this.routeInfo.name:"Route"},set:function(e){this._overrideIfSome("title",e)}},{key:"url",get:function(){return d.Z.routeServiceUrl},set:function(e){null!=e?this._set("url",(0,G.Nm)(e,zt)):this._set("url",d.Z.routeServiceUrl)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"removeAll",value:function(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}},{key:"removeResult",value:function(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}},{key:"save",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var t,r,n,o,a,l,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=this.fullExtent,r=this.portalItem){e.next=5;break}throw new g.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");case 5:if(r.id){e.next=7;break}throw new g.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");case 7:if("Feature Collection"===r.type){e.next=9;break}throw new g.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');case 9:if(null!=this.routeInfo){e.next=11;break}throw new g.Z("routelayer:route-unsolved","save() requires a solved route");case 11:return n=r.portal,e.next=14,n.signIn();case 14:if(e.t0=n.user,e.t0){e.next=18;break}return e.next=18,r.reload();case 18:if(o=r.itemUrl,"admin"===(a=r.itemControl)||"update"===a){e.next=21;break}throw new g.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");case 21:return l={messages:[],origin:"portal-item",portal:n,url:o?(0,T.mN)(o):void 0,writtenProperties:[]},s=this.write(void 0,l),e.next=24,Bt(t);case 24:return r.extent=e.sent,r.title=this.title,e.next=28,r.update({data:s});case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var r,n,o,a,l,s,u,p,c,d,y=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load();case 3:if(null!=this.routeInfo){e.next=5;break}throw new g.Z("routelayer:route-unsolved","saveAs() requires a solved route");case 5:if(s=$.default.from(t).clone(),null===(r=s.extent)||void 0===r){e.next=10;break}e.next=13;break;case 10:return e.next=12,Bt(this.fullExtent);case 12:s.extent=e.sent;case 13:return s.id=null,null!==(n=s.portal)&&void 0!==n||(s.portal=Y.Z.getDefault()),null!==(o=s.title)&&void 0!==o||(s.title=this.title),s.type="Feature Collection",s.typeKeywords=["Data","Feature Collection",ee.Kz.MULTI_LAYER,"Route Layer"],u=s.portal,p={messages:[],origin:"portal-item",portal:u,url:null,writtenProperties:[]},e.next=21,u.signIn();case 21:return c=null===l||void 0===l?void 0:l.folder,d=this.write(void 0,p),e.next=24,null===(a=u.user)||void 0===a?void 0:a.addItem({item:s,folder:c,data:d});case 24:return this.portalItem=s,(0,P.D)(p),p.portalItem=s,e.abrupt("return",s);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"solve",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,r){var n,o,a,l,s,u,c,d,y,f,v,m,b,_,w,Z,C,k,T,N,B,R,x,j;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=null!==(n=null===t||void 0===t?void 0:t.stops)&&void 0!==n?n:this.stops,y=null!==(o=null===t||void 0===t?void 0:t.pointBarriers)&&void 0!==o?o:Zt(this.pointBarriers),f=null!==(a=null===t||void 0===t?void 0:t.polylineBarriers)&&void 0!==a?a:Zt(this.polylineBarriers),v=null!==(l=null===t||void 0===t?void 0:t.polygonBarriers)&&void 0!==l?l:Zt(this.polygonBarriers),null!=d){e.next=3;break}throw new g.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");case 3:if(!((kt(d)||Tt(d))&&d.features.length<2||h.Z.isCollection(d)&&d.length<2)){e.next=5;break}throw new g.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");case 5:if(h.Z.isCollection(d)){m=(0,p.Z)(d);try{for(m.s();!(b=m.n()).done;)b.value.routeName=null}catch(i){m.e(i)}finally{m.f()}}return _=null===t||void 0===t?void 0:t.apiKey,w=this.url,e.next=10,this._getServiceDescription(w,_,r);case 10:for(R in Z=e.sent,C=null!==(s=null===t||void 0===t?void 0:t.travelMode)&&void 0!==s?s:Z.defaultTravelMode,k=null!==(u=null===t||void 0===t?void 0:t.accumulateAttributes)&&void 0!==u?u:[],null!=C&&(k.push(C.distanceAttributeName),C.timeAttributeName&&k.push(C.timeAttributeName)),T={startTime:new Date},N={accumulateAttributes:k,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:y,polylineBarriers:f,polygonBarriers:v,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!y,returnDirections:!0,returnPolygonBarriers:!!v,returnPolylineBarriers:!!f,returnRoutes:!0,returnStops:!0,stops:d},B=t?ht.from(t):new ht,T)null==B[R]&&(B[R]=T[R]);return B.set(N),e.prev=17,e.next=20,Qe(w,B,r);case 20:x=e.sent,e.next=26;break;case 23:throw e.prev=23,e.t0=e.catch(17),(0,S.D_)(e.t0)?e.t0:new g.Z("routelayer:failed-route-request","the routing request failed",{error:e.t0});case 26:return j=this._toRouteLayerSolution(x),e.abrupt("return",(this._isOverridden("title")||(this.title=null!==(c=j.routeInfo.name)&&void 0!==c?c:"Route"),Nt(j,Z,B),j));case 28:case"end":return e.stop()}}),e,this,[[17,23]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=e.stops,r=e.directionLines,n=e.directionPoints,i=e.pointBarriers,o=e.polylineBarriers,a=e.polygonBarriers,l=e.routeInfo;this.set({stops:t,pointBarriers:i,polylineBarriers:o,polygonBarriers:a}),this._set("directionLines",r),this._set("directionPoints",n),this._set("routeInfo",l),null!=l.geometry&&(this.spatialReference=l.geometry.spatialReference)}},{key:"_getNetworkFeatures",value:function(e,t,r,n){var i,o,a,l,s=this,u=Ct(e)?e.layers:null===(i=e.featureCollection)||void 0===i?void 0:i.layers,p=null===u||void 0===u?void 0:u.find((function(e){return e.layerDefinition.name===t}));if(null==p)return new h.Z;var c=p.layerDefinition,d=p.popupInfo,y=p.featureSet,g=c.drawingInfo.renderer,b=y.features,_=null!==(o=null!==(a=null!==(l=y.spatialReference)&&void 0!==l?l:c.spatialReference)&&void 0!==a?a:c.extent.spatialReference)&&void 0!==o?o:I.Zn,w=g&&(0,m.a)(g),Z=Je.Z.fromJSON(_),S=b.map((function(e){var n,i,o,a=f.Z.fromJSON(e);null!=a.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(a.geometry.spatialReference=Z);var l=r(a);return null!==(n=l.symbol)&&void 0!==n||(l.symbol=null!==(i=null===w||void 0===w?void 0:w.getSymbol(a))&&void 0!==i?i:s._getNetworkSymbol(t)),null!==(o=l.popupTemplate)&&void 0!==o||(l.popupTemplate=d&&v.Z.fromJSON(d)),l}));return n&&S.some((function(e){return!e.symbol}))&&n(S),new h.Z(S)}},{key:"_getNetworkSymbol",value:function(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}},{key:"_getServiceDescription",value:function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t,r,n){var o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this._cachedServiceDescription||this._cachedServiceDescription.url!==t){e.next=2;break}return e.abrupt("return",this._cachedServiceDescription.serviceDescription);case 2:return e.next=4,me(t,r,n);case 4:return o=e.sent,e.abrupt("return",(this._cachedServiceDescription={serviceDescription:o,url:t},o));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"_setStopSymbol",value:function(e){if(e&&0!==e.length&&null!=this.defaultSymbols.stops&&!e.every((function(e){return null!=e.symbol}))){var t=this.defaultSymbols.stops,r=t.first,i=t.last,o=t.middle,a=t.unlocated,l=t.waypoint,s=t.break;if(null!=this.routeInfo&&1!==e.length){var u,c=e.map((function(e){return e.sequence})).filter((function(e){return null!=e})),d=Math.min.apply(Math,(0,n.Z)(c)),y=Math.max.apply(Math,(0,n.Z)(c)),f=(0,p.Z)(e);try{for(f.s();!(u=f.n()).done;){var v=u.value;v.sequence!==d?v.sequence!==y?"ok"===v.status||"not-located-on-closest"===v.status?"waypoint"!==v.locationType?"break"!==v.locationType?v.symbol=o:v.symbol=s:v.symbol=l:v.symbol=a:v.symbol=i:v.symbol=r}}catch(m){f.e(m)}finally{f.f()}}else e.forEach((function(t,n){switch(n){case 0:t.symbol=r;break;case e.length-1:t.symbol=i;break;default:t.symbol=o}}))}}},{key:"_toRouteLayerSolution",value:function(e){var t,r,n,i,o,a,l,s=this,u=null===(t=e.routeResults[0].stops)||void 0===t?void 0:t.map((function(e){return _t.Z.fromJSON(e.toJSON())}));this._setStopSymbol(u);var p=new Lt(u),c=new Ot(null===(r=e.polygonBarriers)||void 0===r?void 0:r.map((function(e){var t=rt.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polygonBarriers,t}))),d=new It(null===(n=e.polylineBarriers)||void 0===n?void 0:n.map((function(e){var t=nt.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polylineBarriers,t}))),y=new Mt(null===(i=e.pointBarriers)||void 0===i?void 0:i.map((function(e){var t=tt.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.pointBarriers,t}))),f=null===(o=e.routeResults[0].route)||void 0===o?void 0:o.toJSON(),v=it.Z.fromJSON(f);v.symbol=this.defaultSymbols.routeInfo;var m=new Pt(null===(a=e.routeResults[0].directionPoints)||void 0===a?void 0:a.features.map((function(e){var t=et.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionPoints,t})));return{directionLines:new At(null===(l=e.routeResults[0].directionLines)||void 0===l?void 0:l.features.map((function(e){var t=$e.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionLines,t}))),directionPoints:m,pointBarriers:y,polygonBarriers:c,polylineBarriers:d,routeInfo:v,stops:p}}},{key:"_writeDirectionLines",value:function(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",$e.Z.fields,$e.Z.popupInfo,"DirectionLines","Direction Lines")}},{key:"_writeDirectionPoints",value:function(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",et.Z.fields,et.Z.popupInfo,"DirectionPoints","Direction Points")}},{key:"_writeNetworkFeatures",value:function(e,t,r,n,i,o,a){if(null==e||!e.length)return null;var l=this.spatialReference.toJSON(),s=this.fullExtent,u=this.maxScale,p=this.minScale;return{featureSet:{features:e.toArray().map((function(e){return function(e){var t=e.toGraphic().toJSON();return{attributes:t.attributes,geometry:t.geometry,popupInfo:t.popupTemplate,symbol:t.symbol}}(e)})),geometryType:r,spatialReference:l},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():St(r)}},extent:s.toJSON(),fields:n,geometryType:r,hasM:!1,hasZ:!1,maxScale:u,minScale:p,name:o,objectIdField:"ObjectID",spatialReference:l,title:a,type:"Feature Layer",typeIdField:""},popupInfo:i}}},{key:"_writePointBarriers",value:function(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",tt.Z.fields,tt.Z.popupInfo,"Barriers","Point Barriers")}},{key:"_writePolygonBarriers",value:function(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",rt.Z.fields,rt.Z.popupInfo,"PolygonBarriers","Polygon Barriers")}},{key:"_writePolylineBarriers",value:function(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",nt.Z.fields,nt.Z.popupInfo,"PolylineBarriers","Line Barriers")}},{key:"_writeRouteInfo",value:function(){return this._writeNetworkFeatures(null!=this.routeInfo?new h.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",it.Z.fields,it.Z.popupInfo,"RouteInfo","Route Details")}},{key:"_writeStops",value:function(){var e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",_t.Z.fields,_t.Z.popupInfo,"Stops","Stops");if(null==e)return null;var t=this.defaultSymbols.stops,r=null!=t&&null!=t.first&&t.first.toJSON(),n=null!=t&&null!=t.middle&&t.middle.toJSON(),i=null!=t&&null!=t.last&&t.last.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:n,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:"".concat(this.stops.length),symbol:i,label:"Last Stop"}]},e}}]),r}((0,F.h)((0,J.M)((0,z.q)((0,D.I)((0,w.R)((0,b.p)(L.Z)))))));(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy:function(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],Dt.prototype,"_featureCollection",void 0),(0,c._)([(0,A.c)(["web-map","portal-item"],"_featureCollection")],Dt.prototype,"writeFeatureCollectionWebmap",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy:function(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],Dt.prototype,"_type",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:K})],Dt.prototype,"defaultSymbols",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Dt.prototype,"directionLines",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],Dt.prototype,"readDirectionLines",null),(0,c._)([(0,N.Cb)({readOnly:!0})],Dt.prototype,"directionPoints",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],Dt.prototype,"readDirectionPoints",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Dt.prototype,"featureCollectionType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Dt.prototype,"fullExtent",null),(0,c._)([(0,N.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],Dt.prototype,"legendEnabled",void 0),(0,c._)([(0,N.Cb)({type:["show","hide"]})],Dt.prototype,"listMode",void 0),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Dt.prototype,"maxScale",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],Dt.prototype,"readMaxScale",null),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],Dt.prototype,"minScale",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],Dt.prototype,"readMinScale",null),(0,c._)([(0,N.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],Dt.prototype,"operationalLayerType",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(tt.Z)})],Dt.prototype,"pointBarriers",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],Dt.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(rt.Z)})],Dt.prototype,"polygonBarriers",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],Dt.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(nt.Z)})],Dt.prototype,"polylineBarriers",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],Dt.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({readOnly:!0})],Dt.prototype,"routeInfo",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],Dt.prototype,"readRouteInfo",null),(0,c._)([(0,N.Cb)({type:Je.Z})],Dt.prototype,"spatialReference",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],Dt.prototype,"readSpatialReference",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(_t.Z)})],Dt.prototype,"stops",void 0),(0,c._)([(0,x.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],Dt.prototype,"readStops",null),(0,c._)([(0,N.Cb)()],Dt.prototype,"title",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1}})],Dt.prototype,"type",void 0),(0,c._)([(0,N.Cb)()],Dt.prototype,"url",null);var Jt=Dt=(0,c._)([(0,j.j)(Ft)],Dt)},83040:function(e,t,r){r.d(t,{Z:function(){return _}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),s=r(27366),u=r(43404),p=r(46784),c=r(49861),d=r(25243),y=(r(63780),r(93169),r(27135)),f=r(38511),v=r(69912),m=r(66591),h=r(85249),g=new u.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),b=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(r,[{key:"readDescription",value:function(e,t){var r,n,i=t.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(r=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==r?r:null}},{key:"readValueType",value:function(e,t){var r=t.description,n=null;try{n=r?JSON.parse(r):null}catch(i){}return n?g.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),r}(p.wq);(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"alias",void 0),(0,s._)([(0,c.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],b.prototype,"defaultValue",void 0),(0,s._)([(0,c.Cb)()],b.prototype,"description",void 0),(0,s._)([(0,f.r)("description")],b.prototype,"readDescription",null),(0,s._)([(0,c.Cb)({types:m.V5,json:{read:{reader:m.im},write:!0}})],b.prototype,"domain",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"editable",void 0),(0,s._)([(0,c.Cb)({type:d.z8,json:{write:!0}})],b.prototype,"length",void 0),(0,s._)([(0,c.Cb)({type:String,json:{write:!0}})],b.prototype,"name",void 0),(0,s._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],b.prototype,"nullable",void 0),(0,s._)([(0,y.J)(h.v)],b.prototype,"type",void 0),(0,s._)([(0,c.Cb)()],b.prototype,"valueType",void 0),(0,s._)([(0,f.r)("valueType",["description"])],b.prototype,"readValueType",null),(0,s._)([(0,c.Cb)({type:Boolean,json:{read:!1}})],b.prototype,"visible",void 0);var _=b=n=(0,s._)([(0,v.j)("esri.layers.support.Field")],b)},52410:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(37762),i=r(15671),o=r(43144),a=r(37270);function l(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function s(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,i.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o,u=[],d=(0,n.Z)(t);try{for(d.s();!(r=d.n()).done;){var y=r.value,f=null===y||void 0===y?void 0:y.name,v=c(null===y||void 0===y?void 0:y.name);if(f&&v){var m=p(f);this._fieldsMap.set(f,y),this._fieldsMap.set(m,y),this._normalizedFieldsMap.set(v,y),u.push(m),"date"===(o=y).type||"esriFieldTypeDate"===o.type||"date-only"===o.type||"esriFieldTypeDateOnly"===o.type||"timestamp-offset"===o.type||"esriFieldTypeTimestampOffset"===o.type?(this.dateFields.push(y),this._dateFieldsSet.add(y)):(0,a.H7)(y)&&(this._numericFieldsSet.add(y),this.numericFields.push(y)),l(y)||s(y)||(y.editable=null==y.editable||!!y.editable,y.nullable=null==y.nullable||!!y.nullable)}}}catch(h){d.e(h)}finally{d.f()}u.sort(),this.uid=u.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,n.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;l(r)||s(r)||r.nullable||void 0!==(0,a.os)(r)||this._requiredFields.push(r)}}catch(i){t.e(i)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(p(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(c(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function p(e){return e.trim().toLowerCase()}function c(e){var t,r;return null!==(t=null===(r=(0,a.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},66591:function(e,t,r){r.d(t,{im:function(){return B},V5:function(){return N}});r(93169);var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),s=r(27366),u=r(84652),p=r(49861),c=(r(25243),r(27135)),d=r(69912),y=r(46784),f=(r(63780),n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(y.wq));(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,s._)([(0,p.Cb)({type:[String,Number],json:{write:!0}})],f.prototype,"code",void 0),f=n=(0,s._)([(0,d.j)("esri.layers.support.CodedValue")],f);var v=new(r(43404).X)({inherited:"inherited",codedValue:"coded-value",range:"range"}),m=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return(0,o.Z)(r)}(y.wq);(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],m.prototype,"name",void 0),(0,s._)([(0,c.J)(v)],m.prototype,"type",void 0);var h,g=m=(0,s._)([(0,d.j)("esri.layers.support.Domain")],m),b=h=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new h({codedValues:(0,u.d9)(this.codedValues),name:this.name})}}]),r}(g);(0,s._)([(0,p.Cb)({type:[f],json:{write:!0}})],b.prototype,"codedValues",void 0),(0,s._)([(0,c.J)({codedValue:"coded-value"})],b.prototype,"type",void 0);var _,w=b=h=(0,s._)([(0,d.j)("esri.layers.support.CodedValueDomain")],b),Z=(r(32718),r(10064),_=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="inherited",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new _}}]),r}(g));(0,s._)([(0,c.J)({inherited:"inherited"})],Z.prototype,"type",void 0);var S,C=Z=_=(0,s._)([(0,d.j)("esri.layers.support.InheritedDomain")],Z),k=S=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new S({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(g);(0,s._)([(0,p.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],k.prototype,"maxValue",void 0),(0,s._)([(0,p.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],k.prototype,"minValue",void 0),(0,s._)([(0,c.J)({range:"range"})],k.prototype,"type",void 0);var T=k=S=(0,s._)([(0,d.j)("esri.layers.support.RangeDomain")],k),N={key:"type",base:g,typeMap:{range:k,"coded-value":w,inherited:C}};function B(e){if(!e||!e.type)return null;switch(e.type){case"range":return T.fromJSON(e);case"codedValue":return w.fromJSON(e);case"inherited":return C.fromJSON(e)}return null}},85249:function(e,t,r){r.d(t,{v:function(){return n}});var n=new(r(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},27811:function(e,t,r){r.d(t,{AJ:function(){return p},If:function(){return v},QM:function(){return y},hy:function(){return f},k0:function(){return u},nu:function(){return s},uI:function(){return d},wx:function(){return m}});var n=r(37762),i=r(16889),o=r(17842),a=r(90045),l=r(67077),s=2.4;function u(e){return(0,o.Wz)(e*s)}function p(e){return(0,o.F2)(e)/s}function c(e,t,r,n){var o=t.color,l=t.ratio,s=r.color,u=r.ratio;if(u===l){var p=1e-6;1===u?l-=p:u+=p}var c=(0,i.uZ)((n-l)/(u-l),0,1);(0,a.l)(e,o.toArray(),s.toArray(),c)}function d(e){var t=new Uint8ClampedArray(2048);if(e=e.filter((function(e){var t=e.ratio;return t>=0&&t<=1})).sort((function(e,t){return e.ratio-t.ratio})).map((function(e){var t=e.color,r=e.ratio;return{color:t,ratio:Math.max(r,.001)}})),e.length<1)return t;for(var r=e[0],n=e[0],i=1,o=(0,l.c)(),a=0;a<512;a++){for(var s=(a+.5)/512;s>n.ratio&&i<e.length;)r=n,n=e[i++];c(o,r,n,s),t.set(o,4*a)}return t}function y(e,t,r,i){var a,l,s=t.radius,u=t.fieldOffset,p=t.field,c=Math.round((0,o.F2)(s)),d=new Float64Array(r*i),y=Number.NEGATIVE_INFINITY,f=function(e,t){return null!=e?"string"==typeof t?function(t){return-1*+t.readAttribute(e)}:function(r){return+r.readAttribute(e)+t}:function(e){return 1}}(p,u),m=new Set,h=(0,n.Z)(e);try{for(h.s();!(l=h.n()).done;)for(var g=l.value.getCursor();g.next();){var b=g.getObjectId();if(!m.has(b)){m.add(b);var _=g.readLegacyPointGeometry(),w=128;if(!(_.x<-w||_.x>=r+w||_.y<-w||_.y>i+w))for(var Z=+f(g),S=Math.max(0,Math.round(_.x)-c),C=Math.max(0,Math.round(_.y)-c),k=Math.min(i,Math.round(_.y)+c),T=Math.min(r,Math.round(_.x)+c),N=C;N<k;N++)for(var B=S;B<T;B++){var R=N*r+B,x=v(_.x-B,_.y-N,c);(a=d[R]+=x*Z)>y&&(y=a)}}}}catch(j){h.e(j)}finally{h.f()}return{matrix:d.buffer,max:y}}function f(e,t,r,n,o,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var l=e.getImageData(0,0,t,t);r&&n&&l.data.set(new Uint8ClampedArray(function(e,t,r,n,o){for(var a=new Uint32Array(e*e),l=("buffer"in t?t:new Float64Array(t)),s=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),u=s.length/(o-n),p=0;p<l.length;p++){var c=l[p],d=Math.floor((c-n)*u);a[p]=s[(0,i.uZ)(d,0,s.length-1)]}return a.buffer}(t,r,n,o,a))),e.putImageData(l,0,0)}function v(e,t,r){var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))/r;return n>1?0:3/(Math.PI*Math.pow(r,2))*Math.pow(1-Math.pow(n,2),2)}function m(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(r){return+r[e]+t}:function(){return 1}}},49818:function(e,t,r){r.d(t,{Z:function(){return k}});var n,i=r(29439),o=r(37762),a=r(15671),l=r(43144),s=r(60136),u=r(29388),p=r(27366),c=r(59486),d=r(52639),y=r(43404),f=r(46784),v=r(84652),m=r(49861),h=(r(25243),r(38511)),g=r(69912),b=r(31201),_=r(78952),w=r(77981),Z=r(83040),S=new y.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),C=n=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,l.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=_.Z.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],a=d.Z.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;null==a.geometry||l||(a.geometry.spatialReference=r);var s=o.aggregateGeometries,u=a.aggregateGeometries;if(s&&null!=u)for(var p in u){var c=u[p],y=s[p],f=null===y||void 0===y?void 0:y.spatialReference;null==c||f||(c.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)S.write(e,t,r,n);else{var i=this.features;if(i){var a,l=(0,o.Z)(i);try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s&&null!=s.geometry)return void S.write(s.geometry.type,t,r,n)}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,w.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=_.Z.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=(0,o.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&null!=a.geometry&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(l){i.e(l)}finally{i.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),r=t[0],n=t[1],o=(0,i.Z)(e.translate,2),a=o[0],l=o[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((l-e)/n)})),p=0,c=s.length;p<c;p++)(null===u||void 0===u?void 0:u(s[p].geometry))||(s.splice(p,1),p--,c--);return this.transform=e,this}},{key:"unquantize",value:function(){var e,t,r=this.geometryType,n=this.features,a=this.transform;if(!a)return this;var l=(0,i.Z)(a.translate,2),s=l[0],u=l[1],p=(0,i.Z)(a.scale,2),c=p[0],d=p[1],y=null,f=null;if(this.hasZ&&null!=(null===a||void 0===a||null===(e=a.scale)||void 0===e?void 0:e[2])){var v=(0,i.Z)(a.translate,3)[2],m=(0,i.Z)(a.scale,3)[2];y=function(e){return e*m+v}}if(this.hasM&&null!=(null===a||void 0===a||null===(t=a.scale)||void 0===t?void 0:t[3])){var h=(0,i.Z)(a.translate,4)[3],g=(0,i.Z)(a.scale,4)[3];f=function(e){return null==e?e:e*g+h}}var b,_=this._getHydrationFunction(r,(function(e){return e*c+s}),(function(e){return u-e*d}),y,f),w=(0,o.Z)(n);try{for(w.s();!(b=w.n()).done;){var Z=b.value.geometry;null!=Z&&_&&_(Z)}}catch(S){w.e(S)}finally{w.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,o=[],a=0,l=e.length;a<l;a++){var s=e[a];if(a>0){var u=t(s[0]),p=r(s[1]);u===n&&p===i||(o.push([u-n,p-i]),n=u,i=p)}else n=t(s[0]),i=r(s[1]),o.push([n,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,w.oU)(e)?e.rings:e.paths,o=[],a=0,l=i.length;a<l;a++){var s=i[a],u=n._quantizePoints(s,t,r);u&&o.push(u)}return o.length>0?((0,w.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r,n,i){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?function(e){for(var o,a,l=(0,w.oU)(e)?e.rings:e.paths,s=0,u=l.length;s<u;s++)for(var p=l[s],c=0,d=p.length;c<d;c++){var y=p[c];c>0?(o+=y[0],a+=y[1]):(o=y[0],a=y[1]),y[0]=t(o),y[1]=r(a)}if(n&&i)for(var f=0,v=l.length;f<v;f++)for(var m=l[f],h=0,g=m.length;h<g;h++){var b=m[h];b[2]=n(b[2]),b[3]=i(b[3])}else if(n)for(var _=0,Z=l.length;_<Z;_++)for(var S=l[_],C=0,k=S.length;C<k;C++){var T=S[C];T[2]=n(T[2])}else if(i)for(var N=0,B=l.length;N<B;N++)for(var R=l[N],x=0,j=R.length;x<j;x++){var A=R[x];A[2]=i(A[2])}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?function(e){for(var o,a,l=e.points,s=0,u=l.length;s<u;s++){var p=l[s];s>0?(o+=p[0],a+=p[1]):(o=p[0],a=p[1]),p[0]=t(o),p[1]=r(a)}if(n&&i)for(var c=0,d=l.length;c<d;c++){var y=l[c];y[2]=n(y[2]),y[3]=i(y[3])}else if(n)for(var f=0,v=l.length;f<v;f++){var m=l[f];m[2]=n(m[2])}else if(i)for(var h=0,g=l.length;h<g;h++){var b=l[h];b[2]=i(b[2])}}:null}}]),r}(f.wq);(0,p._)([(0,m.Cb)({type:String,json:{write:!0}})],C.prototype,"displayFieldName",void 0),(0,p._)([(0,m.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,m.Cb)({type:[d.Z],json:{write:!0}})],C.prototype,"features",void 0),(0,p._)([(0,h.r)("features")],C.prototype,"readFeatures",null),(0,p._)([(0,m.Cb)({type:[Z.Z],json:{write:!0}})],C.prototype,"fields",void 0),(0,p._)([(0,m.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:S.read}}})],C.prototype,"geometryType",void 0),(0,p._)([(0,b.c)("geometryType")],C.prototype,"writeGeometryType",null),(0,p._)([(0,m.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"hasM",void 0),(0,p._)([(0,m.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],C.prototype,"hasZ",void 0),(0,p._)([(0,m.Cb)({types:c.qM,json:{write:!0}})],C.prototype,"queryGeometry",void 0),(0,p._)([(0,h.r)("queryGeometry")],C.prototype,"readQueryGeometry",null),(0,p._)([(0,m.Cb)({type:_.Z,json:{write:!0}})],C.prototype,"spatialReference",void 0),(0,p._)([(0,b.c)("spatialReference")],C.prototype,"writeSpatialReference",null),(0,p._)([(0,m.Cb)({json:{write:!0}})],C.prototype,"transform",void 0),(C=n=(0,p._)([(0,g.j)("esri.rest.support.FeatureSet")],C)).prototype.toJSON.isDefaultToJSON=!0;var k=C}}]);
//# sourceMappingURL=4807.42e6bc45.chunk.js.map