"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[4326],{64326:function(e,t,r){r.r(t),r.d(t,{default:function(){return We}});var i=r(37762),n=r(74165),a=r(15861),o=r(1413),s=r(15671),u=r(43144),l=r(11752),c=r(61120),p=r(60136),d=r(29388),y=r(27366),f=r(44055),h=(r(94931),r(78451),r(98689),r(57823),r(32066),r(30505),r(34999),r(28189),r(9014)),v=r(40464),b=r(76200),m=r(51508),g=r(11582),w=r(40281),_=r(10064),Z=r(100),k=r(84652),S=r(32718),F=r(92026),C=r(97642),x=r(18202),I=r(66978),T=r(76672),j=r(35995),E=r(49861),R=r(89125),D=r(38511),O=r(69912),M=r(31201),q=r(40743),P=r(78952),G=r(30651),L=(r(59486),r(52639)),N=r(41691),A=r(93169),J=r(54472),B=r(67426),V=r(31009),U=r(25243),Q=(r(63780),r(42017)),W=r(62204),z=r(68620),H=r(49818),Y=r(53866),X=r(80885),K=r(27823),$=0,ee="esri.layers.graphics.sources.MemorySource",te=S.Z.getLogger(ee),re=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(e){var i;return(0,s.Z)(this,r),(i=t.call(this,e))._idToClientGraphic=null,i.type="memory",i}return(0,u.Z)(r,[{key:"load",value:function(e){var t=null!=e?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}},{key:"destroy",value:function(){var e;null!==(e=this._connection)&&void 0!==e&&e.close(),this._connection=null}},{key:"_workerGeometryType",get:function(){var e,t=null===(e=this.layer)||void 0===e?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}},{key:"applyEdits",value:function(e){var t=this;return this.load().then((function(){return t._applyEdits(e)}))}},{key:"openPorts",value:function(){var e=this;return this.load().then((function(){return e._connection.openPorts()}))}},{key:"queryFeatures",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,s,u,l,c,p,d,y=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load(r);case 3:return e.next=5,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 5:if(a=e.sent,(0,z.p)(t,this.layer.spatialReference,a),o=H.Z.fromJSON(a),this._requiresClientGraphicMapping()){e.next=10;break}return e.abrupt("return",o);case 10:s=this.layer.objectIdField,u=(0,i.Z)(o.features);try{for(u.s();!(l=u.n()).done;)c=l.value,p=c.attributes[s],(d=this._idToClientGraphic.get(p))&&(c.geometry=d.geometry)}catch(n){u.e(n)}finally{u.f()}return e.abrupt("return",(o.geometryType=this.layer.geometryType,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeaturesJSON",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,i,a=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>1&&void 0!==a[1]?a[1]:{},!this._requiresClientGraphicMapping()){e.next=3;break}throw new _.Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");case 3:return e.next=5,this.load(r);case 5:return e.next=7,this._connection.invoke("queryFeatures",t?t.toJSON():null,r);case 7:return i=e.sent,e.abrupt("return",((0,z.p)(t,this.layer.spatialReference,i),i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)}))}},{key:"queryObjectIds",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryObjectIds",e?e.toJSON():null,r)}))}},{key:"queryExtent",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("queryExtent",e?e.toJSON():null,r)})).then((function(e){return{count:e.count,extent:Y.Z.fromJSON(e.extent)}}))}},{key:"querySnapping",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.load(r).then((function(){return t._connection.invoke("querySnapping",e,r)}))}},{key:"_applyEdits",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,s,u,l,c,p,d,y,f,h,v,b,m,g,w;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection){e.next=2;break}throw new _.Z("feature-layer-source:edit-failure","Memory source not loaded");case 2:return r=this.layer.objectIdField,a=null,o=[],s=[],e.next=7,Promise.all([this._prepareClientMapping(t.addFeatures,null),this._prepareClientMapping(t.updateFeatures,null)]);case 7:if(u=function(e){return"objectId"in e&&null!=e.objectId?e.objectId:"attributes"in e&&null!=e.attributes[r]?e.attributes[r]:null},t.addFeatures&&(a=this._prepareAddFeatures(t.addFeatures)),t.deleteFeatures){l=(0,i.Z)(t.deleteFeatures);try{for(l.s();!(c=l.n()).done;)p=c.value,null!=(d=u(p))&&o.push(d)}catch(n){l.e(n)}finally{l.f()}}if(y=t.updateFeatures&&this._idToClientGraphic?new Map:null,t.updateFeatures){f=(0,i.Z)(t.updateFeatures);try{for(f.s();!(h=f.n()).done;)v=h.value,s.push(this._serializeFeature(v)),y&&null!=(b=u(v))&&y.set(b,v)}catch(n){f.e(n)}finally{f.f()}}return(0,W.P)(a?a.features:null,s,this.layer.spatialReference),e.next=14,this._connection.invoke("applyEdits",{adds:a?a.features:[],updates:s,deletes:o});case 14:return m=e.sent,g=m.fullExtent,w=m.featureEditResults,e.abrupt("return",(this.fullExtent=g,a&&a.finish(w.uidToObjectId),this._updateClientGraphicIds(y,w),this._createEditsResult(w)));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_prepareClientMapping",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("mesh"===this._layerOrSourceGeometryType&&null!=t){e.next=2;break}return e.abrupt("return");case 2:a=[],o=(0,i.Z)(t);try{for(o.s();!(s=o.n()).done;)null==(u=s.value.geometry)||"mesh"!==u.type||u.hasExtent||u.loaded||a.push(u.load({signal:r}))}catch(n){o.e(n)}finally{o.f()}if(e.t0=a.length,!e.t0){e.next=9;break}return e.next=9,Promise.all(a);case 9:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_updateClientGraphicIds",value:function(e,t){if(this._idToClientGraphic){if(e){var r,n=(0,i.Z)(t.updateResults);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.success){var o=e.get(a.objectId);null!=o&&this._addIdToClientGraphic(o)}}}catch(c){n.e(c)}finally{n.f()}}var s,u=(0,i.Z)(t.deleteResults);try{for(u.s();!(s=u.n()).done;){var l=s.value;l.success&&this._idToClientGraphic.delete(l.objectId)}}catch(c){u.e(c)}finally{u.f()}}}},{key:"_createEditsResult",value:function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}},{key:"_createFeatureEditResult",value:function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new _.Z("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}},{key:"_prepareAddFeatures",value:function(e){for(var t=new Map,r=new Array(e.length),i=null,n=0;n<e.length;n++){var a=e[n],o=this._serializeFeature(a);i||null==a.geometry||(i=a.geometry.type),r[n]=o,t.set("".concat(o.uid),a)}var s=this;return{features:r,inferredGeometryType:i,finish:function(e){var r=s.sourceJSON.objectIdField;for(var i in e){var n=e[i],a=t.get(i);a&&(a.attributes||(a.attributes={}),-1===n?delete a.attributes[r]:a.attributes[r]=n,s._addIdToClientGraphic(a))}}}}},{key:"_addIdToClientGraphic",value:function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];null!=r&&this._idToClientGraphic.set(r,e)}}},{key:"_layerOrSourceGeometryType",get:function(){var e,t,r;return null!==(e=null===(t=this.layer)||void 0===t?void 0:t.geometryType)&&void 0!==e?e:null===(r=this.sourceJSON)||void 0===r?void 0:r.geometryType}},{key:"_requiresClientGraphicMapping",value:function(){return this._geometryTypeRequiresClientGraphicMapping(this._layerOrSourceGeometryType)}},{key:"_geometryRequiresClientGraphicMapping",value:function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}},{key:"_geometryTypeRequiresClientGraphicMapping",value:function(e){return"mesh"===e||"multipatch"===e||"extent"===e}},{key:"_serializeFeature",value:function(e){var t=e.attributes,r=this._geometryForSerialization(e),i=($++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}},{key:"_geometryForSerialization",value:function(e){var t=e.geometry;return null==t?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?X.Z.fromExtent(t.extent):null:t}},{key:"_startWorker",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,s,u,l,c,p,d,y,f,h,v,b,m;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.bA)("MemorySourceWorker",{strategy:(0,A.Z)("feature-layers-workers")?"dedicated":"local",signal:t});case 2:return this._connection=e.sent,r=this.layer,a=r.fields,o=r.spatialReference,s=r.objectIdField,u=r.hasM,l=r.hasZ,c=r.timeInfo,p="defaults"===this.layer.originOf("spatialReference"),e.next=6,this._prepareClientMapping(this.items,t);case 6:return d=this._prepareAddFeatures(this.items),this.handles.add(this.on("before-changes",(function(e){te.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}))),y={features:d.features,fields:a&&a.map((function(e){return e.toJSON()})),geometryType:K.P.toJSON(this._workerGeometryType),hasM:"mesh"!==this._layerOrSourceGeometryType&&u,hasZ:"mesh"===this._layerOrSourceGeometryType||l,objectIdField:s,spatialReference:p?null:o&&o.toJSON(),timeInfo:c?c.toJSON():null},e.next=11,this._connection.invoke("load",y,{signal:t});case 11:f=e.sent,h=(0,i.Z)(f.warnings);try{for(h.s();!(v=h.n()).done;)b=v.value,te.warn(b.message,{layer:this.layer,warning:b})}catch(n){h.e(n)}finally{h.f()}f.featureErrors.length&&te.warn("Encountered ".concat(f.featureErrors.length," validation errors while loading features"),f.featureErrors),m=f.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(d.inferredGeometryType)&&(m.geometryType=K.P.toJSON(d.inferredGeometryType)),this.sourceJSON=m,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),d.finish(f.assignedObjectIds);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(J.Z.LoadableMixin((0,B.v)((0,N.p)(w.Z))));(0,y._)([(0,Q.c)({Type:L.Z,ensureType:(0,U.se)(L.Z)})],re.prototype,"itemType",void 0),(0,y._)([(0,E.Cb)()],re.prototype,"type",void 0),(0,y._)([(0,E.Cb)({constructOnly:!0})],re.prototype,"layer",void 0),(0,y._)([(0,E.Cb)({readOnly:!0})],re.prototype,"_workerGeometryType",null),(0,y._)([(0,E.Cb)()],re.prototype,"sourceJSON",void 0),re=(0,y._)([(0,O.j)(ee)],re);var ie=r(27961),ne=r(11936),ae=r(6693),oe=r(46671),se=r(56601),ue=r(7632),le=r(32526),ce=r(64390),pe=r(6061),de=r(94207),ye=r(29598),fe=function(e){(0,p.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,s.Z)(this,r),(e=t.apply(this,arguments)).updating=!1,e.status="unknown",e}return(0,u.Z)(r)}(r(7138).Z);(0,y._)([(0,E.Cb)()],fe.prototype,"updating",void 0),(0,y._)([(0,E.Cb)()],fe.prototype,"status",void 0);var he=fe=(0,y._)([(0,O.j)("esri.layers.support.PublishingInfo")],fe),ve="esri.layers.mixins.PublishableLayer",be=Symbol(ve);var me=r(71684),ge=r(56811),we=r(99063),_e=r(25899),Ze=r(45948),ke=r(62594),Se=r(12224),Fe=r(87165),Ce=r(25610),xe=r(37270),Ie=r(77748),Te=r(85116),je=r(94582),Ee=r(57370),Re=r(26704),De=r(64020),Oe=r(21371),Me=r(86638),qe=r(54307),Pe=r(81085),Ge=r(81219),Le="FeatureLayer",Ne="esri.layers.FeatureLayer",Ae=S.Z.getLogger(Ne);function Je(e,t){return new _.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}function Be(e){return e&&e instanceof w.Z}var Ve=(0,Ce.v)();function Ue(e,t,r){var i=!(null===r||void 0===r||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}var Qe=function(e){(0,p.Z)(y,e);var t=(0,d.Z)(y);function y(){var e;(0,s.Z)(this,y);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i)))._handles=new Z.Z,e.charts=null,e.copyright=null,e.displayField=null,e.dynamicDataSource=null,e.fields=null,e.fieldsIndex=null,e.formTemplate=null,e.fullExtent=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.infoFor3D=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.legendEnabled=!0,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.screenSizePerspectiveEnabled=!0,e.spatialReference=P.Z.WGS84,e.subtypeCode=null,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.type="feature",e.typeIdField=null,e.types=null,e.visible=!0,e}return(0,u.Z)(y,[{key:"destroy",value:function(){var e;null!==(e=this.source)&&void 0!==e&&e.destroy(),this._handles=(0,F.SC)(this._handles)}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"load",value:function(e){var t,r=this,i=null!=e?e.signal:null;if(null!==(t=this.portalItem)&&void 0!==t&&t.loaded&&this.source)return this.addResolvingPromise(this.createGraphicsSource(i).then((function(e){return r.initLayerProperties(e)}))),Promise.resolve(this);var o=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(I.r9).then((0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.url||null!=r.layerId||!/FeatureServer|MapServer\/*$/i.test(r.url)){e.next=5;break}return e.next=3,r._fetchFirstLayerId(i);case 3:null!=(t=e.sent)&&(r.layerId=t);case 5:if(r.url||r._hasMemorySource()){e.next=7;break}throw new _.Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");case 7:return e.t0=r,e.next=10,r.createGraphicsSource(i);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.initLayerProperties.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e)})))).then((function(){return r._setUserPrivileges(r.serviceItemId,e)})).then((function(){return(0,ke.nU)(r,e)}));return this.addResolvingPromise(o),Promise.resolve(this)}},{key:"readCapabilities",value:function(e,t){return t=t.layerDefinition||t,(0,je.h)(t,this.url)}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){var e;return!(this.loaded&&(null===(e=this.capabilities)||void 0===e||!e.operations.supportsEditing))&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)},set:function(e){this._overrideIfSome("editingEnabled",e)}},{key:"readEditingEnabled",value:function(e,t){return this._readEditingEnabled(t,!1)}},{key:"readEditingEnabledFromWebMap",value:function(e,t,r){return this._readEditingEnabled(t,!0,r)}},{key:"writeEditingEnabled",value:function(e,t){this._writeEditingEnabled(e,t,!1)}},{key:"writeEditingEnabledToWebMap",value:function(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}},{key:"effectiveEditingEnabled",get:function(){return(0,ke.sX)(this)}},{key:"readIsTable",value:function(e,t){var r,i;return"Table"===(t=null!==(r=null===(i=t)||void 0===i?void 0:i.layerDefinition)&&void 0!==r?r:t).type||!t.geometryType}},{key:"writeIsTable",value:function(e,t,r,i){(null===i||void 0===i?void 0:i.writeLayerSchema)&&(0,x.RB)(r,e?"Table":"Feature Layer",t)}},{key:"readGlobalIdField",value:function(e,t){return(0,ke.rk)(t.layerDefinition||t)}},{key:"readObjectIdField",value:function(e,t){return(0,ke.kZ)(t.layerDefinition||t)}},{key:"parsedUrl",get:function(){var e=(0,j.mN)(this.url);return null!=e&&(null!=this.dynamicDataSource?e.path=(0,j.v_)(e.path,"dynamicLayer"):null!=this.layerId&&(e.path=(0,j.v_)(e.path,this.layerId.toString()))),e}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",set:function(e){(0,xe.YN)(e,this.fieldsIndex),this._set("renderer",e)}},{key:"readRenderer",value:function(e,t,r){var i,n=null===(i=(t=t.layerDefinition||t).drawingInfo)||void 0===i?void 0:i.renderer;if(n){var a,o=null!==(a=(0,h.a)(n,t,r))&&void 0!==a?a:void 0;return o||Ae.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),o}return(0,ke.Ob)(t,r)}},{key:"source",set:function(e){var t=this._get("source");t!==e&&(Be(t)&&this._resetMemorySource(t),Be(e)&&this._initMemorySource(e),this._set("source",e))}},{key:"castSource",value:function(e){return e?Array.isArray(e)||e instanceof w.Z?new re({layer:this,items:e}):e:null}},{key:"readSource",value:function(e,t){var r,i=H.Z.fromJSON(t.featureSet);return new re({layer:this,items:null!==(r=null===i||void 0===i?void 0:i.features)&&void 0!==r?r:[]})}},{key:"readTemplates",value:function(e,t){var r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map((function(e){return Se.Z.fromJSON(e)})),this._fixTemplates(e,i),this._fixTemplates(e,n),e}},{key:"readTitle",value:function(e,t){var r,i,n=null!==(r=null===(i=t.layerDefinition)||void 0===i?void 0:i.name)&&void 0!==r?r:t.name,a=t.title||t.layerDefinition&&t.layerDefinition.title;if(n){var o=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?(0,_e.a7)(this.url,n):n;var s=n;if(!s&&this.url){var u=(0,_e.Qc)(this.url);null!=u&&(s=u.title)}if(!s)return;return"item-title-and-service-name"===this.sublayerTitleMode&&o&&o!==s&&(s=o+" - "+s),(0,_e.ld)(s)}if("item-title"===this.sublayerTitleMode&&a)return a}},{key:"readTitleFromWebMap",value:function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var i=t.fields.find((function(e){return e.name.toLowerCase()===r}));i&&(r=i.name)}return r}},{key:"readTypes",value:function(e,t){var r=this;e=(t=t.layerDefinition||t).types;var i=t.editFieldsInfo,n=i&&i.creatorField,a=i&&i.editorField;return e&&e.map((function(e){return e=Fe.Z.fromJSON(e),r._fixTemplates(e.templates,n),r._fixTemplates(e.templates,a),e}))}},{key:"readVisible",value:function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0}},{key:"addAttachment",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.JD)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,i){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.Y5)(this,t,r,i,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.Jj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"uploadAssets",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.uj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,l.Z)((0,c.Z)(y.prototype),"on",this).call(this,e,t)}},{key:"createPopupTemplate",value:function(e){return(0,Pe.eZ)(this,e)}},{key:"createGraphicsSource",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._hasMemorySource()||!this.source){e.next=2;break}return e.abrupt("return",this.source.load({signal:t}));case 2:return e.next=4,(0,I.Hl)(Promise.all([r.e(3406),r.e(1340),r.e(7607),r.e(5226),r.e(9887),r.e(9623),r.e(8734)]).then(r.bind(r,68734)),t);case 4:return i=e.sent,a=i.default,e.abrupt("return",new a({layer:this}).load({signal:t}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=(0,ke.rP)(this);e.dynamicDataSource=this.dynamicDataSource;var t=null!=this.subtypeCode?"".concat(this.subtypeField," = ").concat(this.subtypeCode):null,r=(0,T._)(this.definitionExpression,t);return e.where=r||"1=1",e}},{key:"deleteAttachments",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.FV)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.Ci)(this,t,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var i=e.attributes?e.attributes[t]:void 0;if(null==i)return null;var n=null;return null!==r&&void 0!==r&&r.some((function(e){var t=e.id;return null!=t&&(t.toString()===i.toString()&&(n=e),!!n)})),n}},{key:"getFieldDomain",value:function(e,t){var r=null===t||void 0===t?void 0:t.feature,i=this.getFeatureType(r);if(i){var n=i.domains&&i.domains[e];if(n&&"inherited"!==n.type)return n}return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"queryAttachments",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.SU)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,u,l,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return o=e.sent,e.next=5,o.source.queryFeatures(null!==(a=Me.Z.from(t))&&void 0!==a?a:o.createQuery(),r);case 5:if(null!==(s=e.sent)&&void 0!==s&&s.features){u=(0,i.Z)(s.features);try{for(u.s();!(l=u.n()).done;)(c=l.value).layer=c.sourceLayer=o}catch(n){u.e(n)}finally{u.f()}}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.tD)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.VG)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.KE)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.kp)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.C9)(this,t,r,Le));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatures",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o,s,u,l,c,p,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(o=e.sent,s=o.source,u=o.capabilities,s.queryTopFeatures&&null!==u&&void 0!==u&&null!==(a=u.query)&&void 0!==a&&a.supportsTopFeaturesQuery){e.next=7;break}throw new _.Z(Le,"Layer source does not support queryTopFeatures capability");case 7:return e.next=9,s.queryTopFeatures(qe.Z.from(t),r);case 9:if(null!==(l=e.sent)&&void 0!==l&&l.features){c=(0,i.Z)(l.features);try{for(c.s();!(p=c.n()).done;)(d=p.value).layer=d.sourceLayer=this}catch(n){c.e(n)}finally{c.f()}}return e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopObjectIds",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i,a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(i=e.sent,a=i.source,o=i.capabilities,a.queryTopObjectIds&&null!==o&&void 0!==o&&o.query.supportsTopFeaturesQuery){e.next=7;break}throw new _.Z(Le,"Layer source does not support queryTopObjectIds capability");case 7:return e.abrupt("return",a.queryTopObjectIds(qe.Z.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeaturesExtent",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i,a,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(a=e.sent,o=a.source,s=a.capabilities,o.queryTopExtents&&null!==s&&void 0!==s&&null!==(i=s.query)&&void 0!==i&&i.supportsTopFeaturesQuery){e.next=7;break}throw new _.Z(Le,"Layer source does not support queryTopExtents capability");case 7:return e.abrupt("return",o.queryTopExtents(qe.Z.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryTopFeatureCount",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r){var i,a,o,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(a=e.sent,o=a.source,s=a.capabilities,o.queryTopCount&&null!==s&&void 0!==s&&null!==(i=s.query)&&void 0!==i&&i.supportsTopFeaturesQuery){e.next=7;break}throw new _.Z(Le,"Layer source does not support queryFeatureCount capability");case 7:return e.abrupt("return",o.queryTopCount(qe.Z.from(t),r));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"read",value:function(e,t){var r=e.featureCollection;if(r){var i=r.layers;i&&1===i.length&&((0,l.Z)((0,c.Z)(y.prototype),"read",this).call(this,i[0],t),null!=r.showLegend&&(0,l.Z)((0,c.Z)(y.prototype),"read",this).call(this,{showLegend:r.showLegend},t))}(0,l.Z)((0,c.Z)(y.prototype),"read",this).call(this,e,t),t&&"service"===t.origin&&(this.revert(["objectIdField","fields","timeInfo"],"service"),this.spatialReference||this.revert(["spatialReference"],"service"))}},{key:"write",value:function(e,t){var r,i,n,a,s=t=(0,o.Z)((0,o.Z)({},t),{},{origin:null!==(r=null===(i=t)||void 0===i?void 0:i.origin)&&void 0!==r?r:void 0,writeLayerSchema:null!==(n=null===(a=t)||void 0===a?void 0:a.writeLayerSchema)&&void 0!==n?n:this._hasMemorySource()}),u=s.origin,p=s.layerContainerType,d=s.messages;if(this.dynamicDataSource)return null!==d&&void 0!==d&&d.push(Je(this,"using a dynamic data source cannot be written to web scenes, web maps and feature service items")),null;if(this.isTable){if("web-scene"===u||"web-map"===u&&"tables"!==p)return null!==d&&void 0!==d&&d.push(Je(this,"using a table source cannot be written to web scenes and web maps")),null;if(this._hasMemorySource())return null!==d&&void 0!==d&&d.push(Je(this,"using an in-memory table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===u&&"tables"===p)return null!==d&&void 0!==d&&d.push(Je(this,"using a non-table source cannot be written to tables in web maps")),null;return(0,l.Z)((0,c.Z)(y.prototype),"write",this).call(this,e,t)}},{key:"clone",value:function(){if(this._hasMemorySource())throw new _.Z(Le,"FeatureLayer (title: ".concat(this.title,", id: ").concat(this.id,") created using in-memory source cannot be cloned"));return(0,l.Z)((0,c.Z)(y.prototype),"clone",this).call(this)}},{key:"serviceSupportsSpatialReference",value:function(e){var t;return!!this.loaded&&("memory"===(null===(t=this.source)||void 0===t?void 0:t.type)||(0,Re.D)(this,e))}},{key:"save",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2224).then(r.bind(r,2224));case 2:return i=e.sent,a=i.save,e.abrupt("return",a(this,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,i){var a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(2224).then(r.bind(r,2224));case 2:return a=e.sent,o=a.saveAs,e.abrupt("return",o(this,t,i));case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_readEditingEnabled",value:function(e,t,r){var i,n=null===(i=e.layerDefinition)||void 0===i?void 0:i.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,t&&"web-map"===(null===r||void 0===r?void 0:r.origin)&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}},{key:"_hasEditingCapability",value:function(e){return e.toLowerCase().split(",").map((function(e){return e.trim()})).includes("editing")}},{key:"_writeEditingEnabled",value:function(e,t,r,i){if(!e){var n,a=null!==(n=this.capabilities)&&void 0!==n&&null!==(n=n.operations)&&void 0!==n&&n.supportsSync?"Query,Sync":"Query";(0,x.RB)("layerDefinition.capabilities",a,t),r&&(null===i||void 0===i||!i.writeLayerSchema)&&(t.capabilities=a)}}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_fetchFirstLayerId",value:function(e){return(0,b.default)(this.url,{query:(0,o.Z)((0,o.Z)({f:"json"},this.customParameters),{},{token:this.apiKey}),responseType:"json",signal:e}).then((function(e){var t=e.data;if(t)return Array.isArray(t.layers)&&t.layers.length>0?t.layers[0].id:Array.isArray(t.tables)&&t.tables.length>0?t.tables[0].id:void 0}))}},{key:"initLayerProperties",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._set("source",t),t.sourceJSON&&(this.sourceJSON=t.sourceJSON,this.read(t.sourceJSON,{origin:"service",portalItem:this.portalItem,portal:null===(r=this.portalItem)||void 0===r?void 0:r.portal,url:this.parsedUrl})),this._verifySource(),this._verifyFields(),(0,xe.YN)(this.renderer,this.fieldsIndex),(0,xe.UF)(this.timeInfo,this.fieldsIndex),(0,Oe.y)(this,{origin:"service"})));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,ke.gG)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPublishingStatus",value:function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.source,e.abrupt("return",null!==t&&void 0!==t&&t.fetchPublishingStatus?t.fetchPublishingStatus():"unavailable");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e,t,r,i=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+i+")"),this.isTable||this._hasMemorySource()||-1!==i.search(/\/FeatureServer\//i)||(null===(r=this.fields)||void 0===r?void 0:r.some((function(e){return"geometry"===e.type})))||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+i+")")}},{key:"_fixTemplates",value:function(e,t){e&&e.forEach((function(e){var r=e.prototype&&e.prototype.attributes;r&&t&&delete r[t]}))}},{key:"_verifySource",value:function(){if(this._hasMemorySource()){if(this.url)throw new _.Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new _.Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}},{key:"_initMemorySource",value:function(e){var t=this;e.forEach((function(e){e.layer=t,e.sourceLayer=t})),this._handles.add([e.on("after-add",(function(e){e.item.layer=t,e.item.sourceLayer=t})),e.on("after-remove",(function(e){e.item.layer=null,e.item.sourceLayer=null}))],"fl-source")}},{key:"_resetMemorySource",value:function(e){e.forEach((function(e){e.layer=null,e.sourceLayer=null})),this._handles.remove("fl-source")}},{key:"_hasMemorySource",value:function(){return!(this.url||!this.source)}}]),y}((0,le.B)((0,ce.M)((0,ue.b)(function(e){var t,r=function(e){(0,p.Z)(i,e);var r=(0,d.Z)(i);function i(){var e;return(0,s.Z)(this,i),(e=r.apply(this,arguments))[t]=!0,e}return(0,u.Z)(i,[{key:"publishingInfo",get:function(){if(this.destroyed)return null;var e=this._get("publishingInfo");if(e)return e;var t=new he;return this._checkPublishingStatus(t),t}},{key:"_checkPublishingStatus",value:function(e){var t=this,r=0,i=function(){var s=(0,a.Z)((0,n.Z)().mark((function a(s){var u;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.updating=!0,n.prev=1,n.next=4,t.fetchPublishingStatus();case 4:u=n.sent,n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),u="unavailable";case 10:"published"!==u&&"unavailable"!==u||("publishing"===e.status&&t.refresh(),o.remove()),e.status=u,e.updating=!1,o.removed||(r=setTimeout(i,s,s+125));case 11:case"end":return n.stop()}}),a,null,[[1,7]])})));return function(e){return s.apply(this,arguments)}}(),o={removed:!1,remove:function(){this.removed=!0,clearTimeout(r)}};this.when().catch((function(){return o.remove()})),i(250),this.own(o)}}]),i}(e);return t=be,(0,y._)([(0,E.Cb)({readOnly:!0,clonable:!1})],r.prototype,"publishingInfo",null),r=(0,y._)([(0,O.j)(ve)],r)}((0,se.o1)((0,ae.h)((0,de.c)((0,we.n)((0,ge.M)((0,me.Q)((0,ne.Y)((0,pe.q)((0,ye.I)((0,C.R)((0,oe.N)((0,ie.V)((0,g.J)(G.Z))))))))))))))))));(0,y._)([(0,D.r)("service","capabilities")],Qe.prototype,"readCapabilities",null),(0,y._)([(0,E.Cb)({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Qe.prototype,"charts",void 0),(0,y._)([(0,E.Cb)({readOnly:!0})],Qe.prototype,"createQueryVersion",null),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.copyrightText"}}})],Qe.prototype,"copyright",void 0),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.displayField"}}})],Qe.prototype,"displayField",void 0),(0,y._)([(0,E.Cb)({types:m.LB,readOnly:!0})],Qe.prototype,"defaultSymbol",void 0),(0,y._)([(0,E.Cb)({type:De.n})],Qe.prototype,"dynamicDataSource",void 0),(0,y._)([(0,E.Cb)({type:Boolean})],Qe.prototype,"editingEnabled",null),(0,y._)([(0,D.r)(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabled",null),(0,y._)([(0,D.r)("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Qe.prototype,"readEditingEnabledFromWebMap",null),(0,y._)([(0,M.c)(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabled",null),(0,y._)([(0,M.c)("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Qe.prototype,"writeEditingEnabledToWebMap",null),(0,y._)([(0,E.Cb)({readOnly:!0})],Qe.prototype,"effectiveEditingEnabled",null),(0,y._)([(0,E.Cb)((0,o.Z)((0,o.Z)({},Ve.fields),{},{json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:Ue}}}}}))],Qe.prototype,"fields",void 0),(0,y._)([(0,E.Cb)(Ve.fieldsIndex)],Qe.prototype,"fieldsIndex",void 0),(0,y._)([(0,E.Cb)({type:q.Z,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Qe.prototype,"formTemplate",void 0),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.extent"}}})],Qe.prototype,"fullExtent",void 0),(0,y._)([(0,E.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:Ue,writer:function(e,t,r){var i=e?ke.Fr.toJSON(e):null;i&&(0,x.RB)(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:ke.Fr.read}}})],Qe.prototype,"geometryType",void 0),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.hasM"}}})],Qe.prototype,"hasM",void 0),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.hasZ"}}})],Qe.prototype,"hasZ",void 0),(0,y._)([(0,E.Cb)(Ze.id)],Qe.prototype,"id",void 0),(0,y._)([(0,E.Cb)({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Qe.prototype,"infoFor3D",void 0),(0,y._)([(0,E.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Qe.prototype,"isTable",void 0),(0,y._)([(0,D.r)("service","isTable",["type","geometryType"]),(0,D.r)("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Qe.prototype,"readIsTable",null),(0,y._)([(0,M.c)("web-map","isTable")],Qe.prototype,"writeIsTable",null),(0,y._)([(0,E.Cb)(Ze.iR)],Qe.prototype,"labelsVisible",void 0),(0,y._)([(0,E.Cb)({type:[Ie.Z],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Te.r},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Te.r},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Qe.prototype,"labelingInfo",void 0),(0,y._)([(0,E.Cb)(function(){var e=(0,k.d9)(Ze.bT);return e.json.origins["portal-item"]={write:{target:"layerDefinition.drawingInfo.transparency",writer:function(e,t,r){(0,x.RB)(r,(0,Ge.a)(e),t)}}},e}())],Qe.prototype,"opacity",void 0),(0,y._)([(0,E.Cb)(Ze.rn)],Qe.prototype,"legendEnabled",void 0),(0,y._)([(0,E.Cb)({type:["show","hide"],json:function(){var e=(0,k.d9)(Ze.rT.json);return e.origins["portal-item"]={read:!1,write:!1},e}()})],Qe.prototype,"listMode",void 0),(0,y._)([(0,D.r)("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],Qe.prototype,"readGlobalIdField",null),(0,y._)([(0,E.Cb)({json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:Ue}}}}})],Qe.prototype,"objectIdField",void 0),(0,y._)([(0,D.r)("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],Qe.prototype,"readObjectIdField",null),(0,y._)([(0,E.Cb)({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Qe.prototype,"operationalLayerType",void 0),(0,y._)([(0,E.Cb)(Ve.outFields)],Qe.prototype,"outFields",void 0),(0,y._)([(0,E.Cb)({readOnly:!0})],Qe.prototype,"parsedUrl",null),(0,y._)([(0,E.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Qe.prototype,"path",void 0),(0,y._)([(0,E.Cb)(Ze.C_)],Qe.prototype,"popupEnabled",void 0),(0,y._)([(0,E.Cb)({type:f.Z,json:{name:"popupInfo",write:!0}})],Qe.prototype,"popupTemplate",void 0),(0,y._)([(0,E.Cb)({readOnly:!0})],Qe.prototype,"defaultPopupTemplate",null),(0,y._)([(0,E.Cb)({types:v.A,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:v.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:function(e,t,r){return{ignoreOrigin:null===r||void 0===r?void 0:r.writeLayerSchema}}}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:function(e,t,r){return{ignoreOrigin:null===r||void 0===r?void 0:r.writeLayerSchema}}}}})],Qe.prototype,"renderer",null),(0,y._)([(0,D.r)("service","renderer",["drawingInfo.renderer","defaultSymbol"]),(0,D.r)("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Qe.prototype,"readRenderer",null),(0,y._)([(0,E.Cb)(function(){var e=(0,k.d9)(Ze.YI);return e.json.origins["portal-item"]={read:!1,write:!1},e}())],Qe.prototype,"screenSizePerspectiveEnabled",void 0),(0,y._)([(0,E.Cb)({clonable:!1})],Qe.prototype,"source",null),(0,y._)([(0,R.p)("source")],Qe.prototype,"castSource",null),(0,y._)([(0,D.r)("portal-item","source",["featureSet"]),(0,D.r)("web-map","source",["featureSet"])],Qe.prototype,"readSource",null),(0,y._)([(0,E.Cb)({json:{read:{source:"layerDefinition.extent.spatialReference"}}})],Qe.prototype,"spatialReference",void 0),(0,y._)([(0,E.Cb)({type:Number})],Qe.prototype,"subtypeCode",void 0),(0,y._)([(0,E.Cb)({type:[Se.Z]})],Qe.prototype,"templates",void 0),(0,y._)([(0,D.r)("templates",["editFieldsInfo","creatorField","editorField","templates"])],Qe.prototype,"readTemplates",null),(0,y._)([(0,E.Cb)({type:Ee.Z})],Qe.prototype,"timeInfo",void 0),(0,y._)([(0,E.Cb)()],Qe.prototype,"title",void 0),(0,y._)([(0,D.r)("service","title",["name"]),(0,D.r)("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Qe.prototype,"readTitle",null),(0,y._)([(0,D.r)("web-map","title",["layerDefinition.name","title"])],Qe.prototype,"readTitleFromWebMap",null),(0,y._)([(0,E.Cb)({type:String})],Qe.prototype,"sublayerTitleMode",void 0),(0,y._)([(0,E.Cb)({json:{read:!1}})],Qe.prototype,"type",void 0),(0,y._)([(0,E.Cb)({type:String})],Qe.prototype,"typeIdField",void 0),(0,y._)([(0,D.r)("service","typeIdField"),(0,D.r)("typeIdField",["layerDefinition.typeIdField"])],Qe.prototype,"readTypeIdField",null),(0,y._)([(0,E.Cb)({type:[Fe.Z]})],Qe.prototype,"types",void 0),(0,y._)([(0,D.r)("service","types",["types"]),(0,D.r)("types",["layerDefinition.types"])],Qe.prototype,"readTypes",null),(0,y._)([(0,E.Cb)({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Qe.prototype,"visible",void 0),(0,y._)([(0,D.r)("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Qe.prototype,"readVisible",null);var We=Qe=(0,y._)([(0,O.j)(Ne)],Qe)},94207:function(e,t,r){r.d(t,{c:function(){return g}});var i,n=r(43144),a=r(15671),o=r(60136),s=r(29388),u=r(27366),l=r(18202),c=r(49861),p=(r(25243),r(63780),r(93169),r(69912)),d=r(43404),y=r(46784),f=new d.X({asc:"ascending",desc:"descending"}),h=i=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var i;return(0,a.Z)(this,r),(i=t.call(this,e)).field=null,i.valueExpression=null,i.order="ascending",i}return(0,n.Z)(r,[{key:"clone",value:function(){return new i({field:this.field,valueExpression:this.valueExpression,order:this.order})}}]),r}(y.wq);(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],h.prototype,"field",void 0),(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],h.prototype,"valueExpression",void 0),(0,u._)([(0,c.Cb)({type:f.apiValues,json:{read:f.read,write:f.write}})],h.prototype,"order",void 0);var v=h=i=(0,u._)([(0,p.j)("esri.layers.support.OrderByInfo")],h);function b(e,t,r){if(!e)return null;var i=e.find((function(e){return!!e.field}));if(!i)return null;var n=new v;return n.read(i,r),[n]}function m(e,t,r,i){var n=e.find((function(e){return!!e.field}));n&&(0,l.RB)(r,[n.toJSON()],t)}var g=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,a.Z)(this,r),(e=t.apply(this,arguments)).orderBy=null,e}return(0,n.Z)(r)}(e);return(0,u._)([(0,c.Cb)({type:[v],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:b},write:{target:"layerDefinition.orderBy",writer:m}}})],t.prototype,"orderBy",void 0),t=(0,u._)([(0,p.j)("esri.layers.mixins.OrderedLayer")],t),t}},21371:function(e,t,r){r.d(t,{y:function(){return u}});var i=r(74165),n=r(15861),a=r(14921),o=r(66978),s=r(51370);function u(e,t,r){return l.apply(this,arguments)}function l(){return l=(0,n.Z)((0,i.Z)().mark((function e(t,r,n){var u,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u=t&&t.getAtOrigin&&t.getAtOrigin("renderer",r.origin))||"unique-value"!==u.type||!u.styleOrigin){e.next=6;break}return e.next=4,(0,a.q6)(u.populateFromStyle());case 4:l=e.sent,(0,o.k_)(n),!1===l.ok&&(c=l.error,r&&r.messages&&r.messages.push(new s.Z("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(c.message),{error:c,context:r})),t.clear("renderer",null===r||void 0===r?void 0:r.origin));case 6:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}},62204:function(e,t,r){r.d(t,{P:function(){return s}});var i=r(37762),n=r(68860),a=r(92975);function o(e,t,r){if(null==e.hasM||e.hasZ){var n,a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){var o,s=n.value,u=(0,i.Z)(s);try{for(u.s();!(o=u.n()).done;){var l=o.value;l.length>2&&(l[2]*=r)}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}}}function s(e,t,r){if((e||t)&&r){var i=(0,n._R)(r);u(e,r,i),u(t,r,i)}}function u(e,t,r){if(e){var n,a=(0,i.Z)(e);try{for(a.s();!(n=a.n()).done;){l(n.value.geometry,t,r)}}catch(o){a.e(o)}finally{a.f()}}}function l(e,t,r){if(null!=e&&e.spatialReference&&!(0,a.fS)(e.spatialReference,t)){var s=(0,n._R)(e.spatialReference)/r;if(1!==s)if("x"in e)null!=e.z&&(e.z*=s);else if("rings"in e)o(e,e.rings,s);else if("paths"in e)o(e,e.paths,s);else if("points"in e&&(null==e.hasM||e.hasZ)){var u,l=(0,i.Z)(e.points);try{for(l.s();!(u=l.n()).done;){var c=u.value;c.length>2&&(c[2]*=s)}}catch(p){l.e(p)}finally{l.f()}}}}},54307:function(e,t,r){r.d(t,{Z:function(){return C}});var i,n=r(15671),a=r(43144),o=r(60136),s=r(29388),u=r(27366),l=r(59486),c=r(62044),p=r(43404),d=r(46784),y=r(84652),f=r(49861),h=r(25243),v=r(69912),b=r(31201),m=r(77981),g=(r(63780),r(93169),i=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).groupByFields=void 0,i.topCount=void 0,i.orderByFields=void 0,i}return(0,a.Z)(r,[{key:"clone",value:function(){return new i({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}}]),r}(d.wq));(0,u._)([(0,f.Cb)({type:[String],json:{write:!0}})],g.prototype,"groupByFields",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{write:!0}})],g.prototype,"topCount",void 0),(0,u._)([(0,f.Cb)({type:[String],json:{write:!0}})],g.prototype,"orderByFields",void 0);var w,_=g=i=(0,u._)([(0,v.j)("esri.rest.support.TopFilter")],g),Z=r(78952),k=new p.X({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),S=new p.X({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),F=w=function(e){(0,o.Z)(r,e);var t=(0,s.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).cacheHint=void 0,i.distance=void 0,i.geometry=null,i.geometryPrecision=void 0,i.maxAllowableOffset=void 0,i.num=void 0,i.objectIds=null,i.orderByFields=null,i.outFields=null,i.outSpatialReference=null,i.resultType=null,i.returnGeometry=!1,i.returnM=void 0,i.returnZ=void 0,i.start=void 0,i.spatialRelationship="intersects",i.timeExtent=null,i.topFilter=void 0,i.units=null,i.where="1=1",i}return(0,a.Z)(r,[{key:"writeStart",value:function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}},{key:"clone",value:function(){return new w((0,y.d9)({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}}]),r}(d.wq);(0,u._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],F.prototype,"cacheHint",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{write:{overridePolicy:function(e){return{enabled:e>0}}}}})],F.prototype,"distance",void 0),(0,u._)([(0,f.Cb)({types:l.qM,json:{read:m.im,write:!0}})],F.prototype,"geometry",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{write:!0}})],F.prototype,"geometryPrecision",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{write:!0}})],F.prototype,"maxAllowableOffset",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{read:{source:"resultRecordCount"}}})],F.prototype,"num",void 0),(0,u._)([(0,f.Cb)({json:{write:!0}})],F.prototype,"objectIds",void 0),(0,u._)([(0,f.Cb)({type:[String],json:{write:!0}})],F.prototype,"orderByFields",void 0),(0,u._)([(0,f.Cb)({type:[String],json:{write:!0}})],F.prototype,"outFields",void 0),(0,u._)([(0,f.Cb)({type:Z.Z,json:{read:{source:"outSR"},write:{target:"outSR"}}})],F.prototype,"outSpatialReference",void 0),(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],F.prototype,"resultType",void 0),(0,u._)([(0,f.Cb)({json:{write:!0}})],F.prototype,"returnGeometry",void 0),(0,u._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],F.prototype,"returnM",void 0),(0,u._)([(0,f.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],F.prototype,"returnZ",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{read:{source:"resultOffset"}}})],F.prototype,"start",void 0),(0,u._)([(0,b.c)("start"),(0,b.c)("num")],F.prototype,"writeStart",null),(0,u._)([(0,f.Cb)({type:String,json:{read:{source:"spatialRel",reader:k.read},write:{target:"spatialRel",writer:k.write}}})],F.prototype,"spatialRelationship",void 0),(0,u._)([(0,f.Cb)({type:c.Z,json:{write:!0}})],F.prototype,"timeExtent",void 0),(0,u._)([(0,f.Cb)({type:_,json:{write:!0}})],F.prototype,"topFilter",void 0),(0,u._)([(0,f.Cb)({type:String,json:{read:S.read,write:{writer:S.write,overridePolicy:function(e){return{enabled:null!=e&&null!=this.distance&&this.distance>0}}}}})],F.prototype,"units",void 0),(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],F.prototype,"where",void 0),(F=w=(0,u._)([(0,v.j)("esri.rest.support.TopFeaturesQuery")],F)).from=(0,h.se)(F);var C=F}}]);
//# sourceMappingURL=4326.fa4d37b4.chunk.js.map