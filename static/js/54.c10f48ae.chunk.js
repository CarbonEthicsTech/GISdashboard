"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[54],{70054:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(74165),o=r(15861),i=r(1413),a=r(15671),s=r(43144),l=r(60136),u=r(29388),c=r(27366),f=r(42265),y=r(76200),p=(r(51508),r(97642)),h=r(66978),v=r(35995),d=r(49861),m=(r(25243),r(63780),r(93169),r(38511)),g=r(69912),b=r(53866),C=r(92975),S=r(30651),_=r(6693),Z=r(6061),k=r(29598),w=r(71684),x=r(56811),R=r(45948),D=r(22061),G=r(16851),I=r(91946),P=r(16072),j=r(61459),F=["atom","xml"],M={base:D.Z,key:"type",typeMap:{"simple-line":G.Z},errorContext:"symbol"},T={base:D.Z,key:"type",typeMap:{"picture-marker":I.Z,"simple-marker":P.Z},errorContext:"symbol"},E={base:D.Z,key:"type",typeMap:{"simple-fill":j.Z},errorContext:"symbol"},L=function(e){(0,l.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;(0,a.Z)(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).description=null,e.fullExtent=null,e.legendEnabled=!0,e.lineSymbol=null,e.pointSymbol=null,e.polygonSymbol=null,e.operationalLayerType="GeoRSS",e.url=null,e.type="geo-rss",e}return(0,s.Z)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,i.Z)({url:e},t):e}},{key:"readFeatureCollections",value:function(e,t){return t.featureCollection.layers.forEach((function(e){var t,r=e.layerDefinition.drawingInfo.renderer.symbol;r&&"esriSFS"===r.type&&(null===(t=r.outline)||void 0===t?void 0:t.style.includes("esriSFS"))&&(r.outline.style="esriSLSSolid")})),t.featureCollection.layers}},{key:"hasPoints",get:function(){return this._hasGeometry("esriGeometryPoint")}},{key:"hasPolylines",get:function(){return this._hasGeometry("esriGeometryPolyline")}},{key:"hasPolygons",get:function(){return this._hasGeometry("esriGeometryPolygon")}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,v.vt)(this.url,F)||"GeoRSS":e||""},set:function(e){this._set("title",e)}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service","Feature Service","Feature Collection","Scene Service"]},e).catch(h.r9).then((function(){return t._fetchService(r)})).then((function(e){t.read(e,{origin:"service"})}))),Promise.resolve(this)}},{key:"hasDataChanged",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchService();case 2:return t=e.sent,e.abrupt("return",(this.read(t,{origin:"service",ignoreDefaults:!0}),!0));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_fetchService",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(t){var r,o,i,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this.spatialReference,e.next=3,(0,y.default)(f.Z.geoRSSServiceUrl,{query:{url:this.url,refresh:!!this.loaded||void 0,outSR:(0,C.oR)(o)?void 0:null!==(r=o.wkid)&&void 0!==r?r:JSON.stringify(o)},signal:t});case 3:return i=e.sent,a=i.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_hasGeometry",value:function(e){var t,r;return null!==(t=null===(r=this.featureCollections)||void 0===r?void 0:r.some((function(t){var r,n;return(null===(r=t.featureSet)||void 0===r?void 0:r.geometryType)===e&&(null===(n=t.featureSet.features)||void 0===n?void 0:n.length)>0})))&&void 0!==t&&t}}]),r}((0,_.h)((0,w.Q)((0,Z.q)((0,k.I)((0,x.M)((0,p.R)(S.Z)))))));(0,c._)([(0,d.Cb)()],L.prototype,"description",void 0),(0,c._)([(0,d.Cb)()],L.prototype,"featureCollections",void 0),(0,c._)([(0,m.r)("service","featureCollections",["featureCollection.layers"])],L.prototype,"readFeatureCollections",null),(0,c._)([(0,d.Cb)({type:b.Z,json:{name:"lookAtExtent"}})],L.prototype,"fullExtent",void 0),(0,c._)([(0,d.Cb)(R.id)],L.prototype,"id",void 0),(0,c._)([(0,d.Cb)(R.rn)],L.prototype,"legendEnabled",void 0),(0,c._)([(0,d.Cb)({types:M,json:{write:!0}})],L.prototype,"lineSymbol",void 0),(0,c._)([(0,d.Cb)({type:["show","hide"]})],L.prototype,"listMode",void 0),(0,c._)([(0,d.Cb)({types:T,json:{write:!0}})],L.prototype,"pointSymbol",void 0),(0,c._)([(0,d.Cb)({types:E,json:{write:!0}})],L.prototype,"polygonSymbol",void 0),(0,c._)([(0,d.Cb)({type:["GeoRSS"]})],L.prototype,"operationalLayerType",void 0),(0,c._)([(0,d.Cb)(R.HQ)],L.prototype,"url",void 0),(0,c._)([(0,d.Cb)({json:{origins:{service:{read:{source:"name",reader:function(e){return e||void 0}}}}}})],L.prototype,"title",null),(0,c._)([(0,d.Cb)({readOnly:!0,json:{read:!1},value:"geo-rss"})],L.prototype,"type",void 0);var A=L=(0,c._)([(0,g.j)("esri.layers.GeoRSSLayer")],L)},71684:function(e,t,r){r.d(t,{Q:function(){return w}});var n=r(74165),o=r(15861),i=r(15671),a=r(43144),s=r(97326),l=r(60136),u=r(29388),c=r(27366),f=r(32718),y=r(66978),p=r(49861),h=(r(25243),r(63780),r(93169),r(69912)),v=r(37762),d=r(40281),m=(r(10064),r(2173),r(27088)),g=new d.Z,b=new WeakMap;function C(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function S(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:S(t,e%t):0}var _=0,Z=0;function k(){var e,t=Date.now(),r=(0,v.Z)(g);try{for(r.s();!(e=r.n()).done;){var n,o=e.value;if(o.refreshInterval)t-(null!==(n=b.get(o))&&void 0!==n?n:0)+5>=6e4*o.refreshInterval&&(b.set(o,t),o.refresh(t))}}catch(i){r.e(i)}finally{r.f()}}(0,m.EH)((function(){var e,t=Date.now(),r=0,n=(0,v.Z)(g);try{for(n.s();!(e=n.n()).done;){var o=e.value;r=S(Math.round(6e4*o.refreshInterval),r),o.refreshInterval?b.get(o)||b.set(o,t):b.delete(o)}}catch(i){n.e(i)}finally{n.f()}if(r!==Z){if(Z=r,clearInterval(_),0===Z)return void(_=0);_=setInterval(k,Z)}}));var w=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,u.Z)(r);function r(){var e;(0,i.Z)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=(0,y.Ds)((function(){return e.hasDataChanged()})),e.when().then((function(){e.destroyed||function(e){C(e)&&g.push(e)}((0,s.Z)(e))}),(function(){})),e}return(0,a.Z)(r,[{key:"destroy",value:function(){var e;C(e=this)&&g.includes(e)&&g.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,y.R8)(this._debounceHasDataChanged()).then((function(r){r&&e._set("refreshTimestamp",t),e.emit("refresh",{dataChanged:r})}),(function(t){f.Z.getLogger(e).error(t),e.emit("refresh",{dataChanged:!1,error:t})}))}},{key:"hasDataChanged",value:function(){var e=(0,o.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return(0,c._)([(0,p.Cb)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0}})],t.prototype,"refreshInterval",void 0),(0,c._)([(0,p.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,c._)([(0,p.Cb)()],t.prototype,"refreshParameters",null),t=(0,c._)([(0,h.j)("esri.layers.mixins.RefreshableLayer")],t),t}}}]);
//# sourceMappingURL=54.c10f48ae.chunk.js.map