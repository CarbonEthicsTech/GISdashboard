"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[6553],{16553:function(e,r,n){n.r(r),n.d(r,{createLabelFunction:function(){return b},formatField:function(){return w}});var t=n(74165),a=n(37762),u=n(15861),i=n(10064),s=n(32718),l=n(76969),o=n(6291),c=n(37270),p=n(93253),f=n(819),x=s.Z.getLogger("esri.layers.support.labelFormatUtils"),v={type:"simple",evaluate:function(){return null}},d={getAttribute:function(e,r){return e.field(r)}};function b(e,r,n){return g.apply(this,arguments)}function g(){return g=(0,u.Z)((0,t.Z)().mark((function e(r,a,u){var s,l,o,c,b,g,h;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&r.symbol&&a){e.next=2;break}return e.abrupt("return",v);case 2:if(s=r.where,l=(0,p.hV)(r),!s){e.next=10;break}return e.next=7,n.e(8562).then(n.bind(n,48562));case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=null;case 11:if(o=e.t0,"arcade"!==l.type){e.next=21;break}return e.next=15,(0,f.WW)(l.expression,u,a);case 15:if(null!=(b=e.sent)){e.next=18;break}return e.abrupt("return",v);case 18:c={type:"arcade",evaluate:function(e){try{var r=b.evaluate({$feature:"attributes"in e?b.repurposeFeature(e):e},b.services);if(null!=r)return r.toString()}catch(u){x.error(new i.Z("arcade-expression-error","Encountered an error when evaluating label expression for feature",{error:u,feature:e,expression:l}))}return null},needsHydrationToEvaluate:function(){return null==(0,p.el)(l.expression)}},e.next=22;break;case 21:c={type:"simple",evaluate:function(e){return l.expression.replaceAll(/{[^}]*}/g,(function(r){var n=r.slice(1,-1),t=a.get(n);if(!t)return r;var u=null;return"attributes"in e?e&&e.attributes&&(u=e.attributes[t.name]):u=e.field(t.name),null==u?"":w(u,t)}))}};case 22:if(!s){e.next=32;break}e.prev=23,g=o.WhereClause.create(s,a),e.next=30;break;case 27:return e.prev=27,e.t1=e.catch(23),e.abrupt("return",(x.error(new i.Z("bad-where-clause","Encountered an error when evaluating where clause, ignoring",{where:s,error:e.t1})),v));case 30:h=c.evaluate,c.evaluate=function(e){var r="attributes"in e?void 0:d;try{if(g.testFeature(e,r))return h(e)}catch(n){x.error(new i.Z("bad-where-clause","Encountered an error when evaluating where clause for feature",{where:s,feature:e,error:n}))}return null};case 32:return e.abrupt("return",c);case 33:case"end":return e.stop()}}),e,null,[[23,27]])}))),g.apply(this,arguments)}function w(e,r){if(null==e)return"";var n=r.domain;if(n)if("codedValue"===n.type||"coded-value"===n.type){var t,u=e,i=(0,a.Z)(n.codedValues);try{for(i.s();!(t=i.n()).done;){var s=t.value;if(s.code===u)return s.name}}catch(d){i.e(d)}finally{i.f()}}else if("range"===n.type){var p=+e,f="range"in n?n.range[0]:n.minValue,x="range"in n?n.range[1]:n.maxValue;if(f<=p&&p<=x)return n.name}var v=e;return"date"===r.type||"esriFieldTypeDate"===r.type?v=(0,l.p6)(v,(0,l.Ze)("short-date")):(0,c.H7)(r)&&(v=(0,o.uf)(+v)),v||""}},93253:function(e,r,n){n.d(r,{UO:function(){return b},YI:function(){return d},dI:function(){return g},el:function(){return E},hV:function(){return v},z7:function(){return x}});var t=n(643),a="__begin__",u="__end__",i=new RegExp(a,"ig"),s=new RegExp(u,"ig"),l=new RegExp("^"+a,"i"),o=new RegExp(u+"$","i"),c='"',p=c+" + ",f=" + "+c;function x(e){return e.replaceAll(new RegExp("\\{","g"),"[").replaceAll(new RegExp("\\}","g"),"]")}function v(e){var r={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(r.expression=e.labelExpressionInfo.value,r.type="conventional"):e.labelExpressionInfo.expression&&(r.expression=e.labelExpressionInfo.expression,r.type="arcade"):null!=e.labelExpression&&(r.expression=function(e){return e.replaceAll(new RegExp("\\[","g"),"{").replaceAll(new RegExp("\\]","g"),"}")}(e.labelExpression),r.type="conventional"),r}function d(e){var r=v(e);if(!r)return null;switch(r.type){case"conventional":return g(r.expression);case"arcade":return r.expression}return null}function b(e){var r=v(e);if(!r)return null;switch(r.type){case"conventional":return function(e){var r=null===e||void 0===e?void 0:e.match(w);return r&&r[1].trim()||null}(r.expression);case"arcade":return E(r.expression)}return null}function g(e){var r;return e?(r=(0,t.gx)(e,(function(e){return a+'$feature["'+e+'"]'+u})),r=l.test(r)?r.replace(l,""):c+r,r=(r=o.test(r)?r.replace(o,""):r+c).replaceAll(i,p).replaceAll(s,f)):r='""',r}var w=/^\s*\{([^}]+)\}\s*$/i;var h=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,y=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,m=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function E(e){if(!e)return null;var r=h.exec(e)||y.exec(e);return r?r[1]||r[3]:(r=m.exec(e))?r[2]:null}}}]);
//# sourceMappingURL=6553.9bdc4963.chunk.js.map