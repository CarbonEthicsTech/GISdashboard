"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[6761],{11873:function(e,t,n){function r(){return[1,0,0,0,1,0,0,0,1]}function i(e,t,n,r,i,o,u,a,f){return[e,t,n,r,i,o,u,a,f]}function o(e,t){return new Float64Array(e,t,9)}n.d(t,{a:function(){return o},c:function(){return r},f:function(){return i}});Object.freeze(Object.defineProperty({__proto__:null,clone:function(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8]]},create:r,createView:o,fromValues:i},Symbol.toStringTag,{value:"Module"}))},81949:function(e,t,n){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15]]}function o(e,t){return new Float64Array(e,t,16)}n.d(t,{I:function(){return u},a:function(){return o},b:function(){return i},c:function(){return r}});var u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:i,create:r,createView:o,fromValues:function(e,t,n,r,i,o,u,a,f,c,s,l,h,d,p,v){return[e,t,n,r,i,o,u,a,f,c,s,l,h,d,p,v]}},Symbol.toStringTag,{value:"Module"}))},98131:function(e,t,n){function r(){return[0,0,0,1]}function i(e){return[e[0],e[1],e[2],e[3]]}function o(e,t){return new Float64Array(e,t,4)}n.d(t,{I:function(){return u},a:function(){return r},b:function(){return i},c:function(){return o}});var u=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:u,clone:i,create:r,createView:o,fromValues:function(e,t,n,r){return[e,t,n,r]}},Symbol.toStringTag,{value:"Module"}))},71417:function(e,t,n){n.d(t,{a:function(){return g},c:function(){return v},g:function(){return m},h:function(){return y},j:function(){return w},l:function(){return A}});n(93169);var r,i=n(32718),o=n(16889),u=n(14226),a=n(11186),f=n(71353),c=n(90045),s=n(67077);!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(r||(r={}));var l=n(40885),h=n(40927),d=n(51378),p=v();function v(){return(0,s.c)()}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v();return(0,c.c)(t,e)}function g(e){return e[3]}function m(e){return e}function b(e,t,n){if(null==t)return!1;var r=t.origin,i=t.direction,o=_;o[0]=r[0]-e[0],o[1]=r[1]-e[1],o[2]=r[2]-e[2];var u=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===u)return!1;var a=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),f=a*a-4*u*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-e[3]*e[3]);if(f<0)return!1;var c=Math.sqrt(f),s=(-a-c)/(2*u),l=(-a+c)/(2*u);return(s<0||l<s&&l>0)&&(s=l),!(s<0)&&(n&&(n[0]=r[0]+i[0]*s,n[1]=r[1]+i[1]*s,n[2]=r[2]+i[2]*s),!0)}var _=(0,f.c)();function w(e,t){return b(e,t,null)}function M(e,t,n){var r=d.WM.get(),i=d.MP.get();(0,a.f)(r,t.origin,t.direction);var o=g(e);(0,a.f)(n,r,t.origin),(0,a.g)(n,n,1/(0,a.l)(n)*o);var f=Z(e,t.origin),c=(0,h.EU)(t.origin,n);return(0,u.d)(i,c+f,r),(0,a.m)(n,n,i),n}function S(e,t,n){var r=(0,a.b)(d.WM.get(),t,e),i=(0,a.g)(d.WM.get(),r,e[3]/(0,a.l)(r));return(0,a.a)(n,i,e)}function Z(e,t){var n=(0,a.b)(d.WM.get(),t,e),r=(0,a.l)(n),i=g(e),u=i+Math.abs(i-r);return(0,o.ZF)(i/u)}var E=(0,f.c)();function P(e,t,n,i){var u=(0,a.b)(E,t,e);switch(n){case r.X:var f=(0,o.jE)(u,E)[2];return(0,a.s)(i,-Math.sin(f),Math.cos(f),0);case r.Y:var c=(0,o.jE)(u,E),s=c[1],l=c[2],h=Math.sin(s);return(0,a.s)(i,-h*Math.cos(l),-h*Math.sin(l),Math.cos(s));case r.Z:return(0,a.n)(i,u);default:return}}function B(e,t){var n=(0,a.b)(x,t,e);return(0,a.l)(n)-e[3]}function A(e,t){var n=(0,a.d)(e,t),r=g(e);return n<=r*r}var x=(0,f.c)(),I=v();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:p,altitudeAt:B,angleToSilhouette:Z,axisAt:P,clear:function(e){e[0]=e[1]=e[2]=e[3]=0},closestPoint:function(e,t,n){return b(e,t,n)?n:((0,l.JI)(t,e,n),S(e,n,n))},closestPointOnSilhouette:M,containsPoint:A,copy:y,create:v,distanceToSilhouette:function(e,t){var n=(0,a.b)(d.WM.get(),t,e),r=(0,a.p)(n),i=e[3]*e[3];return Math.sqrt(Math.abs(r-i))},elevate:function(e,t,n){return e!==n&&(0,a.c)(n,e),n[3]=e[3]+t,n},fromCenterAndRadius:function(e,t){return(0,s.f)(e[0],e[1],e[2],t)},fromRadius:function(e,t){return e[0]=e[1]=e[2]=0,e[3]=t,e},fromValues:function(e,t,n,r){return(0,s.f)(e,t,n,r)},getCenter:m,getRadius:g,intersectRay:b,intersectRayClosestSilhouette:function(e,t,n){if(b(e,t,n))return n;var r=M(e,t,d.WM.get());return(0,a.a)(n,t.origin,(0,a.g)(d.WM.get(),t.direction,(0,a.i)(t.origin,r)/(0,a.l)(t.direction))),n},intersectsRay:w,projectPoint:S,setAltitudeAt:function(e,t,n,i){var o=B(e,t),u=P(e,t,r.Z,x),f=(0,a.g)(x,u,n-o);return(0,a.a)(i,t,f)},setExtent:function(e,t,n){return i.Z.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),e===n?n:y(e,n)},tmpSphere:I,union:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v(),r=(0,a.i)(e,t),i=e[3],o=t[3];return r+o<i?((0,c.c)(n,e),n):r+i<o?((0,c.c)(n,t),n):((0,a.h)(n,e,t,(r+o-i)/(2*r)),n[3]=(r+i+o)/2,n)},wrap:function(e){return e}},Symbol.toStringTag,{value:"Module"}))},32035:function(e,t,n){n.d(t,{a:function(){return a},b:function(){return u},c:function(){return i},d:function(){return s},e:function(){return f},n:function(){return l},s:function(){return c},t:function(){return o}});var r=n(77873);function i(e,t,n){o(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function o(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;if(e.length/i!==Math.ceil(t.length/o))return r.c.error("source and destination buffers need to have the same number of elements"),e;for(var u=e.length/i,a=n[0],f=n[1],c=n[2],s=n[4],l=n[5],h=n[6],d=n[8],p=n[9],v=n[10],y=n[12],g=n[13],m=n[14],b=0,_=0,w=0;w<u;w++){var M=t[b],S=t[b+1],Z=t[b+2];e[_]=a*M+s*S+d*Z+y,e[_+1]=f*M+l*S+p*Z+g,e[_+2]=c*M+h*S+v*Z+m,b+=o,_+=i}return e}function u(e,t,n){a(e.typedBuffer,t.typedBuffer,n,e.typedBufferStride,t.typedBufferStride)}function a(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i;if(e.length/i===Math.ceil(t.length/o))for(var u=e.length/i,a=n[0],f=n[1],c=n[2],s=n[3],l=n[4],h=n[5],d=n[6],p=n[7],v=n[8],y=0,g=0,m=0;m<u;m++){var b=t[y],_=t[y+1],w=t[y+2];e[g]=a*b+s*_+d*w,e[g+1]=f*b+l*_+p*w,e[g+2]=c*b+h*_+v*w,y+=o,g+=i}else r.c.error("source and destination buffers need to have the same number of elements")}function f(e,t,n){c(e.typedBuffer,t,n,e.typedBufferStride)}function c(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=Math.min(e.length/r,t.count),o=t.typedBuffer,u=t.typedBufferStride,a=0,f=0,c=0;c<i;c++)e[f]=n*o[a],e[f+1]=n*o[a+1],e[f+2]=n*o[a+2],a+=u,f+=r}function s(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,i=Math.min(e.length/n,t.length/r),o=0,u=0,a=0;a<i;a++){var f=t[o],c=t[o+1],s=t[o+2],l=f*f+c*c+s*s;if(l>0){var h=1/Math.sqrt(l);e[u]=h*f,e[u+1]=h*c,e[u+2]=h*s}o+=r,u+=n}}Object.freeze(Object.defineProperty({__proto__:null,normalize:l,normalizeView:s,scale:c,scaleView:f,shiftRight:function(e,t,n){for(var r=Math.min(e.count,t.count),i=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,a=t.typedBufferStride,f=0,c=0,s=0;s<r;s++)i[c]=u[f]>>n,i[c+1]=u[f+1]>>n,i[c+2]=u[f+2]>>n,f+=a,c+=o},transformMat3:a,transformMat3View:u,transformMat4:o,transformMat4View:i},Symbol.toStringTag,{value:"Module"}))},67077:function(e,t,n){function r(){return[0,0,0,0]}function i(e,t,n,r){return[e,t,n,r]}function o(e,t){return new Float64Array(e,t,4)}function u(){return[0,0,0,0]}function a(){return i(1,1,1,1)}function f(){return i(1,0,0,0)}function c(){return i(0,1,0,0)}function s(){return i(0,0,1,0)}function l(){return i(0,0,0,1)}n.d(t,{a:function(){return o},c:function(){return r},f:function(){return i}});var h=[0,0,0,0],d=a(),p=f(),v=c(),y=s(),g=l();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_W:g,UNIT_X:p,UNIT_Y:v,UNIT_Z:y,ZEROS:h,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:r,createView:o,fromArray:function(e){for(var t=[0,0,0,0],n=Math.min(4,e.length),r=0;r<n;++r)t[r]=e[r];return t},fromValues:i,ones:a,unitW:l,unitX:f,unitY:c,unitZ:s,zeros:u},Symbol.toStringTag,{value:"Module"}))},70116:function(e,t,n){var r;n.d(t,{Y:function(){return r}}),function(e){e[e.KILOBYTES=1024]="KILOBYTES",e[e.MEGABYTES=1048576]="MEGABYTES",e[e.GIGABYTES=1073741824]="GIGABYTES"}(r||(r={}))},21530:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(15671),i=n(43144),o=n(70758),u=function(){function e(t){(0,r.Z)(this,e),this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}return(0,i.Z)(e,[{key:"get",value:function(){var e=this;return 0===this._itemsPtr&&(0,o.Y)((function(){return e._reset()})),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}},{key:"_reset",value:function(){var e=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*a);this._items.length=Math.min(e,this._items.length),this._itemsPtr=0}},{key:"_grow",value:function(){for(var e=0;e<Math.max(8,Math.min(this._items.length,a));e++)this._items.push(this._allocator())}}]),e}(),a=1024},86372:function(e,t,n){n.d(t,{JK:function(){return a},QZ:function(){return o},Rq:function(){return u},bg:function(){return i},mB:function(){return f}});var r=n(18722);function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e<=r.DB?t?new Array(e).fill(0):new Array(e):new Float64Array(e)}function o(e){return((0,r.kJ)(e)?e.length:e.byteLength/8)<=r.DB?Array.from(e):new Float64Array(e)}function u(e,t,n){return Array.isArray(e)?e.slice(t,t+n):e.subarray(t,t+n)}function a(e,t){for(var n=0;n<t.length;++n)e[n]=t[n];return e}function f(e){return Array.isArray(e)?new Float64Array(e):e}},80880:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(29439),i=n(15671),o=n(43144),u=n(60136),a=n(29388),f=n(27366),c=n(11582),s=n(46784),l=n(49861),h=(n(25243),n(63780),n(93169),n(27135)),d=n(69912),p=n(71353),v=n(585),y=function(e){(0,u.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).type="georeferenced-relative",r.isRelative=!0,r.isGeoreferenced=!0,r.origin=(0,p.c)(),r}return(0,o.Z)(n,[{key:"getOriginPoint",value:function(e){var t=(0,r.Z)(this.origin,3),n=t[0],i=t[1],o=t[2];return new v.Z({x:n,y:i,z:o,spatialReference:e})}},{key:"setOriginFormPoint",value:function(e){var t=e.x,n=e.y,r=e.z;this.origin=(0,p.f)(t,n,null!==r&&void 0!==r?r:0)}}]),n}((0,c.J)(s.wq));(0,f._)([(0,h.J)({georeferencedRelative:"georeferenced-relative"},{readOnly:!0})],y.prototype,"type",void 0),(0,f._)([(0,l.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"origin",void 0);var g=y=(0,f._)([(0,d.j)("esri.geometry.support.MeshGeoreferencedRelativeVertexSpace")],y)},8623:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(43144),i=n(15671),o=n(60136),u=n(29388),a=n(27366),f=n(11582),c=n(46784),s=(n(32718),n(25243),n(63780),n(93169),n(10064),n(27135)),l=n(69912),h=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,i.Z)(this,n),(e=t.call(this,{})).type="georeferenced",e.isRelative=!1,e.isGeoreferenced=!0,e}return(0,r.Z)(n)}((0,f.J)(c.wq));(0,a._)([(0,s.J)({georeferenced:"georeferenced"},{readOnly:!0})],h.prototype,"type",void 0);var d=h=(0,a._)([(0,l.j)("esri.geometry.support.MeshGeoreferencedVertexSpace")],h)},50250:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(29439),i=n(15671),o=n(43144),u=n(60136),a=n(29388),f=n(27366),c=n(11582),s=n(46784),l=n(49861),h=(n(25243),n(63780),n(93169),n(27135)),d=n(69912),p=n(71353),v=n(585),y=function(e){(0,u.Z)(n,e);var t=(0,a.Z)(n);function n(e){var r;return(0,i.Z)(this,n),(r=t.call(this,e)).type="local",r.isRelative=!0,r.isGeoreferenced=!1,r.origin=(0,p.c)(),r}return(0,o.Z)(n,[{key:"getOriginPoint",value:function(e){var t=(0,r.Z)(this.origin,3),n=t[0],i=t[1],o=t[2];return new v.Z({x:n,y:i,z:o,spatialReference:e})}},{key:"setOriginFormPoint",value:function(e){var t=e.x,n=e.y,r=e.z;this.origin=(0,p.f)(t,n,null!==r&&void 0!==r?r:0)}}]),n}((0,c.J)(s.wq));(0,f._)([(0,h.J)({local:"local"},{readOnly:!0})],y.prototype,"type",void 0),(0,f._)([(0,l.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],y.prototype,"origin",void 0);var g=y=(0,f._)([(0,d.j)("esri.geometry.support.MeshLocalVertexSpace")],y)},77873:function(e,t,n){n.d(t,{c:function(){return r}});var r=n(32718).Z.getLogger("esri.views.3d.support.buffer.math")},40885:function(e,t,n){n.d(t,{JI:function(){return c},Ue:function(){return u},re:function(){return f}});n(63780);var r=n(21530),i=n(11186),o=n(71353);n(51378);function u(e){return e?a((0,o.a)(e.origin),(0,o.a)(e.direction)):a((0,o.c)(),(0,o.c)())}function a(e,t){return{origin:e,direction:t}}function f(e,t){var n=s.get();return n.origin=e,n.direction=t,n}function c(e,t,n){var r=(0,i.e)(e.direction,(0,i.b)(n,t,e.origin));return(0,i.a)(n,e.origin,(0,i.g)(n,e.direction,r)),n}var s=new r.x((function(){return u()}))},40927:function(e,t,n){n.d(t,{EU:function(){return u}});var r=n(16889),i=n(11186),o=n(71353);function u(e,t){var n=(0,i.e)(e,t)/((0,i.l)(e)*(0,i.l)(t));return-(0,r.ZF)(n)}(0,o.c)(),(0,o.c)()},51378:function(e,t,n){n.d(t,{MP:function(){return y},WM:function(){return v}});var r=n(15671),i=n(43144),o=n(70116),u=n(70758),a=n(11873),f=n(81949),c=n(98131),s=n(6394),l=n(71353),h=n(67077),d=function(){function e(t,n,i){(0,r.Z)(this,e),this._itemByteSize=t,this._itemCreate=n,this._buffers=new Array,this._items=new Array,this._itemsPtr=0,this._itemsPerBuffer=Math.ceil(i/this._itemByteSize)}return(0,i.Z)(e,[{key:"get",value:function(){var e=this;0===this._itemsPtr&&(0,u.Y)((function(){return e._reset()}));for(var t=Math.floor(this._itemsPtr/this._itemsPerBuffer);this._buffers.length<=t;){for(var n=new ArrayBuffer(this._itemsPerBuffer*this._itemByteSize),r=0;r<this._itemsPerBuffer;++r)this._items.push(this._itemCreate(n,r*this._itemByteSize));this._buffers.push(n)}return this._items[this._itemsPtr++]}},{key:"_reset",value:function(){for(var e=2*(Math.floor(this._itemsPtr/this._itemsPerBuffer)+1);this._buffers.length>e;)this._buffers.pop(),this._items.length=this._buffers.length*this._itemsPerBuffer;this._itemsPtr=0}},{key:"test",get:function(){return{size:this._buffers.length*this._itemsPerBuffer*this._itemByteSize}}}],[{key:"createVec2f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(16,s.c,t)}},{key:"createVec3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(24,l.b,t)}},{key:"createVec4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(32,h.a,t)}},{key:"createMat3f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(72,a.a,t)}},{key:"createMat4f64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(128,f.a,t)}},{key:"createQuatf64",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;return new e(32,c.c,t)}}]),e}(),p=4*o.Y.KILOBYTES,v=(d.createVec2f64(),d.createVec3f64()),y=(d.createVec4f64(),d.createMat3f64(),d.createMat4f64());d.createQuatf64()},6761:function(e,t,n){n.r(t),n.d(t,{destroyContext:function(){return U},dracoDecompressPointCloudData:function(){return P},filterObbsForModifications:function(){return A},filterObbsForModificationsSync:function(){return Y},initialize:function(){return G},interpretObbModificationResults:function(){return V},process:function(){return Z},project:function(){return k},setLegacySchema:function(){return T},setModifications:function(){return I},setModificationsSync:function(){return j},test:function(){return J},transformNormals:function(){return F}});var r,i,o=n(29439),u=n(74165),a=n(15861),f=n(78952),c=n(86372),s=n(80880),l=n(8623),h=n(50250),d=n(32035);!function(e){e[e.None=0]="None",e[e.Int16=1]="Int16",e[e.Int32=2]="Int32"}(r||(r={})),function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(i||(i={}));var p,v=n(65905);function y(e){return(0,v.V)("esri/libs/i3s/".concat(e))}var g,m,b,_,w;n(71417);!function(e){e[e.Unmodified=0]="Unmodified",e[e.Culled=1]="Culled",e[e.NotChecked=2]="NotChecked"}(g||(g={})),function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(m||(m={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(b||(b={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(_||(_={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(w||(w={}));var M,S;function Z(e){return E.apply(this,arguments)}function E(){return(E=(0,a.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return n=[t.geometryBuffer],e.abrupt("return",{result:C(t,n),transferList:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return B.apply(this,arguments)}function B(){return B=(0,a.Z)((0,u.Z)().mark((function e(t){var n,r,i,o,a,f,c,s,l;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:if(r=[t.geometryBuffer],i=t.geometryBuffer,o=i.byteLength,a=S._malloc(o),(f=new Uint8Array(S.HEAPU8.buffer,a,o)).set(new Uint8Array(i)),c=S.dracoDecompressPointCloudData(a,f.byteLength),S._free(a),!(c.error.length>0)){e.next=7;break}throw new Error("i3s.wasm: ".concat(c.error));case 7:return s=(null===(n=c.featureIds)||void 0===n?void 0:n.length)>0?c.featureIds.slice():null,l=c.positions.slice(),e.abrupt("return",(s&&r.push(s.buffer),r.push(l.buffer),{result:{positions:l,featureIds:s},transferList:r}));case 9:case"end":return e.stop()}}),e)}))),B.apply(this,arguments)}function A(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return Y(t),n={buffer:t.buffer},e.abrupt("return",{result:n,transferList:[n.buffer]});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return O.apply(this,arguments)}function O(){return(O=(0,a.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:j(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,a.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:S.setLegacySchema(t.context,t.jsonSchema);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return L.apply(this,arguments)}function L(){return L=(0,a.Z)((0,u.Z)().mark((function e(t){var r,i,a,d,p,v,y,g,m,b,_,w,M,S,Z,E,P,B,A,x;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.localMatrix,i=t.origin,a=t.positions,d=t.vertexSpace,p=t.local,v=f.Z.fromJSON(t.inSpatialReference),y=f.Z.fromJSON(t.outSpatialReference),"georeferenced"!==(g={georeferenced:l.Z,georeferencedRelative:s.Z,local:h.Z}[d.type].fromJSON(d)).type){e.next=13;break}return e.next=4,Promise.resolve().then(n.bind(n,52587));case 4:return b=e.sent,_=b.projectBuffer,w=b.initializeProjection,e.next=9,w(v,y);case 9:m=new Float64Array(a.length),_(a,v,0,m,y,0,m.length/3),e.next=18;break;case 13:return e.next=15,Promise.all([n.e(5158),n.e(7898)]).then(n.bind(n,57898));case 15:M=e.sent,S=M.project,m=(0,c.mB)(S({positions:a,transform:r?{localMatrix:r}:void 0,vertexSpace:g,inSpatialReference:v,outSpatialReference:y,local:p}));case 18:for(Z=m.length,E=(0,o.Z)(i,3),P=E[0],B=E[1],A=E[2],x=0;x<Z;x+=3)m[x]-=P,m[x+1]-=B,m[x+2]-=A;return e.abrupt("return",{result:{projected:m,original:a},transferList:[m.buffer,a.buffer]});case 21:case"end":return e.stop()}}),e)}))),L.apply(this,arguments)}function F(e){return N.apply(this,arguments)}function N(){return N=(0,a.Z)((0,u.Z)().mark((function e(t){var n,r,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.normalMatrix,r=t.normals,i=new Float32Array(r.length),e.abrupt("return",((0,d.a)(i,r,n),(0,d.n)(i,i),{result:{transformed:i,original:r},transferList:[i.buffer,r.buffer]}));case 3:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}function U(e){z(e)}function j(e){for(var t=e.modifications,n=S._malloc(8*t.length),r=new Float64Array(S.HEAPU8.buffer,n,t.length),i=0;i<t.length;++i)r[i]=t[i];S.setModifications(e.context,n,t.length,e.isGeodetic),S._free(n)}function C(e,t){if(!S)return null;var n=e.context,i=e.localOrigin,o=e.globalTrafo,u=e.mbs,a=e.obb,f=e.elevationOffset,c=e.geometryBuffer,s=e.geometryDescriptor,l=e.indexToVertexProjector,h=e.vertexToRenderProjector,d=S._malloc(c.byteLength),p=S._malloc(33*Float64Array.BYTES_PER_ELEMENT),v=new Uint8Array(S.HEAPU8.buffer,d,c.byteLength);v.set(new Uint8Array(c));var y=new Float64Array(S.HEAPU8.buffer,p,33);D(y,i);var g=y.byteOffset+3*y.BYTES_PER_ELEMENT,m=new Float64Array(y.buffer,g);D(m,o),g+=16*y.BYTES_PER_ELEMENT,D(m=new Float64Array(y.buffer,g),u),g+=4*y.BYTES_PER_ELEMENT,null!=a&&(D(m=new Float64Array(y.buffer,g),a.center),g+=3*y.BYTES_PER_ELEMENT,D(m=new Float64Array(y.buffer,g),a.halfSize),g+=3*y.BYTES_PER_ELEMENT,D(m=new Float64Array(y.buffer,g),a.quaternion));var b=s,_={isDraco:!1,isLegacy:!1,color:e.layouts.some((function(e){return e.some((function(e){return"color"===e.name}))})),normal:e.needNormals&&e.layouts.some((function(e){return e.some((function(e){return"normalCompressed"===e.name}))})),uv0:e.layouts.some((function(e){return e.some((function(e){return"uv0"===e.name}))})),uvRegion:e.layouts.some((function(e){return e.some((function(e){return"uvRegion"===e.name}))})),featureIndex:b.featureIndex},w=S.process(n,!!e.obb,d,v.byteLength,b,_,p,f,l,h,e.normalReferenceFrame);if(S._free(p),S._free(d),w.error.length>0)throw new Error("i3s.wasm: ".concat(w.error));if(w.discarded)return null;var M=w.componentOffsets.length>0?w.componentOffsets.slice():null,Z=w.featureIds.length>0?w.featureIds.slice():null,E=w.anchorIds.length>0?Array.from(w.anchorIds):null,P=w.anchors.length>0?Array.from(w.anchors):null,B=w.interleavedVertedData.slice().buffer,A=w.indicesType===r.Int16?new Uint16Array(w.indices.buffer,w.indices.byteOffset,w.indices.byteLength/2).slice():new Uint32Array(w.indices.buffer,w.indices.byteOffset,w.indices.byteLength/4).slice(),x=w.positions.slice(),I=w.positionIndicesType===r.Int16?new Uint16Array(w.positionIndices.buffer,w.positionIndices.byteOffset,w.positionIndices.byteLength/2).slice():new Uint32Array(w.positionIndices.buffer,w.positionIndices.byteOffset,w.positionIndices.byteLength/4).slice(),O={layout:e.layouts[0],interleavedVertexData:B,indices:A,hasColors:w.hasColors,hasModifications:w.hasModifications,positionData:{data:x,indices:I}};return Z&&t.push(Z.buffer),M&&t.push(M.buffer),t.push(B),t.push(A.buffer),t.push(x.buffer),t.push(I.buffer),{componentOffsets:M,featureIds:Z,anchorIds:E,anchors:P,transformedGeometry:O,obb:w.obb}}function V(e){return 0===e?m.Unmodified:1===e?m.PotentiallyModified:2===e?m.Culled:m.Unknown}function Y(e){var t=e.context,n=e.buffer,r=S._malloc(n.byteLength),i=n.byteLength/Float64Array.BYTES_PER_ELEMENT,o=new Float64Array(S.HEAPU8.buffer,r,i),u=new Float64Array(n);o.set(u),S.filterOBBs(t,r,i),u.set(o),S._free(r)}function z(e){S&&(S.destroy(e),S=null)}function D(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function G(){return S?Promise.resolve():(M||(M=(p||(p=new Promise((function(e){return n.e(7552).then(n.bind(n,57552)).then((function(e){return e.i})).then((function(t){var n=(0,t.default)({locateFile:y,onRuntimeInitialized:function(){return e(n)}});delete n.then}))})).catch((function(e){throw e}))),p).then((function(e){S=e,M=null}))),M)}var J={transform:C,destroy:z}}}]);
//# sourceMappingURL=6761.06e95e93.chunk.js.map