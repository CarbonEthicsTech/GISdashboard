"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[8980],{67077:function(e,t,r){function n(){return[0,0,0,0]}function i(e,t,r,n){return[e,t,r,n]}function a(e,t){return new Float64Array(e,t,4)}function o(){return[0,0,0,0]}function u(){return i(1,1,1,1)}function s(){return i(1,0,0,0)}function f(){return i(0,1,0,0)}function l(){return i(0,0,1,0)}function c(){return i(0,0,0,1)}r.d(t,{a:function(){return a},c:function(){return n},f:function(){return i}});var y=[0,0,0,0],p=u(),h=s(),d=f(),m=l(),v=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_W:v,UNIT_X:h,UNIT_Y:d,UNIT_Z:m,ZEROS:y,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:n,createView:a,fromArray:function(e){for(var t=[0,0,0,0],r=Math.min(4,e.length),n=0;n<r;++n)t[n]=e[n];return t},fromValues:i,ones:u,unitW:c,unitX:s,unitY:f,unitZ:l,zeros:o},Symbol.toStringTag,{value:"Module"}))},42388:function(e,t,r){r.d(t,{j:function(){return p}});var n=r(15671),i=r(43144),a=r(60136),o=r(29388),u=r(27366),s=r(7138),f=r(41691),l=r(49861),c=(r(25243),r(63780),r(93169),r(69912)),y={visible:"visibleSublayers"},p=function(e){(0,a.Z)(r,e);var t=(0,o.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).scale=0,i}return(0,i.Z)(r,[{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("wms-sublayer-update",(function(e){return t.notifyChange(y[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){return this.visibleSublayers.filter((function(e){return e.name})).map((function(e){return e.name})).join()}},{key:"version",get:function(){this.commitProperty("layers");var e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this.layer,t=this.scale,r=null===e||void 0===e?void 0:e.sublayers,n=[];return null!==r&&void 0!==r&&r.forEach((function e(r){var i=r.minScale,a=r.maxScale,o=r.sublayers;r.visible&&(0===t||(0===i||t<=i)&&(0===a||t>=a))&&(o?o.forEach(e):n.push(r))})),n}},{key:"toJSON",value:function(){var e=this.layer,t=this.layers;return{format:e.imageFormat,request:"GetMap",service:"WMS",styles:"",transparent:e.imageTransparency?"TRUE":"FALSE",version:e.version,layers:t}}}]),r}((0,f.p)(s.Z));(0,u._)([(0,l.Cb)()],p.prototype,"layer",null),(0,u._)([(0,l.Cb)({readOnly:!0})],p.prototype,"layers",null),(0,u._)([(0,l.Cb)({type:Number})],p.prototype,"scale",void 0),(0,u._)([(0,l.Cb)({readOnly:!0})],p.prototype,"version",null),(0,u._)([(0,l.Cb)({readOnly:!0})],p.prototype,"visibleSublayers",null),p=(0,u._)([(0,c.j)("esri.layers.support.ExportWMSImageParameters")],p)},45948:function(e,t,r){r.d(t,{qG:function(){return x},PV:function(){return m},id:function(){return I},iR:function(){return p},rn:function(){return d},rT:function(){return _},u1:function(){return M},rO:function(){return S},Oh:function(){return w},bT:function(){return b},C_:function(){return y},Lx:function(){return v},vg:function(){return Z},YI:function(){return c},HQ:function(){return h}});var n=r(1413),i=r(62044),a=r(53866),o=r(78952),u=r(53283),s=(r(63780),r(66978),r(86710));var f=r(64575),l=r(81219),c={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},y={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:function(e,t){return!t.disablePopup}},write:{enabled:!0,writer:function(e,t,r){t[r]=!e}}}},p={type:Boolean,value:!0,nonNullable:!0,json:{name:"showLabels",write:!0}},h={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:u.w}}},d={type:Boolean,value:!0,nonNullable:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},m={value:null,type:f.Z,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function v(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}var g={write:!0,read:!0},w={type:Number,json:{origins:{"web-document":g,"portal-item":{write:!0}}}},b=(0,n.Z)((0,n.Z)({},w),{},{json:(0,n.Z)((0,n.Z)({},w.json),{},{origins:{"web-document":(0,n.Z)((0,n.Z)({},g),{},{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?(0,l.b)(t.layerDefinition.drawingInfo.transparency):void 0:(0,l.b)(t.drawingInfo.transparency)}}})}),x={type:i.Z,readOnly:!0,get:function(){var e,t;if(null===(e=this.layer)||void 0===e||!e.timeInfo)return null;var r=this.layer,n=r.datesInUnknownTimezone,a=r.timeOffset,o=r.useViewTime,u=null===(t=this.view)||void 0===t?void 0:t.timeExtent,f=this.layer.timeExtent;n&&(f=function(e){if(!e)return e;var t=e.start,r=e.end;return new i.Z({start:null!=t?(0,s.Nm)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=r?(0,s.Nm)(r,r.getTimezoneOffset(),"minutes"):r})}(f));var l=o?u&&f?u.intersection(f):u||f:f;if(!l||l.isEmpty||l.isAllTime)return l;a&&(l=l.offset(-a.value,a.unit)),n&&(l=function(e){if(!e)return e;var t=e.start,r=e.end;return new i.Z({start:null!=t?(0,s.Nm)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=r?(0,s.Nm)(r,-r.getTimezoneOffset(),"minutes"):r})}(l));var c=this._get("timeExtent");return l.equals(c)?c:l}},Z={type:a.Z,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:function(e,t){var r=a.Z.fromJSON(e);return null!=t.spatialReference&&"object"==typeof t.spatialReference&&(r.spatialReference=o.Z.fromJSON(t.spatialReference)),r}}}},read:!1}},I={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},S={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},M={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},_={json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}}},27811:function(e,t,r){r.d(t,{AJ:function(){return l},If:function(){return d},QM:function(){return p},hy:function(){return h},k0:function(){return f},nu:function(){return s},uI:function(){return y},wx:function(){return m}});var n=r(37762),i=r(16889),a=r(17842),o=r(90045),u=r(67077),s=2.4;function f(e){return(0,a.Wz)(e*s)}function l(e){return(0,a.F2)(e)/s}function c(e,t,r,n){var a=t.color,u=t.ratio,s=r.color,f=r.ratio;if(f===u){var l=1e-6;1===f?u-=l:f+=l}var c=(0,i.uZ)((n-u)/(f-u),0,1);(0,o.l)(e,a.toArray(),s.toArray(),c)}function y(e){var t=new Uint8ClampedArray(2048);if(e=e.filter((function(e){var t=e.ratio;return t>=0&&t<=1})).sort((function(e,t){return e.ratio-t.ratio})).map((function(e){var t=e.color,r=e.ratio;return{color:t,ratio:Math.max(r,.001)}})),e.length<1)return t;for(var r=e[0],n=e[0],i=1,a=(0,u.c)(),o=0;o<512;o++){for(var s=(o+.5)/512;s>n.ratio&&i<e.length;)r=n,n=e[i++];c(a,r,n,s),t.set(a,4*o)}return t}function p(e,t,r,i){var o,u,s=t.radius,f=t.fieldOffset,l=t.field,c=Math.round((0,a.F2)(s)),y=new Float64Array(r*i),p=Number.NEGATIVE_INFINITY,h=function(e,t){return null!=e?"string"==typeof t?function(t){return-1*+t.readAttribute(e)}:function(r){return+r.readAttribute(e)+t}:function(e){return 1}}(l,f),m=new Set,v=(0,n.Z)(e);try{for(v.s();!(u=v.n()).done;)for(var g=u.value.getCursor();g.next();){var w=g.getObjectId();if(!m.has(w)){m.add(w);var b=g.readLegacyPointGeometry(),x=128;if(!(b.x<-x||b.x>=r+x||b.y<-x||b.y>i+x))for(var Z=+h(g),I=Math.max(0,Math.round(b.x)-c),S=Math.max(0,Math.round(b.y)-c),M=Math.min(i,Math.round(b.y)+c),_=Math.min(r,Math.round(b.x)+c),C=S;C<M;C++)for(var j=I;j<_;j++){var k=C*r+j,N=d(b.x-j,b.y-C,c);(o=y[k]+=N*Z)>p&&(p=o)}}}}catch(P){v.e(P)}finally{v.f()}return{matrix:y.buffer,max:p}}function h(e,t,r,n,a,o){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var u=e.getImageData(0,0,t,t);r&&n&&u.data.set(new Uint8ClampedArray(function(e,t,r,n,a){for(var o=new Uint32Array(e*e),u=("buffer"in t?t:new Float64Array(t)),s=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),f=s.length/(a-n),l=0;l<u.length;l++){var c=u[l],y=Math.floor((c-n)*f);o[l]=s[(0,i.uZ)(y,0,s.length-1)]}return o.buffer}(t,r,n,a,o))),e.putImageData(u,0,0)}function d(e,t,r){var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))/r;return n>1?0:3/(Math.PI*Math.pow(r,2))*Math.pow(1-Math.pow(n,2),2)}function m(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(r){return+r[e]+t}:function(){return 1}}},15396:function(e,t,r){r.r(t),r.d(t,{default:function(){return C}});var n=r(1413),i=r(74165),a=r(15861),o=r(15671),u=r(43144),s=r(60136),f=r(29388),l=r(27366),c=r(32718),y=r(92026),p=r(66978),h=r(94172),d=r(49861),m=(r(25243),r(63780),r(93169),r(69912)),v=r(53866),g=r(90110),w=r(95986),b=r(9229),x=r(67581),Z=r(13107),I=r(10064),S=r(45948),M=r(42388),_=function(e){(0,s.Z)(r,e);var t=(0,f.Z)(r);function r(){var e;return(0,o.Z)(this,r),(e=t.apply(this,arguments)).bitmapContainer=new g.c,e}return(0,u.Z)(r,[{key:"supportsSpatialReference",value:function(e){return this.layer.serviceSupportsSpatialReference(e)}},{key:"update",value:function(e){var t=this;this.strategy.update(e).catch((function(e){(0,p.D_)(e)||c.Z.getLogger(t).error(e)}))}},{key:"attach",value:function(){var e=this,t=this.layer,r=t.imageMaxHeight,n=t.imageMaxWidth;this.bitmapContainer=new g.c,this.container.addChild(this.bitmapContainer),this.strategy=new b.Z({container:this.bitmapContainer,fetchSource:this.fetchImage.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxHeight:r,imageMaxWidth:n,imageRotationSupported:!1,imageNormalizationSupported:!1,hidpi:!1}),this.addAttachHandles((0,h.YP)((function(){return e.exportImageVersion}),(function(){return e.requestUpdate()})))}},{key:"detach",value:function(){this.strategy=(0,y.SC)(this.strategy),this.container.removeAllChildren()}},{key:"moveStart",value:function(){}},{key:"viewChange",value:function(){}},{key:"moveEnd",value:function(){this.requestUpdate()}},{key:"createFetchPopupFeaturesQuery",value:function(e){var t,r=this.view,n=this.bitmapContainer,i=e.x,a=e.y,o=r.spatialReference,u=0,s=0;if(n.children.some((function(e){var r=e.width,n=e.height,f=e.resolution,l=e.x,c=e.y,y=l+f*r,p=c-f*n;return i>=l&&i<=y&&a<=c&&a>=p&&(t=new v.Z({xmin:l,ymin:p,xmax:y,ymax:c,spatialReference:o}),u=r,s=n,!0)})),!t)return null;var f=t.width/u,l=Math.round((i-t.xmin)/f),c=Math.round((t.ymax-a)/f);return{extent:t,width:u,height:s,x:l,y:c}}},{key:"doRefresh",value:function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.requestUpdate();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isUpdating",value:function(){return this.strategy.updating||this.updateRequested}},{key:"fetchImage",value:function(e,t,r,i){return this.layer.fetchImageBitmap(e,t,r,(0,n.Z)({timeExtent:this.timeExtent},i))}}]),r}(function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,f.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,u.Z)(r,[{key:"initialize",value:function(){this.exportImageParameters=new M.j({layer:this.layer})}},{key:"destroy",value:function(){this.exportImageParameters=(0,y.SC)(this.exportImageParameters)}},{key:"exportImageVersion",get:function(){var e;return null!==(e=this.exportImageParameters)&&void 0!==e&&e.commitProperty("version"),this.commitProperty("timeExtent"),(this._get("exportImageVersion")||0)+1}},{key:"fetchPopupFeatures",value:function(e){var t=this.layer;if(!e)return Promise.reject(new I.Z("wmslayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:t}));var r=t.popupEnabled;if(!r)return Promise.reject(new I.Z("wmslayerview:fetchPopupFeatures","popupEnabled should be true",{popupEnabled:r}));var n=this.createFetchPopupFeaturesQuery(e);if(!n)return Promise.resolve([]);var i=n.extent,a=n.width,o=n.height,u=n.x,s=n.y;if(!(i&&a&&o))throw new I.Z("wmslayerview:fetchPopupFeatures","WMSLayer does not support fetching features.",{extent:i,width:a,height:o});return t.fetchFeatureInfo(i,a,o,u,s)}}]),r}(e);return(0,l._)([(0,d.Cb)()],t.prototype,"exportImageParameters",void 0),(0,l._)([(0,d.Cb)({readOnly:!0})],t.prototype,"exportImageVersion",null),(0,l._)([(0,d.Cb)()],t.prototype,"layer",void 0),(0,l._)([(0,d.Cb)(S.qG)],t.prototype,"timeExtent",void 0),t=(0,l._)([(0,m.j)("esri.layers.mixins.WMSLayerView")],t)}((0,Z.Z)((0,w.y)(x.Z))));(0,l._)([(0,d.Cb)()],_.prototype,"strategy",void 0),(0,l._)([(0,d.Cb)()],_.prototype,"updating",void 0);var C=_=(0,l._)([(0,m.j)("esri.views.2d.layers.WMSLayerView2D")],_)}}]);
//# sourceMappingURL=8980.46dbf374.chunk.js.map