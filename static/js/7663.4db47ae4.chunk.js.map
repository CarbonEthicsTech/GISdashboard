{"version":3,"file":"static/js/7663.4db47ae4.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/smartMapping/statistics/support/utils.js","../node_modules/@arcgis/core/smartMapping/statistics/support/statsWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import e from\"../../../core/Error.js\";import{pt2px as t}from\"../../../core/screenUtils.js\";import n from\"../../../geometry/SpatialReference.js\";import{quantizePoint as r}from\"../../../geometry/support/quantizationUtils.js\";import{isWrappable as i,getInfo as o}from\"../../../geometry/support/spatialReferenceUtils.js\";import{isNumericField as s,numericTypes as l}from\"../../../layers/support/fieldUtils.js\";import{evaluateDensityKernel as a,createValueFunction as u}from\"../../../renderers/support/heatmapUtils.js\";import{processNullValue as f,getNormalizedValue as c}from\"../../../statistics/utils.js\";import{loadArcade as m}from\"../../../support/arcadeOnDemand.js\";import d from\"../../../geometry/Point.js\";let p=null;function h(e,t,n){return e.x<0?e.x+=t:e.x>n&&(e.x-=t),e}function y(e,t,n,s){const l=i(n)?o(n):null,a=l?Math.round((l.valid[1]-l.valid[0])/t.scale[0]):null;return e.map((e=>{const n=new d(e.geometry);return r(t,n,n,n.hasZ,n.hasM),e.geometry=l?h(n,a??0,s[0]):n,e}))}function $(e,n=18,r,i,o,s){const l=new Float64Array(o*s);n=Math.round(t(n));let f=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,m=0,d=0,p=0,h=0;const y=u(i,r);for(const{geometry:t,attributes:u}of e){const{x:e,y:r}=t,i=Math.max(0,e-n),$=Math.max(0,r-n),I=Math.min(s,r+n),g=Math.min(o,e+n),j=+y(u);for(let t=$;t<I;t++)for(let s=i;s<g;s++){const i=t*o+s,u=a(s-e,t-r,n),y=l[i];m=l[i]+=u*j;const $=m-y;d+=$,p+=$*$,m<f&&(f=m),m>c&&(c=m),h++}}if(!h)return{mean:0,stddev:0,min:0,max:0,mid:0,count:0};const $=(c-f)/2;return{mean:d/h,stdDev:Math.sqrt((p-d*d/h)/h),min:f,max:c,mid:$,count:h}}async function I(e,t){if(!t)return[];const{field:r,field2:i,field3:o,fieldDelimiter:s}=e,l=e.valueExpression,a=e.normalizationType,u=e.normalizationField,d=e.normalizationTotal,h=[],y=e.viewInfoParams;let $=null,I=null;if(l){if(!p){const{arcadeUtils:e}=await m();p=e}p.hasGeometryOperations(l)&&await p.enableGeometryOperations(),$=p.createFunction(l),I=y&&p.getViewInfo({viewingMode:y.viewingMode,scale:y.scale,spatialReference:new n(y.spatialReference)})}const g=e.fieldInfos,j=!(t[0]&&\"declaredClass\"in t[0]&&\"esri.Graphic\"===t[0].declaredClass)&&g?{fields:g}:null;return t.forEach((e=>{const t=e.attributes;let n;if(l){const t=j?{...e,layer:j}:e,r=p.createExecContext(t,I);n=p.executeFunction($,r)}else t&&(n=t[r],i&&(n=`${f(n)}${s}${f(t[i])}`,o&&(n=`${n}${s}${f(t[o])}`)));if(a&&\"number\"==typeof n&&isFinite(n)){const e=t&&parseFloat(t[u]);n=c(n,a,e,d)}h.push(n)})),h}function g(e){const t=e.field,n=e.normalizationType,r=e.normalizationField;let i;return\"field\"===n?i=\"(NOT \"+r+\" = 0)\":\"log\"!==n&&\"natural-log\"!==n&&\"square-root\"!==n||(i=`(${t} > 0)`),i}function j(e,t,n){const r=null!=t?e+\" >= \"+t:\"\",i=null!=n?e+\" <= \"+n:\"\";let o=\"\";return o=r&&i?F(r,i):r||i,o?\"(\"+o+\")\":\"\"}function x(t,n,r,i){let o;return n?n.name!==t.objectIdField&&i.includes(n.type)||(o=new e(r,\"'field' should be one of these types: \"+i.join(\",\"))):o=new e(r,\"'field' is not defined in the layer schema\"),o}function w(t,n,r){let i;return n?n.name!==t.objectIdField&&s(n)||(i=new e(r,\"'field' should be one of these numeric types: \"+l.join(\",\"))):i=new e(r,\"'field' is not defined in the layer schema\"),i}function F(e,t){let n=null!=e?e:\"\";return null!=t&&t&&(n=n?\"(\"+n+\") AND (\"+t+\")\":t),n}function b(t,n){if(t&&\"intersects\"!==t.spatialRelationship)return new e(n,\"Only 'intersects' spatialRelationship is supported for featureFilter\")}function v(t,n,r){const i=E({layer:t,fields:n});if(i.length)return new e(r,\"Unknown fields: \"+i.join(\", \")+\". You can only use fields defined in the layer schema\");const o=N({layer:t,fields:n});return o.length?new e(r,\"Unsupported fields: \"+o.join(\", \")+\". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true\"):void 0}function E(e){const t=e.layer;return e.fields.filter((e=>!t.getField(e)))}function N(e){const t=e.layer;return e.fields.filter((e=>{const n=t.getFieldUsageInfo(e);return!n||!n.supportsStatistics}))}function M(e,t,n){const r=[],i=[],o=[],s=[],l=[];e.forEach(((e,t)=>{const a=e.field?\"field\":\"expression\",u=e.field||e.valueExpression;e.field?(l.push(u),i.push(`var ${a}${t} = Number($feature[\"${u}\"]);`)):(r.push(`function getValueForExpr${t}() {\\n  ${u} \\n}`),i.push(`var ${a}${t} = Number(getValueForExpr${t}());`)),n||o.push(`${a}${t} = IIf(${a}${t} < 0, 0, ${a}${t});`),s.push(`${a}${t}`)}));let a=\"return sum;\";const u=r.length?null:l.reduce(((e,t)=>`${e} + ${t}`));let f=null;t||n?t?n||(a=\"return IIf(sum >= 0, sum, null);\",u&&(f=`(( ${u} ) >= 0)`)):(a=\"return IIf(sum != 0, sum, null);\",u&&(f=`(( ${u} ) <> 0)`)):(a=\"return IIf(sum > 0, sum, null);\",u&&(f=`(( ${u} ) > 0)`));return{valueExpression:[r.length?r.join(\"\\n\"):\"\",i.join(\"\\n\"),o.join(\"\\n\"),`var sum = ${s.join(\" + \")};`,a].filter(Boolean).join(\"\\n\\n\"),sqlExpression:u,sqlWhere:f}}export{$ as calculateHeatmapStats,I as getDataValues,j as getRangeExpr,g as getSQLFilterForNormalization,M as getSumOfAttributesExpr,F as mergeWhereClauses,y as quantizeFeatures,v as verifyBasicFieldValidity,x as verifyFieldType,b as verifyFilterValidty,w as verifyNumericField};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.27/esri/copyright.txt for details.\n*/\nimport{getDataValues as i,quantizeFeatures as a,calculateHeatmapStats as e}from\"./utils.js\";import{isNullCountSupported as n,calculateStringStatistics as l,calculateStatistics as o,processSummaryStatisticsResult as t,calculateUniqueValuesCount as s,createUVResult as r,calculateClassBreaks as m,resolveCBResult as f,calculateHistogram as u}from\"../../../statistics/utils.js\";async function d(a){const{attribute:e,features:s}=a,{normalizationType:r,normalizationField:m,minValue:f,maxValue:u,fieldType:d}=e,p=await i({field:e.field,valueExpression:e.valueExpression,normalizationType:r,normalizationField:m,normalizationTotal:e.normalizationTotal,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},s),v=n({normalizationType:r,normalizationField:m,minValue:f,maxValue:u}),c={value:.5,fieldType:d},z=\"esriFieldTypeString\"===d?l({values:p,supportsNullCount:v,percentileParams:c}):o({values:p,minValue:f,maxValue:u,useSampleStdDev:!r,supportsNullCount:v,percentileParams:c});return t(z,\"esriFieldTypeDate\"===d)}async function p(a){const{attribute:e,features:n}=a,l=await i({field:e.field,field2:e.field2,field3:e.field3,fieldDelimiter:e.fieldDelimiter,valueExpression:e.valueExpression,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),o=s(l);return r(o,e.domains,e.returnAllCodedValues,e.fieldDelimiter)}async function v(a){const{attribute:e,features:n}=a,{field:l,normalizationType:o,normalizationField:t,normalizationTotal:s,classificationMethod:r}=e,u=await i({field:l,valueExpression:e.valueExpression,normalizationType:o,normalizationField:t,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n),d=m(u,{field:l,normalizationType:o,normalizationField:t,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numClasses:e.numClasses,minValue:e.minValue,maxValue:e.maxValue});return f(d,r)}async function c(a){const{attribute:e,features:n}=a,{field:l,normalizationType:o,normalizationField:t,normalizationTotal:s,classificationMethod:r}=e,m=await i({field:l,valueExpression:e.valueExpression,normalizationType:o,normalizationField:t,normalizationTotal:s,viewInfoParams:e.viewInfoParams,fieldInfos:e.fieldInfos},n);return u(m,{field:l,normalizationType:o,normalizationField:t,normalizationTotal:s,classificationMethod:r,standardDeviationInterval:e.standardDeviationInterval,numBins:e.numBins,minValue:e.minValue,maxValue:e.maxValue})}async function z(i){const{attribute:n,features:l}=i,{field:o,radius:t,fieldOffset:s,transform:r,spatialReference:m}=n,f=n.size??[0,0],u=a(l??[],r,m,f),{count:d,min:p,max:v,mean:c,stdDev:z}=e(u,t??void 0,s,o,f[0],f[1]);return{count:d,min:p,max:v,avg:c,stddev:z}}export{v as classBreaks,z as heatmapStatistics,c as histogram,d as summaryStatistics,p as uniqueValues};\n"],"names":["p","y","e","t","n","s","l","i","o","a","Math","round","valid","scale","map","d","geometry","r","hasZ","hasM","x","h","$","arguments","length","undefined","Float64Array","_step","f","Number","POSITIVE_INFINITY","c","NEGATIVE_INFINITY","m","u","_iterator","_createForOfIteratorHelper","done","_step$value","value","attributes","max","I","min","g","j","err","mean","stddev","mid","count","stdDev","sqrt","_x","_x2","_I2","apply","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$m","_e2","wrap","_context","prev","next","abrupt","field","field2","field3","fieldDelimiter","valueExpression","normalizationType","normalizationField","normalizationTotal","viewInfoParams","sent","arcadeUtils","t0","hasGeometryOperations","enableGeometryOperations","createFunction","getViewInfo","viewingMode","spatialReference","fieldInfos","declaredClass","fields","forEach","_objectSpread","layer","createExecContext","executeFunction","concat","isFinite","parseFloat","push","stop","_d","v","z","attribute","features","minValue","maxValue","fieldType","values","supportsNullCount","percentileParams","useSampleStdDev","_p","_callee2","_context2","domains","returnAllCodedValues","_x3","_v","_callee3","_context3","classificationMethod","standardDeviationInterval","numClasses","_x4","_c","_callee4","_context4","numBins","_x5","_z","_callee5","_n$size","_e","_context5","radius","fieldOffset","transform","size","avg"],"sourceRoot":""}