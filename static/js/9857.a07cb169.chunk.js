"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[9857],{94931:function(e,t,n){n.d(t,{Z:function(){return z}});var i,r=n(93433),a=n(74165),l=n(1413),s=n(15861),o=n(15671),u=n(43144),c=n(60136),p=n(29388),f=n(27366),y=n(51508),d=n(43404),v=n(84652),h=n(32718),b=n(49861),m=n(89125),g=n(27135),_=n(38511),V=n(69912),k=n(31201),w=n(25243),Z=n(37270),x=n(30505),I=n(65336),S=n(81451),q=n(17364),F=n(87125),C=n(819),E="percent-of-total",j="field",O=new d.X({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:E,esriNormalizeByField:j}),B=(0,w.se)(S.Z),U=i=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._compiledValueExpression={valueExpression:null,compiledFunction:null},i.backgroundFillSymbol=null,i.classBreakInfos=null,i.defaultLabel=null,i.defaultSymbol=null,i.field=null,i.isMaxInclusive=!0,i.legendOptions=null,i.normalizationField=null,i.normalizationTotal=null,i.type="class-breaks",i.valueExpression=null,i.valueExpressionTitle=null,i._set("classBreakInfos",[]),i}return(0,u.Z)(n,[{key:"readClassBreakInfos",value:function(e,t,n){if(Array.isArray(e)){var i=t.minValue;return e.map((function(e){var t=new S.Z;return t.read(e,n),null==t.minValue&&(t.minValue=i),null==t.maxValue&&(t.maxValue=t.minValue),i=t.maxValue,t}))}}},{key:"writeClassBreakInfos",value:function(e,t,n,i){var r=e.map((function(e){return e.write({},i)}));this._areClassBreaksConsecutive()&&r.forEach((function(e){return delete e.classMinValue})),t[n]=r}},{key:"castField",value:function(e){return null==e?e:"function"==typeof e?(h.Z.getLogger(this).error(".field: field must be a string value"),null):(0,w.Zs)(e)}},{key:"minValue",get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}},{key:"normalizationType",get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,n=null!=this.normalizationTotal;return t||n?(e=t&&j||n&&E||null,t&&n&&h.Z.getLogger(this).warn("warning: both normalizationField and normalizationTotal are set!")):e!==j&&e!==E||(e=null),e},set:function(e){this._set("normalizationType",e)}},{key:"addClassBreakInfo",value:function(e,t,n){var i;i="number"==typeof e?new S.Z({minValue:e,maxValue:t,symbol:(0,y.se)(n)}):B((0,v.d9)(e)),this.classBreakInfos.push(i),1===this.classBreakInfos.length&&this.notifyChange("minValue")}},{key:"removeClassBreakInfo",value:function(e,t){for(var n=this.classBreakInfos.length,i=0;i<n;i++){var r=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(r[0]===e&&r[1]===t){this.classBreakInfos.splice(i,1);break}}}},{key:"getBreakIndex",value:function(e,t){return!this.valueExpression||null!=t&&null!=t.arcade||h.Z.getLogger(this).warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}},{key:"getClassBreakInfo",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n,e.t0=!this.valueExpression||null!=n&&null!=n.arcade,e.t0){e.next=11;break}return e.t1=l.Z,e.t2=(0,l.Z)({},i),e.t3={},e.next=8,(0,C.LC)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},i=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return r=this.getBreakIndex(t,i),e.abrupt("return",-1!==r?this.classBreakInfos[r]:null);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||null!=t&&null!=t.arcade){var n=this.getBreakIndex(e,t);return n>-1?this.classBreakInfos[n].symbol:this.defaultSymbol}h.Z.getLogger(this).error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i,r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n,!this.valueExpression||null!=n&&null!=n.arcade){e.next=11;break}return e.next=4,(0,C.LC)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:i=(0,l.Z)((0,l.Z)({},i),{},{arcade:r});case 11:return o=this.getBreakIndex(t,i),e.abrupt("return",o>-1?this.classBreakInfos[o].symbol:this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e=[];return this.classBreakInfos.forEach((function(t){t.symbol&&e.push(t.symbol)})),this.defaultSymbol&&e.push(this.defaultSymbol),e}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),n="".concat(this.normalizationField,".").concat(this.normalizationType,".").concat(this.normalizationTotal);return"".concat(e,".").concat(t,".").concat(this.classBreakInfos.reduce((function(e,t){return e+t.getMeshHash()}),""),".").concat(n,".").concat(this.field,".").concat(this.valueExpression)}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"clone",value:function(){return new i({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:(0,v.d9)(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:(0,v.d9)(this.visualVariables),legendOptions:(0,v.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}},{key:"collectRequiredFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[].concat((0,r.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[(0,Z.io)(t,n,this.valueExpression)]),(0,Z.AB)(t,n,this.field),(0,Z.AB)(t,n,this.normalizationField),e.next=5,Promise.all(i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBreakIndexForExpression",value:function(e,t){var n=null!==t&&void 0!==t?t:{},i=n.viewingMode,r=n.scale,a=n.spatialReference,l=n.arcade,s=this.valueExpression,o=this._compiledValueExpression.valueExpression===s?this._compiledValueExpression.compiledFunction:null,u=l.arcadeUtils;if(!o){var c=u.createSyntaxTree(s);o=u.createFunction(c),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=s;var p=u.executeFunction(o,u.createExecContext(e,u.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._getBreakIndexfromInfos(p)}},{key:"_getBreakIndexForField",value:function(e){var t=this.field,n=e.attributes,i=this.normalizationType,r=parseFloat(n[t]);if(i){var a=this.normalizationTotal,l=parseFloat(this.normalizationField?n[this.normalizationField]:void 0);if("log"===i)r=Math.log(r)*Math.LOG10E;else if(i!==E||null==a||isNaN(a)){if(i===j&&!isNaN(l)){if(isNaN(r)||isNaN(l))return-1;r/=l}}else r=r/a*100}return this._getBreakIndexfromInfos(r)}},{key:"_getBreakIndexfromInfos",value:function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var n=0;n<this.classBreakInfos.length;n++){var i=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return n}return-1}},{key:"_areClassBreaksConsecutive",value:function(){for(var e=this.classBreakInfos,t=e.length,n=1;n<t;n++)if(e[n-1].maxValue!==e[n].minValue)return!1;return!0}}]),n}((0,I.W)(x.Z));(0,f._)([(0,b.Cb)(q.KK)],U.prototype,"backgroundFillSymbol",void 0),(0,f._)([(0,b.Cb)({type:[S.Z]})],U.prototype,"classBreakInfos",void 0),(0,f._)([(0,_.r)("classBreakInfos")],U.prototype,"readClassBreakInfos",null),(0,f._)([(0,k.c)("classBreakInfos")],U.prototype,"writeClassBreakInfos",null),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"defaultLabel",void 0),(0,f._)([(0,b.Cb)(q.Gn)],U.prototype,"defaultSymbol",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"field",void 0),(0,f._)([(0,m.p)("field")],U.prototype,"castField",null),(0,f._)([(0,b.Cb)({type:Boolean})],U.prototype,"isMaxInclusive",void 0),(0,f._)([(0,b.Cb)({type:F.I,json:{write:!0}})],U.prototype,"legendOptions",void 0),(0,f._)([(0,b.Cb)({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],U.prototype,"minValue",null),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"normalizationField",void 0),(0,f._)([(0,b.Cb)({type:Number,cast:function(e){return(0,w.q9)(e)},json:{write:!0}})],U.prototype,"normalizationTotal",void 0),(0,f._)([(0,b.Cb)({type:O.apiValues,value:null,json:{type:O.jsonValues,read:O.read,write:O.write}})],U.prototype,"normalizationType",null),(0,f._)([(0,g.J)({classBreaks:"class-breaks"})],U.prototype,"type",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"valueExpression",void 0),(0,f._)([(0,b.Cb)({type:String,json:{write:!0}})],U.prototype,"valueExpressionTitle",void 0);var z=U=i=(0,f._)([(0,V.j)("esri.renderers.ClassBreaksRenderer")],U)},30505:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(74165),r=n(15861),a=n(15671),l=n(43144),s=n(60136),o=n(29388),u=n(27366),c=n(43404),p=n(46784),f=n(49861),y=(n(25243),n(63780),n(93169),n(69912)),d=n(25472),v=new c.X({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary",pieChart:"pie-chart"},{ignoreUnknown:!0}),h=function(e){(0,s.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,a.Z)(this,n),(i=t.call(this,e)).authoringInfo=null,i.type=null,i}return(0,l.Z)(n,[{key:"getRequiredFields",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.collectRequiredFields){e.next=2;break}return e.abrupt("return",[]);case 2:return n=new Set,e.next=5,this.collectRequiredFields(n,t);case 5:return e.abrupt("return",Array.from(n).sort());case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){}},{key:"getSymbolAsync",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){return[]}},{key:"getAttributeHash",value:function(){return JSON.stringify(this)}},{key:"getMeshHash",value:function(){return JSON.stringify(this)}}]),n}(p.wq);(0,u._)([(0,f.Cb)({type:d.Z,json:{write:!0}})],h.prototype,"authoringInfo",void 0),(0,u._)([(0,f.Cb)({type:v.apiValues,readOnly:!0,json:{type:v.jsonValues,read:!1,write:{writer:v.write,ignoreOrigin:!0}}})],h.prototype,"type",void 0);var b=h=(0,u._)([(0,y.j)("esri.renderers.Renderer")],h)},28189:function(e,t,n){n.d(t,{Z:function(){return te}});var i=n(93433),r=n(37762),a=n(74165),l=n(1413),s=n(15861),o=n(15671),u=n(43144),c=n(60136),p=n(29388),f=n(29439),y=n(27366),d=n(51508),v=n(10064),h=n(84652),b=n(32718),m=n(18202),g=n(94172),_=n(49861),V=n(89125),k=n(27135),w=n(38511),Z=n(69912),x=n(31201),I=n(48732),S=n(25243),q=n(37270),F=n(7575),C=n(30505),E=n(65336),j=n(17364),O=n(87125),B=n(11582),U=n(46784),z=n(63780),T=(n(93169),function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).value=null,i.value2=null,i.value3=null,i}return(0,u.Z)(n)}((0,B.J)(U.wq)));(0,y._)([(0,_.Cb)(j.GY)],T.prototype,"value",void 0),(0,y._)([(0,_.Cb)(j.GY)],T.prototype,"value2",void 0),(0,y._)([(0,_.Cb)(j.GY)],T.prototype,"value3",void 0);var G=T=(0,y._)([(0,Z.j)("esri.renderers.support.UniqueValue")],T),N=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).description=null,i.label=null,i.symbol=null,i.values=null,i}return(0,u.Z)(n,[{key:"castValues",value:function(e){if(null==e)return null;var t=typeof(e=Array.isArray(e)?e:[e])[0];return"string"===t||"number"===t?e.map((function(e){return new G({value:e})})):"object"===t?e[0]instanceof G?e:e.map((function(e){return new G(e)})):null}}]),n}((0,B.J)(U.wq));(0,y._)([(0,_.Cb)({type:String,json:{write:!0}})],N.prototype,"description",void 0),(0,y._)([(0,_.Cb)({type:String,json:{write:!0}})],N.prototype,"label",void 0),(0,y._)([(0,_.Cb)(j.Gn)],N.prototype,"symbol",void 0),(0,y._)([(0,_.Cb)({type:[G],json:{type:[[String]],read:{reader:function(e){return e?e.map((function(e){return new G({value:e[0],value2:e[1],value3:e[2]})})):null}},write:{writer:function(e,t){var n,i=[],a=(0,r.Z)(e);try{for(a.s();!(n=a.n()).done;){var l=n.value,s=[l.value,l.value2,l.value3].filter(z.pC).map((function(e){return e.toString()}));i.push(s)}}catch(o){a.e(o)}finally{a.f()}t.values=i}}}})],N.prototype,"values",void 0),(0,y._)([(0,V.p)("values")],N.prototype,"castValues",null);var M=N=(0,y._)([(0,Z.j)("esri.renderers.support.UniqueValueClass")],N),D=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e)).heading=null,i.classes=null,i}return(0,u.Z)(n)}((0,B.J)(U.wq));(0,y._)([(0,_.Cb)({type:String,json:{write:!0}})],D.prototype,"heading",void 0),(0,y._)([(0,_.Cb)({type:[M],json:{write:!0}})],D.prototype,"classes",void 0);var A,R=D=(0,y._)([(0,Z.j)("esri.renderers.support.UniqueValueGroup")],D),L=n(62328),H=n(819),P=n(53283),J=n(38048),W=n(80045),Y="esri.renderers.UniqueValueRenderer",K=b.Z.getLogger(Y),X="uvInfos-watcher",$="uvGroups-watcher",Q=(0,S.se)(L.Z);var ee=A=function(e){(0,c.Z)(n,e);var t=(0,p.Z)(n);function n(e){var i;return(0,o.Z)(this,n),(i=t.call(this,e))._valueInfoMap={},i._isDefaultSymbolDerived=!1,i._isInfosSource=null,i.type="unique-value",i.backgroundFillSymbol=null,i.orderByClassesEnabled=!1,i.valueExpressionTitle=null,i.legendOptions=null,i.defaultLabel=null,i.portal=null,i.styleOrigin=null,i.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var n=!1,i={type:"collection",added:[],removed:[],changed:[],unchanged:[]},r=function(r){var a=e.find((function(e){return e.value===t[r].value}));a?(0,I.Hg)(a,t[r])?(i.changed.push({type:"complete",oldValue:a,newValue:t[r]}),n=!0):i.unchanged.push({oldValue:a,newValue:t[r]}):(i.added.push(t[r]),n=!0)},a=0;a<t.length;a++)r(a);for(var l=function(r){t.find((function(t){return t.value===e[r].value}))||(i.removed.push(e[r]),n=!0)},s=0;s<e.length;s++)l(s);return n?i:void 0}}},i._set("uniqueValueInfos",[]),i._set("uniqueValueGroups",[]),i}return(0,u.Z)(n,[{key:"_cache",get:function(){return{compiledFunc:null}}},{key:"field",set:function(e){this._set("field",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"castField",value:function(e){return null==e||"function"==typeof e?e:(0,S.Zs)(e)}},{key:"writeField",value:function(e,t,n,i){"string"==typeof e?t[n]=e:i&&i.messages?i.messages.push(new v.Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):K.error(".field: cannot write field to JSON since it's not a string value")}},{key:"field2",set:function(e){this._set("field2",e),this._updateFieldDelimiter(),this._updateUniqueValues()}},{key:"field3",set:function(e){this._set("field3",e),this._updateUniqueValues()}},{key:"valueExpression",set:function(e){this._set("valueExpression",e),this._updateUniqueValues()}},{key:"defaultSymbol",set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}},{key:"fieldDelimiter",set:function(e){this._set("fieldDelimiter",e),this._updateUniqueValues()}},{key:"readPortal",value:function(e,t,n){return n.portal||F.Z.getDefault()}},{key:"readStyleOrigin",value:function(e,t,n){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){var i=(0,P.f)(t.styleUrl,n);return Object.freeze({styleUrl:i})}}},{key:"writeStyleOrigin",value:function(e,t,n,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=(0,P.t)(e.styleUrl,i))}},{key:"uniqueValueGroups",set:function(e){this.styleOrigin?K.error("#uniqueValueGroups=","Cannot modify unique value groups of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueGroups",e),this._updateInfosFromGroups(),this._isInfosSource=!1,this._watchUniqueValueGroups())}},{key:"uniqueValueInfos",set:function(e){this.styleOrigin?K.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"addUniqueValueInfo",value:function(e,t){var n,i;this.styleOrigin?K.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(i="object"==typeof e?Q(e):new L.Z({value:e,symbol:(0,d.se)(t)}),null!==(n=this.uniqueValueInfos)&&void 0!==n&&n.push(i),this._valueInfoMap[i.value]=i,this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos())}},{key:"removeUniqueValueInfo",value:function(e){if(this.styleOrigin)K.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else{var t=this.uniqueValueInfos;if(t)for(var n=0;n<t.length;n++)if(t[n].value===e+""){delete this._valueInfoMap[e],t.splice(n,1);break}this._updateGroupsFromInfos(),this._isInfosSource=!0,this._watchUniqueValueInfos()}}},{key:"getUniqueValueInfo",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n,e.t0=!this.valueExpression||null!=n&&null!=n.arcade,e.t0){e.next=11;break}return e.t1=l.Z,e.t2=(0,l.Z)({},i),e.t3={},e.next=8,(0,H.LC)();case 8:e.t4=e.sent,e.t5={arcade:e.t4},i=(0,e.t1)(e.t2,e.t3,e.t5);case 11:return e.abrupt("return",this._getUniqueValueInfo(t,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbol",value:function(e,t){if(!this.valueExpression||null!=t&&null!=t.arcade){var n=this._getUniqueValueInfo(e,t);return n&&n.symbol||this.defaultSymbol}K.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")}},{key:"getSymbolAsync",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i,r,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n,!this.valueExpression||null!=i&&null!=i.arcade){e.next=11;break}return e.next=4,(0,H.LC)();case 4:if(r=e.sent,s=r.arcadeUtils,e.t0=s.hasGeometryOperations(this.valueExpression),!e.t0){e.next=10;break}return e.next=10,s.enableGeometryOperations();case 10:i=(0,l.Z)((0,l.Z)({},i),{},{arcade:r});case 11:return o=this._getUniqueValueInfo(t,i),e.abrupt("return",o&&o.symbol||this.defaultSymbol);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSymbols",value:function(){var e,t,n=[],i=(0,r.Z)(null!==(e=this.uniqueValueInfos)&&void 0!==e?e:[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.symbol&&n.push(a.symbol)}}catch(l){i.e(l)}finally{i.f()}return this.defaultSymbol&&n.push(this.defaultSymbol),n}},{key:"getAttributeHash",value:function(){return this.visualVariables&&this.visualVariables.reduce((function(e,t){return e+t.getAttributeHash()}),"")}},{key:"getMeshHash",value:function(){var e,t=JSON.stringify(this.backgroundFillSymbol),n=JSON.stringify(this.defaultSymbol),i=null===(e=this.uniqueValueInfos)||void 0===e?void 0:e.reduce((function(e,t){return e+t.getMeshHash()}),"");return"".concat(t,".").concat(n,".").concat(i,".","".concat(this.field,".").concat(this.field2,".").concat(this.field3,".").concat(this.fieldDelimiter),".").concat(this.valueExpression)}},{key:"clone",value:function(){var e=new A({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:(0,h.d9)(this.defaultSymbol),orderByClassesEnabled:this.orderByClassesEnabled,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:(0,h.d9)(this.visualVariables),legendOptions:(0,h.d9)(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:(0,h.d9)(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=(0,h.d9)(this.uniqueValueInfos),n=(0,h.d9)(this.uniqueValueGroups);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze((0,h.d9)(this.styleOrigin))),Object.freeze(t),Object.freeze(n)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e._set("uniqueValueGroups",n),e._isInfosSource=this._isInfosSource,e._watchUniqueValueInfosAndGroups(),e}},{key:"arcadeRequired",get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}},{key:"collectRequiredFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[this.collectVVRequiredFields(t,n),this.collectSymbolFields(t,n)],e.next=3,Promise.all(i);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"collectSymbolFields",value:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(t,n){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[].concat((0,i.Z)(this.getSymbols().map((function(e){return e.collectRequiredFields(t,n)}))),[(0,q.io)(t,n,this.valueExpression)]),(0,q.AB)(t,n,this.field),(0,q.AB)(t,n,this.field2),(0,q.AB)(t,n,this.field3),e.next=6,Promise.all(r);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"populateFromStyle",value:function(){var e=this;return(0,J.n2)(this.styleOrigin,{portal:this.portal}).then((function(t){var n,i=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach((function(n){var r=new W.Z({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:n.name});e.defaultSymbol||n.name!==t.data.defaultItem||(e.defaultSymbol=r,e._isDefaultSymbolDerived=!0);var a=new L.Z({value:n.name,symbol:r});i.push(a),e._valueInfoMap[n.name]=a})),e._set("uniqueValueInfos",Object.freeze(i)),e._updateGroupsFromInfos(!0),e._isInfosSource=null,e._watchUniqueValueInfos(),!e.defaultSymbol&&null!==(n=e.uniqueValueInfos)&&void 0!==n&&n.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e}))}},{key:"_updateFieldDelimiter",value:function(){this.field&&this.field2&&!this.fieldDelimiter&&this._set("fieldDelimiter",",")}},{key:"_updateUniqueValues",value:function(){null!=this._isInfosSource&&(this._isInfosSource?this._updateGroupsFromInfos():this._updateInfosFromGroups())}},{key:"_updateValueInfoMap",value:function(){this._valueInfoMap={};var e=this.uniqueValueInfos;if(e){var t,n=(0,r.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;this._valueInfoMap[i.value+""]=i}}catch(a){n.e(a)}finally{n.f()}}}},{key:"_watchUniqueValueInfosAndGroups",value:function(){this._watchUniqueValueInfos(),this._watchUniqueValueGroups()}},{key:"_watchUniqueValueInfos",value:function(){var e=this;this.removeHandles(X);var t=this.uniqueValueInfos;if(t){var n,i=[],a=(0,r.Z)(t);try{var l=function(){var t=n.value;i.push((0,g.YP)((function(){return{symbol:t.symbol,value:t.value,label:t.label,description:t.description}}),(function(t,n){t!==n&&(e._updateGroupsFromInfos(),e._isInfosSource=!0)}),{sync:!0}))};for(a.s();!(n=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}this.addHandles(i,X)}}},{key:"_watchUniqueValueGroups",value:function(){var e=this;this.removeHandles($);var t=this.uniqueValueGroups;if(t){var n,i=[],a=(0,r.Z)(t);try{var l=function(){var t,a=n.value;i.push((0,g.YP)((function(){return{classes:a.classes}}),(function(t,n){t!==n&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}));var l,s=(0,r.Z)(null!==(t=a.classes)&&void 0!==t?t:[]);try{var o=function(){var t=l.value;i.push((0,g.YP)((function(){return{symbol:t.symbol,values:t.values,label:t.label,description:t.description}}),(function(t,n){t!==n&&(e._updateInfosFromGroups(),e._isInfosSource=!1)}),{sync:!0}))};for(s.s();!(l=s.n()).done;)o()}catch(u){s.e(u)}finally{s.f()}};for(a.s();!(n=a.n()).done;)l()}catch(s){a.e(s)}finally{a.f()}this.addHandles(i,$)}}},{key:"_updateInfosFromGroups",value:function(){if(!this.uniqueValueGroups)return this._set("uniqueValueInfos",null),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var e=[],t=this.field,n=this.field2,i=this.field3,a=this.fieldDelimiter,l=this.uniqueValueGroups,s=this.valueExpression;if(!t&&!s)return this._set("uniqueValueInfos",e),this._updateValueInfoMap(),void this._watchUniqueValueInfos();var o,u=!(!t||!n),c=(0,r.Z)(l);try{for(c.s();!(o=c.n()).done;){var p,f,y=o.value,d=(0,r.Z)(null!==(p=y.classes)&&void 0!==p?p:[]);try{for(d.s();!(f=d.n()).done;){var v,h=f.value,b=h.symbol,m=h.label,g=h.values,_=h.description,V=(0,r.Z)(null!==g&&void 0!==g?g:[]);try{for(V.s();!(v=V.n()).done;){var k=v.value,w=k.value,Z=k.value2,x=k.value3,I=[w];n&&I.push(Z),i&&I.push(x);var S=u?I.join(a||""):I[0];e.push(new L.Z({symbol:b,label:m,value:S,description:_}))}}catch(q){V.e(q)}finally{V.f()}}}catch(q){d.e(q)}finally{d.f()}}}catch(q){c.e(q)}finally{c.f()}this._set("uniqueValueInfos",e),this._updateValueInfoMap(),this._watchUniqueValueInfos()}},{key:"_updateGroupsFromInfos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.uniqueValueInfos)return this._set("uniqueValueGroups",null),void this._watchUniqueValueGroups();var t=this.field,n=this.field2,i=this.valueExpression,r=this.fieldDelimiter,a=this.uniqueValueInfos;if(!t&&!i||!a.length)return this._set("uniqueValueGroups",[]),void this._watchUniqueValueGroups();var l=!(!t||!n),s=a.map((function(e){var t,n=e.symbol,i=e.label,a=e.value,s=e.description,o=l?(null===a||void 0===a||null===(t=a.toString())||void 0===t?void 0:t.split(r||""))||[]:[a],u=(0,f.Z)(o,3),c=u[0],p=u[1],y=u[2];return new M({symbol:n,label:i,description:s,values:[new G({value:c,value2:p,value3:y})]})})),o=[new R({classes:s})];e&&Object.freeze(o),this._set("uniqueValueGroups",o),this._watchUniqueValueGroups()}},{key:"_getUniqueValueInfo",value:function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}},{key:"_getUnqiueValueInfoForExpression",value:function(e,t){var n=null!==t&&void 0!==t?t:{},i=n.viewingMode,r=n.scale,a=n.spatialReference,l=n.arcade,s=this._cache.compiledFunc,o=l.arcadeUtils;if(!s){var u=o.createSyntaxTree(this.valueExpression);s=o.createFunction(u),this._cache.compiledFunc=s}var c=o.executeFunction(s,o.createExecContext(e,o.getViewInfo({viewingMode:i,scale:r,spatialReference:a})));return this._valueInfoMap[c+""]}},{key:"_getUnqiueValueInfoForFields",value:function(e){var t,n=this.field,i=e.attributes;if("function"!=typeof n&&this.field2){var r=this.field2,a=this.field3,l=[];n&&l.push(i[n]),r&&l.push(i[r]),a&&l.push(i[a]),t=l.join(this.fieldDelimiter||"")}else"function"==typeof n?t=n(e):n&&(t=i[n]);return this._valueInfoMap[t+""]}}],[{key:"fromPortalStyle",value:function(e,t){var n=new A(t&&t.properties);n._set("styleOrigin",Object.freeze({styleName:e})),n._set("portal",t&&t.portal||F.Z.getDefault());var i=n.populateFromStyle();return i.catch((function(t){K.error("#fromPortalStyle('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style name",t)})),i}},{key:"fromStyleUrl",value:function(e,t){var n=new A(t&&t.properties);n._set("styleOrigin",Object.freeze({styleUrl:e}));var i=n.populateFromStyle();return i.catch((function(t){K.error("#fromStyleUrl('".concat(e,"'[, ...])"),"Failed to create unique value renderer from style URL",t)})),i}}]),n}((0,E.W)(C.Z));(0,y._)([(0,_.Cb)({readOnly:!0})],ee.prototype,"_cache",null),(0,y._)([(0,k.J)({uniqueValue:"unique-value"})],ee.prototype,"type",void 0),(0,y._)([(0,_.Cb)(j.KK)],ee.prototype,"backgroundFillSymbol",void 0),(0,y._)([(0,_.Cb)({value:null,json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],ee.prototype,"field",null),(0,y._)([(0,V.p)("field")],ee.prototype,"castField",null),(0,y._)([(0,x.c)("field")],ee.prototype,"writeField",null),(0,y._)([(0,_.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"field2",null),(0,y._)([(0,_.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"field3",null),(0,y._)([(0,_.Cb)({type:Boolean,json:{name:"drawInClassOrder",default:!1,write:!0,origins:{"web-scene":{write:!1}}}})],ee.prototype,"orderByClassesEnabled",void 0),(0,y._)([(0,_.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"valueExpression",null),(0,y._)([(0,_.Cb)({type:String,json:{write:!0}})],ee.prototype,"valueExpressionTitle",void 0),(0,y._)([(0,_.Cb)({type:O.I,json:{write:!0}})],ee.prototype,"legendOptions",void 0),(0,y._)([(0,_.Cb)({type:String,json:{write:!0}})],ee.prototype,"defaultLabel",void 0),(0,y._)([(0,_.Cb)((0,m.RH)((0,l.Z)({},j.Gn),{json:{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy:function(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],ee.prototype,"defaultSymbol",null),(0,y._)([(0,_.Cb)({type:String,value:null,json:{write:!0}})],ee.prototype,"fieldDelimiter",null),(0,y._)([(0,_.Cb)({type:F.Z,readOnly:!0})],ee.prototype,"portal",void 0),(0,y._)([(0,w.r)("portal",["styleName"])],ee.prototype,"readPortal",null),(0,y._)([(0,_.Cb)({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],ee.prototype,"styleOrigin",void 0),(0,y._)([(0,w.r)("styleOrigin",["styleName","styleUrl"])],ee.prototype,"readStyleOrigin",null),(0,y._)([(0,x.c)("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],ee.prototype,"writeStyleOrigin",null),(0,y._)([(0,_.Cb)({type:[R],json:{read:{source:["uniqueValueGroups","uniqueValueInfos"],reader:function(e,t,n){return(t.uniqueValueGroups||function(e){var t=e.field1,n=e.field2,i=e.field3,r=e.fieldDelimiter,a=e.uniqueValueInfos,l=e.valueExpression,s=!(!t||!n);return[{classes:(null!==a&&void 0!==a?a:[]).map((function(e){var a,o=e.symbol,u=e.label,c=e.value,p=e.description,y=s?(null===c||void 0===c||null===(a=c.toString())||void 0===a?void 0:a.split(r||""))||[]:[c],d=(0,f.Z)(y,3),v=d[0],h=d[1],b=d[2],m=[];return(t||l)&&m.push(v),n&&m.push(h),i&&m.push(b),{symbol:o,label:u,values:[m],description:p}}))}]}(t)).map((function(e){return R.fromJSON(e,n)}))}},write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ee.prototype,"uniqueValueGroups",null),(0,y._)([(0,_.Cb)({type:[L.Z],json:{read:!1,write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],ee.prototype,"uniqueValueInfos",null);var te=ee=A=(0,y._)([(0,Z.j)(Y)],ee)},65336:function(e,t,n){n.d(t,{W:function(){return H}});var i=n(74165),r=n(15861),a=n(37762),l=n(15671),s=n(43144),o=n(60136),u=n(29388),c=n(27366),p=n(49861),f=n(25243),y=(n(63780),n(93169),n(38511)),d=n(69912),v=n(31201),h=n(37270);var b,m=/^hash\(\$feature\['((\\'|[^'])+)'\]\) \* 8\.381e-8$/,g=n(11752),_=n(61120),V=n(4895),k=n(57203),w=b=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).type="color",i.normalizationField=null,i}return(0,s.Z)(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,g.Z)((0,_.Z)(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(V.Z);(0,c._)([(0,p.Cb)({readOnly:!0})],w.prototype,"cache",null),(0,c._)([(0,p.Cb)({type:["color"],json:{type:["colorInfo"]}})],w.prototype,"type",void 0),(0,c._)([(0,p.Cb)({type:String,json:{write:!0}})],w.prototype,"normalizationField",void 0),(0,c._)([(0,p.Cb)({type:[k.Z],json:{write:!0}})],w.prototype,"stops",null);var Z,x=w=b=(0,c._)([(0,d.j)("esri.renderers.visualVariables.ColorVariable")],w),I=n(46784),S=n(81219),q=Z=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).label=null,i.opacity=null,i.value=null,i}return(0,s.Z)(n,[{key:"readOpacity",value:function(e,t){return(0,S.b)(t.transparency)}},{key:"writeOpacity",value:function(e,t,n){t[n]=(0,S.a)(e)}},{key:"clone",value:function(){return new Z({label:this.label,opacity:this.opacity,value:this.value})}}]),n}(I.wq);(0,c._)([(0,p.Cb)({type:String,json:{write:!0}})],q.prototype,"label",void 0),(0,c._)([(0,p.Cb)({type:Number,json:{type:f.z8,write:{target:"transparency"}}})],q.prototype,"opacity",void 0),(0,c._)([(0,y.r)("opacity",["transparency"])],q.prototype,"readOpacity",null),(0,c._)([(0,v.c)("opacity")],q.prototype,"writeOpacity",null),(0,c._)([(0,p.Cb)({type:Number,json:{write:!0}})],q.prototype,"value",void 0);var F,C=q=Z=(0,c._)([(0,d.j)("esri.renderers.visualVariables.support.OpacityStop")],q),E=F=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,l.Z)(this,n),(i=t.call(this,e)).type="opacity",i.normalizationField=null,i}return(0,s.Z)(n,[{key:"cache",get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"stops",set:function(e){e&&Array.isArray(e)&&(e=e.filter((function(e){return!!e}))).sort((function(e,t){return e.value-t.value})),this._set("stops",e)}},{key:"clone",value:function(){return new F({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map((function(e){return e.clone()})),legendOptions:this.legendOptions&&this.legendOptions.clone()})}},{key:"getAttributeHash",value:function(){return"".concat((0,g.Z)((0,_.Z)(n.prototype),"getAttributeHash",this).call(this),"-").concat(this.normalizationField)}},{key:"_interpolateData",value:function(){return this.stops&&this.stops.map((function(e){return e.value||0}))}}]),n}(V.Z);(0,c._)([(0,p.Cb)({readOnly:!0})],E.prototype,"cache",null),(0,c._)([(0,p.Cb)({type:["opacity"],json:{type:["transparencyInfo"]}})],E.prototype,"type",void 0),(0,c._)([(0,p.Cb)({type:String,json:{write:!0}})],E.prototype,"normalizationField",void 0),(0,c._)([(0,p.Cb)({type:[C],json:{write:!0}})],E.prototype,"stops",null);var j=E=F=(0,c._)([(0,d.j)("esri.renderers.visualVariables.OpacityVariable")],E),O=n(53015),B=n(17590),U=n(7138),z=n(43404),T=n(32718),G=n(51370),N={color:x,size:B.Z,opacity:j,rotation:O.Z},M=new z.X({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),D=/^\[([^\]]+)\]$/i,A=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments)).colorVariables=null,e.opacityVariables=null,e.rotationVariables=null,e.sizeVariables=null,e}return(0,s.Z)(n,[{key:"visualVariables",set:function(e){if(this._resetVariables(),(e=e&&e.filter((function(e){return!!e})))&&e.length){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;switch(i.type){case"color":this.colorVariables.push(i);break;case"opacity":this.opacityVariables.push(i);break;case"rotation":this.rotationVariables.push(i);break;case"size":this.sizeVariables.push(i)}}}catch(l){n.e(l)}finally{n.f()}this.sizeVariables.length&&this.sizeVariables.some((function(e){return!!e.target}))&&e.sort((function(e,t){return e.target===t.target?0:e.target?1:-1}));for(var r=0;r<e.length;r++)e[r].index=r;this._set("visualVariables",e)}else this._set("visualVariables",e)}},{key:"readVariables",value:function(e,t,n){var i=this,r=t.rotationExpression,a=t.rotationType,l=r&&r.match(D),s=l&&l[1];if(s&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:a,field:s})),e)return e.map((function(e){var t=M.read(e.type),r=N[t];r||(T.Z.getLogger(i).warn("Unknown variable type: ".concat(t)),n&&n.messages&&n.messages.push(new G.Z("visual-variable:unsupported","visualVariable of type '".concat(t,"' is not supported"),{definition:e,context:n})));var a=new r;return a.read(e,n),a}))}},{key:"writeVariables",value:function(e,t){var n,i=[],r=(0,a.Z)(e);try{for(r.s();!(n=r.n()).done;){var l=n.value.toJSON(t);l&&i.push(l)}}catch(s){r.e(s)}finally{r.f()}return i}},{key:"_resetVariables",value:function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}}]),n}(U.Z);(0,c._)([(0,p.Cb)()],A.prototype,"visualVariables",null);var R=A=(0,c._)([(0,d.j)("esri.renderers.visualVariables.VisualVariableFactory")],A),L={base:V.Z,key:"type",typeMap:{opacity:j,color:x,rotation:O.Z,size:B.Z}},H=function(e){var t=function(e){(0,o.Z)(n,e);var t=(0,u.Z)(n);function n(){var e;return(0,l.Z)(this,n),(e=t.apply(this,arguments))._vvFactory=new R,e}return(0,s.Z)(n,[{key:"visualVariables",set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)}},{key:"readVisualVariables",value:function(e,t,n){return this._vvFactory.readVariables(e,t,n)}},{key:"writeVisualVariables",value:function(e,t,n,i){t[n]=this._vvFactory.writeVariables(e,i)}},{key:"arcadeRequiredForVisualVariables",get:function(){if(!this.visualVariables)return!1;var e,t=(0,a.Z)(this.visualVariables);try{for(t.s();!(e=t.n()).done;){if(e.value.arcadeRequired)return!0}}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"hasVisualVariables",value:function(e,t){return e?this.getVisualVariablesForType(e,t).length>0:this.getVisualVariablesForType("size",t).length>0||this.getVisualVariablesForType("color",t).length>0||this.getVisualVariablesForType("opacity",t).length>0||this.getVisualVariablesForType("rotation",t).length>0}},{key:"getVisualVariablesForType",value:function(e,t){var n=this.visualVariables;return n?n.filter((function(n){return n.type===e&&("string"==typeof t?n.target===t:!1!==t||!n.target)})):[]}},{key:"collectVVRequiredFields",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r,l,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],this.visualVariables&&(r=r.concat(this.visualVariables)),l=(0,a.Z)(r),e.prev=3,l.s();case 5:if((s=l.n()).done){e.next=19;break}if(o=s.value,e.t0=o,!e.t0){e.next=17;break}if(o.field&&(0,h.AB)(t,n,o.field),o.normalizationField&&(0,h.AB)(t,n,o.normalizationField),e.t1=o.valueExpression,!e.t1){e.next=17;break}if(e.t2=P(o.valueExpression,t,n),e.t2){e.next=17;break}return e.next=17,(0,h.io)(t,n,o.valueExpression);case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t3=e.catch(3),l.e(e.t3);case 24:return e.prev=24,l.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,this,[[3,21,24,27]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return(0,c._)([(0,p.Cb)({types:[L],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),(0,c._)([(0,y.r)("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),(0,c._)([(0,v.c)("visualVariables")],t.prototype,"writeVisualVariables",null),t=(0,c._)([(0,d.j)("esri.renderers.mixins.VisualVariablesMixin")],t)};function P(e,t,n){var i=function(e){var t,n;return null!==(t=null===(n=e.match(m))||void 0===n||null===(n=n[1])||void 0===n?void 0:n.replace(/\\'/g,"'"))&&void 0!==t?t:null}(e);return null!=i&&((0,h.AB)(t,n,i),!0)}},81451:function(e,t,n){n.d(t,{Z:function(){return d}});var i,r=n(15671),a=n(43144),l=n(60136),s=n(29388),o=n(27366),u=n(46784),c=n(49861),p=(n(25243),n(63780),n(93169),n(69912)),f=n(17364),y=i=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).description=null,i.label=null,i.minValue=null,i.maxValue=0,i.symbol=null,i}return(0,a.Z)(n,[{key:"clone",value:function(){return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol);return"".concat(this.minValue,".").concat(this.maxValue,".").concat(e)}}]),n}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],y.prototype,"minValue",void 0),(0,o._)([(0,c.Cb)({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],y.prototype,"maxValue",void 0),(0,o._)([(0,c.Cb)(f.Gn)],y.prototype,"symbol",void 0);var d=y=i=(0,o._)([(0,p.j)("esri.renderers.support.ClassBreakInfo")],y)},62328:function(e,t,n){n.d(t,{Z:function(){return d}});var i,r=n(15671),a=n(43144),l=n(60136),s=n(29388),o=n(27366),u=n(46784),c=n(49861),p=(n(25243),n(63780),n(93169),n(69912)),f=n(17364),y=i=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).description=null,i.label=null,i.symbol=null,i.value=null,i}return(0,a.Z)(n,[{key:"clone",value:function(){return new i({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}},{key:"getMeshHash",value:function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return"".concat(this.value,".").concat(e)}}]),n}(u.wq);(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"description",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"label",void 0),(0,o._)([(0,c.Cb)(f.Gn)],y.prototype,"symbol",void 0),(0,o._)([(0,c.Cb)(f.GY)],y.prototype,"value",void 0);var d=y=i=(0,o._)([(0,p.j)("esri.renderers.support.UniqueValueInfo")],y)},17364:function(e,t,n){n.d(t,{GY:function(){return c},Gn:function(){return o},KK:function(){return u}});var i=n(51508),r=n(47492),a=n(42283),l=n(22061),s=n(1030),o={types:i.QT,json:{write:{writer:a.cW},origins:{"web-scene":{types:i.f_,write:{writer:a.cW},read:{reader:(0,r.d)({types:i.f_})}}}}},u={types:{base:l.Z,key:"type",typeMap:{"simple-fill":i.LB.typeMap["simple-fill"],"picture-fill":i.LB.typeMap["picture-fill"],"polygon-3d":i.LB.typeMap["polygon-3d"]}},json:{write:{writer:a.cW},origins:{"web-scene":{type:s.Z,write:{writer:a.cW}}}}},c={cast:function(e){return null==e||"string"==typeof e||"number"==typeof e?e:"".concat(e)},json:{type:String,write:{writer:function(e,t){t.value=null===e||void 0===e?void 0:e.toString()}}}}},53015:function(e,t,n){n.d(t,{Z:function(){return v}});var i,r=n(15671),a=n(43144),l=n(60136),s=n(29388),o=n(27366),u=n(10064),c=n(49861),p=(n(25243),n(63780),n(93169),n(69912)),f=n(31201),y=n(4895),d=i=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).axis=null,i.type="rotation",i.rotationType="geographic",i.valueExpressionTitle=null,i}return(0,a.Z)(n,[{key:"cache",get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}},{key:"writeValueExpressionTitleWebScene",value:function(e,t,n,i){if(i&&i.messages){var r="visualVariables[".concat(this.index,"]");i.messages.push(new u.Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:r+".valueExpressionTitle",context:i}))}}},{key:"clone",value:function(){return new i({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}}]),n}(y.Z);(0,o._)([(0,c.Cb)({readOnly:!0})],d.prototype,"cache",null),(0,o._)([(0,c.Cb)({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],d.prototype,"axis",void 0),(0,o._)([(0,c.Cb)({type:["rotation"],json:{type:["rotationInfo"]}})],d.prototype,"type",void 0),(0,o._)([(0,c.Cb)({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],d.prototype,"rotationType",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:!0}})],d.prototype,"valueExpressionTitle",void 0),(0,o._)([(0,f.c)("web-scene","valueExpressionTitle")],d.prototype,"writeValueExpressionTitleWebScene",null);var v=d=i=(0,o._)([(0,p.j)("esri.renderers.visualVariables.RotationVariable")],d)},57203:function(e,t,n){n.d(t,{Z:function(){return h}});var i,r=n(15671),a=n(43144),l=n(60136),s=n(29388),o=n(27366),u=n(51995),c=n(46784),p=n(49861),f=n(25243),y=(n(63780),n(93169),n(69912)),d=n(31201),v=i=function(e){(0,l.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).color=null,i.label=null,i.value=null,i}return(0,a.Z)(n,[{key:"writeValue",value:function(e,t,n){t[n]=null!==e&&void 0!==e?e:0}},{key:"clone",value:function(){return new i({color:this.color&&this.color.clone(),label:this.label,value:this.value})}}]),n}(c.wq);(0,o._)([(0,p.Cb)({type:u.Z,json:{type:[f.z8],write:!0}})],v.prototype,"color",void 0),(0,o._)([(0,p.Cb)({type:String,json:{write:!0}})],v.prototype,"label",void 0),(0,o._)([(0,p.Cb)({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],v.prototype,"value",void 0),(0,o._)([(0,d.c)("value")],v.prototype,"writeValue",null);var h=v=i=(0,o._)([(0,y.j)("esri.renderers.visualVariables.support.ColorStop")],v)}}]);
//# sourceMappingURL=9857.a07cb169.chunk.js.map