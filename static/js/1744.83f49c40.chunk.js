"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[1744,7945],{48732:function(e,t,r){r.d(t,{Hg:function(){return h},V7:function(){return v},uD:function(){return f}});var n=r(4942),i=r(37762),o=r(7138),a=r(40281),l=r(23879),s=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function u(e){return e instanceof o.Z}function p(e){return e instanceof a.Z?Object.keys(e.items):u(e)?(0,l.vw)(e).keys():e?Object.keys(e):[]}function d(e,t){return e instanceof a.Z?e.items[t]:e[t]}function c(e){return e?e.declaredClass:null}function y(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=p(e),a=p(t);if(0!==o.length||0!==a.length){if(!o.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,f=a.filter((function(e){return!o.includes(e)})),v=o.filter((function(e){return!a.includes(e)})),h=o.filter((function(r){return a.includes(r)&&d(e,r)!==d(t,r)})).concat(f,v).sort(),m=c(e);if(m&&s.includes(m)&&h.length)return{type:"complete",oldValue:e,newValue:t};var b,g=u(e)&&u(t),S=(0,i.Z)(h);try{for(S.s();!(b=S.n()).done;){var w=b.value,_=d(e,w),I=d(t,w),Z=void 0;if((g||"function"!=typeof _&&"function"!=typeof I)&&_!==I&&(null!=_||null!=I)){var x;if(r&&r[w]&&"function"==typeof r[w])Z=null===(x=r[w])||void 0===x?void 0:x.call(r,_,I);else if(_ instanceof Date&&I instanceof Date){if(_.getTime()===I.getTime())continue;Z={type:"complete",oldValue:_,newValue:I}}else Z="object"==typeof _&&"object"==typeof I&&c(_)===c(I)?y(_,I):{type:"complete",oldValue:_,newValue:I};null!=Z&&(null!=l?l.diff[w]=Z:l={type:"partial",diff:(0,n.Z)({},w,Z)})}}}catch(C){S.e(C)}finally{S.f()}return l}}function f(e,t){if(null==e)return!1;var r,n=t.split("."),o=e,a=(0,i.Z)(n);try{for(a.s();!(r=a.n()).done;){var l=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var s=o.diff[l];if(!s)return!1;o=s}}catch(u){a.e(u)}finally{a.f()}return!0}function v(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(f(e,r.value))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}function h(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&c(e)!==c(t)?{type:"complete",oldValue:e,newValue:t}:y(e,t)}},27961:function(e,t,r){r.d(t,{V:function(){return p}});var n=r(15671),i=r(43144),o=r(60136),a=r(29388),l=r(27366),s=r(49861),u=(r(25243),r(63780),r(93169),r(69912));var p=function(e){var t=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return(0,l._)([(0,s.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,l._)([(0,u.j)("esri.layers.mixins.APIKeyMixin")],t)}},6741:function(e,t,r){r.d(t,{O:function(){return C}});var n=r(37762),i=r(1413),o=r(74165),a=r(15861),l=r(15671),s=r(43144),u=r(60136),p=r(29388),d=r(27366),c=r(76200),y=r(77427),f=r(66978),v=r(35995),h=r(49901),m=r(49861),b=(r(25243),r(63780),r(93169),r(38511)),g=r(69912),S=r(25265),w=r(53866),_=r(78952),I=r(25899),Z=r(45948),x=r(73117),C=function(e){var t=function(e){(0,u.Z)(r,e);var t=(0,p.Z)(r);function r(){var e;return(0,l.Z)(this,r),(e=t.apply(this,arguments)).capabilities=void 0,e.copyright=null,e.fullExtent=null,e.legendEnabled=!0,e.spatialReference=null,e.version=void 0,e._allLayersAndTablesMap=null,e}return(0,s.Z)(r,[{key:"readCapabilities",value:function(e,t){var r,n,i=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));if(!i)return{operations:{supportsExportMap:!1,supportsExportTiles:!1,supportsIdentify:!1,supportsQuery:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};var o=this.type,a="tile"!==o&&!!t.supportsDynamicLayers,l=i.includes("query"),s=i.includes("map"),u=!!t.exportTilesAllowed,p=i.includes("tilemap"),d=i.includes("data"),c="tile"!==o&&(!t.tileInfo||a),y="tile"!==o&&(!t.tileInfo||a),f="tile"!==o,v=t.cimVersion&&h.G.parse(t.cimVersion),m=null!==(r=null===v||void 0===v?void 0:v.since(1,4))&&void 0!==r&&r,b=null!==(n=null===v||void 0===v?void 0:v.since(2,0))&&void 0!==n&&n;return{operations:{supportsExportMap:s,supportsExportTiles:u,supportsIdentify:l,supportsQuery:d,supportsTileMap:p},exportMap:s?{supportsArcadeExpressionForLabeling:m,supportsSublayersChanges:f,supportsDynamicLayers:a,supportsSublayerVisibility:c,supportsSublayerDefinitionExpression:y,supportsCIMSymbols:b}:null,exportTiles:u?{maxExportTilesCount:+t.maxExportTilesCount}:null}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=t.hasOwnProperty("capabilities")||t.hasOwnProperty("tables")?10:t.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),r}},{key:"fetchRelatedService",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=this.portalItem)&&(0,x.Fj)(r)){e.next=3;break}return e.abrupt("return",null);case 3:return this._relatedFeatureServicePromise||(this._relatedFeatureServicePromise=r.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},t).then((function(e){var t;return null!==(t=e.find((function(e){return"Feature Service"===e.type})))&&void 0!==t?t:null}),(function(){return null}))),e.next=6,this._relatedFeatureServicePromise;case 6:return n=e.sent,e.abrupt("return",((0,f.k_)(t),n?{itemId:n.id,url:n.url}:null));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchSublayerInfo",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var n,a,l,s,u;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,!(null!==this&&void 0!==this&&this.portalItem&&"tile"===this.type&&"map-layer"===(null===n||void 0===n?void 0:n.type)&&(0,x.Fj)(this.portalItem)&&t.originIdOf("url")<S.s3.SERVICE)){e.next=6;break}return e.next=4,this.fetchRelatedService(r);case 4:(a=e.sent)&&(t.url=(0,v.v_)(a.url,n.mapLayerId.toString()),t.layerItemId=a.itemId);case 6:if(l=t.url,"data-layer"!==n.type){e.next=13;break}return e.next=10,(0,c.default)(l,(0,i.Z)({responseType:"json",query:(0,i.Z)((0,i.Z)({f:"json"},this.customParameters),{},{token:this.apiKey})},r));case 10:s=e.sent.data,e.next=34;break;case 13:if(!(l&&t.originIdOf("url")>S.s3.SERVICE)){e.next=24;break}return e.prev=14,e.next=17,this._fetchAllLayersAndTablesFromService(l);case 17:s=e.sent.get(n.mapLayerId),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(14);case 22:e.next=34;break;case 24:return u=t.id,"map-layer"===(null===n||void 0===n?void 0:n.type)&&(u=n.mapLayerId),e.prev=26,e.next=29,this.fetchAllLayersAndTables(r);case 29:s=e.sent.get(u),e.next=34;break;case 32:e.prev=32,e.t1=e.catch(26);case 34:return e.abrupt("return",s);case 35:case"end":return e.stop()}}),e,this,[[14,20],[26,32]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchAllLayersAndTables",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._fetchAllLayersAndTablesFromService(null===(r=this.parsedUrl)||void 0===r?void 0:r.path,t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_fetchAllLayersAndTablesFromService",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t,r){var a,l,s,u=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load(r);case 2:return this._allLayersAndTablesMap||(this._allLayersAndTablesMap=new Map),a=(0,I.Qc)(t),l=(0,y.s1)(this._allLayersAndTablesMap,null===a||void 0===a?void 0:a.url.path,(function(){return(0,c.default)((0,v.v_)(null===a||void 0===a?void 0:a.url.path,"/layers"),{responseType:"json",query:(0,i.Z)((0,i.Z)({f:"json"},u.customParameters),{},{token:u.apiKey})}).then((function(e){var t,r=new Map,i=(0,n.Z)(e.data.layers);try{for(i.s();!(t=i.n()).done;){var o=t.value;r.set(o.id,o)}}catch(a){i.e(a)}finally{i.f()}return{result:r}}),(function(e){return{error:e}}))})),e.next=7,l;case 7:if(s=e.sent,(0,f.k_)(r),!("result"in s)){e.next=10;break}return e.abrupt("return",s.result);case 10:throw s.error;case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),r}(e);return(0,d._)([(0,m.Cb)({readOnly:!0})],t.prototype,"capabilities",void 0),(0,d._)([(0,b.r)("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),(0,d._)([(0,m.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,d._)([(0,m.Cb)({type:w.Z})],t.prototype,"fullExtent",void 0),(0,d._)([(0,m.Cb)(Z.id)],t.prototype,"id",void 0),(0,d._)([(0,m.Cb)({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),(0,d._)([(0,m.Cb)(Z.C_)],t.prototype,"popupEnabled",void 0),(0,d._)([(0,m.Cb)({type:_.Z})],t.prototype,"spatialReference",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],t.prototype,"version",void 0),(0,d._)([(0,b.r)("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=(0,d._)([(0,g.j)("esri.layers.mixins.ArcGISMapService")],t)}},18870:function(e,t,r){r.d(t,{x:function(){return C}});var n=r(37762),i=r(4942),o=r(15671),a=r(43144),l=r(11752),s=r(61120),u=r(60136),p=r(29388),d=r(27366),c=r(40281),y=r(77178),f=r(10064),v=r(32718),h=r(94172),m=r(49861),b=(r(25243),r(63780),r(93169),r(23879)),g=r(69912),S=r(25265),w=r(77990),_=r(58132),I=v.Z.getLogger("esri.layers.TileLayer");var Z=c.Z.ofType(w.Z);function x(e,t){e&&e.forEach((function(e){t(e),e.sublayers&&e.sublayers.length&&x(e.sublayers,t)}))}var C=function(e){var t=function(e){(0,u.Z)(r,e);var t=(0,p.Z)(r);function r(){var e,n;(0,o.Z)(this,r);for(var a=arguments.length,l=new Array(a),s=0;s<a;s++)l[s]=arguments[s];return(n=t.call.apply(t,[this].concat(l))).allSublayers=new y.Z({getCollections:function(){return[n.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),n.sublayersSourceJSON=(e={},(0,i.Z)(e,S.s3.SERVICE,{}),(0,i.Z)(e,S.s3.PORTAL_ITEM,{}),(0,i.Z)(e,S.s3.WEB_SCENE,{}),(0,i.Z)(e,S.s3.WEB_MAP,{}),e),n.addHandles((0,h.YP)((function(){return n.sublayers}),(function(e,t){return n._handleSublayersChange(e,t)}),h.Z_)),n}return(0,a.Z)(r,[{key:"destroy",value:function(){this.allSublayers.destroy()}},{key:"readSublayers",value:function(e,t){if(t&&e){var r=this.sublayersSourceJSON,n=(0,S.M9)(t.origin);if(!(n<S.s3.SERVICE)&&(r[n]={context:t,visibleLayers:e.visibleLayers||r[n].visibleLayers,layers:e.layers||r[n].layers},!(n>S.s3.SERVICE))){this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);var i=this.createSublayersForOrigin("web-document"),o=i.sublayers,a=i.origin,l=(0,b.vw)(this);l.setDefaultOrigin(a),this._set("sublayers",new Z(o)),l.setDefaultOrigin("user")}}}},{key:"findSublayerById",value:function(e){return this.allSublayers.find((function(t){return t.id===e}))}},{key:"createServiceSublayers",value:function(){return this.createSublayersForOrigin("service").sublayers}},{key:"createSublayersForOrigin",value:function(e){var t,r,i=(0,S.M9)("web-document"===e?"web-map":e),o=S.s3.SERVICE,a=this.sublayersSourceJSON[S.s3.SERVICE].layers,l=this.sublayersSourceJSON[S.s3.SERVICE].context,s=null,u=[S.s3.PORTAL_ITEM,S.s3.WEB_SCENE,S.s3.WEB_MAP].filter((function(e){return e<=i})),p=(0,n.Z)(u);try{for(p.s();!(r=p.n()).done;){var d=r.value,c=this.sublayersSourceJSON[d];(0,_.ac)(c.layers)&&(o=d,a=c.layers,l=c.context,c.visibleLayers&&(s={visibleLayers:c.visibleLayers,context:c.context}))}}catch(M){p.e(M)}finally{p.f()}var y,f=[S.s3.PORTAL_ITEM,S.s3.WEB_SCENE,S.s3.WEB_MAP].filter((function(e){return e>o&&e<=i})),v=null,h=(0,n.Z)(f);try{for(h.s();!(y=h.n()).done;){var m=y.value,b=this.sublayersSourceJSON[m],g=b.layers,I=b.visibleLayers,C=b.context;g&&(v={layers:g,context:C}),I&&(s={visibleLayers:I,context:C})}}catch(M){h.e(M)}finally{h.f()}var k=function(e,t){var r=[],n={};return e?(e.forEach((function(e){var i=new w.Z;if(i.read(e,t),n[i.id]=i,null!=e.parentLayerId&&-1!==e.parentLayerId){var o=n[e.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(i)}else r.unshift(i)})),r):r}(a,l),F=new Map,T=new Set;if(v){var E,O=(0,n.Z)(v.layers);try{for(O.s();!(E=O.n()).done;){var L=E.value;F.set(L.id,L)}}catch(M){O.e(M)}finally{O.f()}}if(null!==(t=s)&&void 0!==t&&t.visibleLayers){var A,D=(0,n.Z)(s.visibleLayers);try{for(D.s();!(A=D.n()).done;){var V=A.value;T.add(V)}}catch(M){D.e(M)}finally{D.f()}}return x(k,(function(e){v&&e.read(F.get(e.id),v.context),s&&e.read({defaultVisibility:T.has(e.id)},s.context)})),{origin:(0,S.x3)(o),sublayers:new Z({items:k})}}},{key:"read",value:function(e,t){(0,l.Z)((0,s.Z)(r.prototype),"read",this).call(this,e,t),this.readSublayers(e,t)}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.removeHandles("sublayers-owner")),e&&(e.forEach((function(e){e.parent=r,e.layer=r})),this.addHandles([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null}))],"sublayers-owner"),"tile"===this.type&&this.addHandles(e.on("before-changes",(function(e){I.error(new f.Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:r})),e.preventDefault()})),"sublayers-owner"))}}]),r}(e);return(0,d._)([(0,m.Cb)({readOnly:!0})],t.prototype,"allSublayers",void 0),(0,d._)([(0,m.Cb)({readOnly:!0,type:c.Z.ofType(w.Z)})],t.prototype,"serviceSublayers",void 0),(0,d._)([(0,m.Cb)({value:null,type:Z,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=(0,d._)([(0,g.j)("esri.layers.mixins.SublayersOwner")],t),t}},87165:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(15671),i=r(43144),o=r(60136),a=r(29388),l=r(27366),s=r(11582),u=r(46784),p=r(49861),d=(r(25243),r(63780),r(93169),r(38511)),c=r(69912),y=r(31201),f=r(66591),v=r(12224),h=function(e){(0,o.Z)(r,e);var t=(0,a.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).id=null,i.name=null,i.domains=null,i.templates=null,i}return(0,i.Z)(r,[{key:"readDomains",value:function(e){for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t[i]=(0,f.im)(e[i])}return t}},{key:"writeDomains",value:function(e,t){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var o,a=i[n];e[a]&&(r[a]=null===(o=e[a])||void 0===o?void 0:o.toJSON())}t.domains=r}}]),r}((0,s.J)(u.wq));(0,l._)([(0,p.Cb)({json:{write:!0}})],h.prototype,"id",void 0),(0,l._)([(0,p.Cb)({json:{write:!0}})],h.prototype,"name",void 0),(0,l._)([(0,p.Cb)({json:{write:!0}})],h.prototype,"domains",void 0),(0,l._)([(0,d.r)("domains")],h.prototype,"readDomains",null),(0,l._)([(0,y.c)("domains")],h.prototype,"writeDomains",null),(0,l._)([(0,p.Cb)({type:[v.Z],json:{write:!0}})],h.prototype,"templates",void 0);var m=h=(0,l._)([(0,c.j)("esri.layers.support.FeatureType")],h)},83040:function(e,t,r){r.d(t,{Z:function(){return S}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),s=r(27366),u=r(43404),p=r(46784),d=r(49861),c=r(25243),y=(r(63780),r(93169),r(27135)),f=r(38511),v=r(69912),h=r(66591),m=r(85249),b=new u.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),g=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(r,[{key:"readDescription",value:function(e,t){var r,n,i=t.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(r=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==r?r:null}},{key:"readValueType",value:function(e,t){var r=t.description,n=null;try{n=r?JSON.parse(r):null}catch(i){}return n?b.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),r}(p.wq);(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],g.prototype,"alias",void 0),(0,s._)([(0,d.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],g.prototype,"defaultValue",void 0),(0,s._)([(0,d.Cb)()],g.prototype,"description",void 0),(0,s._)([(0,f.r)("description")],g.prototype,"readDescription",null),(0,s._)([(0,d.Cb)({types:h.V5,json:{read:{reader:h.im},write:!0}})],g.prototype,"domain",void 0),(0,s._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"editable",void 0),(0,s._)([(0,d.Cb)({type:c.z8,json:{write:!0}})],g.prototype,"length",void 0),(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],g.prototype,"name",void 0),(0,s._)([(0,d.Cb)({type:Boolean,json:{write:!0}})],g.prototype,"nullable",void 0),(0,s._)([(0,y.J)(m.v)],g.prototype,"type",void 0),(0,s._)([(0,d.Cb)()],g.prototype,"valueType",void 0),(0,s._)([(0,f.r)("valueType",["description"])],g.prototype,"readValueType",null),(0,s._)([(0,d.Cb)({type:Boolean,json:{read:!1}})],g.prototype,"visible",void 0);var S=g=n=(0,s._)([(0,v.j)("esri.layers.support.Field")],g)},52410:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(37762),i=r(15671),o=r(43144),a=r(37270);function l(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function s(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,i.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o,u=[],c=(0,n.Z)(t);try{for(c.s();!(r=c.n()).done;){var y=r.value,f=null===y||void 0===y?void 0:y.name,v=d(null===y||void 0===y?void 0:y.name);if(f&&v){var h=p(f);this._fieldsMap.set(f,y),this._fieldsMap.set(h,y),this._normalizedFieldsMap.set(v,y),u.push(h),"date"===(o=y).type||"esriFieldTypeDate"===o.type||"date-only"===o.type||"esriFieldTypeDateOnly"===o.type||"timestamp-offset"===o.type||"esriFieldTypeTimestampOffset"===o.type?(this.dateFields.push(y),this._dateFieldsSet.add(y)):(0,a.H7)(y)&&(this._numericFieldsSet.add(y),this.numericFields.push(y)),l(y)||s(y)||(y.editable=null==y.editable||!!y.editable,y.nullable=null==y.nullable||!!y.nullable)}}}catch(m){c.e(m)}finally{c.f()}u.sort(),this.uid=u.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,n.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;l(r)||s(r)||r.nullable||void 0!==(0,a.os)(r)||this._requiredFields.push(r)}}catch(i){t.e(i)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(p(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(d(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function p(e){return e.trim().toLowerCase()}function d(e){var t,r;return null!==(t=null===(r=(0,a.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},71065:function(e,t,r){r.d(t,{Z:function(){return f}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),s=r(27366),u=r(40281),p=r(46784),d=r(49861),c=(r(25243),r(63780),r(93169),r(69912)),y=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new u.Z,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(p.wq);(0,s._)([(0,d.Cb)({type:String,json:{write:!0}})],y.prototype,"floorField",void 0),(0,s._)([(0,d.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),(0,s._)([(0,d.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0);var f=y=n=(0,s._)([(0,c.j)("esri.layers.support.LayerFloorInfo")],y)},77990:function(e,t,r){r.d(t,{Z:function(){return oe}});var n,i=r(37762),o=r(74165),a=r(1413),l=r(15861),s=r(15671),u=r(43144),p=r(60136),d=r(29388),c=r(27366),y=(r(59486),r(44055)),f=(r(94931),r(78451),r(98689),r(57823),r(32066),r(30505),r(34999),r(28189),r(9014),r(40464)),v=r(76200),h=r(51508),m=r(40281),b=r(10064),g=r(41691),S=r(93169),w=r(79056),_=r(84652),I=r(54472),Z=r(32718),x=r(97642),C=r(76672),k=r(35995),F=r(49861),T=r(89125),E=r(38511),O=r(69912),L=r(31201),A=r(25243),D=r(25265),V=r(23879),M=r(89623),j=r(87165),P=r(83040),R=r(52410),N=r(77748),q=r(85116),Q=r(71065),z=r(94582),B=r(64020),J=r(23505),U=r(99837),G=r(86638),H=r(81085),W=r(53866),K=r(27823);function X(e){return null!=e&&"esriSMS"===e.type}function Y(e,t,r){var n,i=this.originIdOf(t)>=(0,D.M9)(r.origin);return{ignoreOrigin:!0,allowNull:i,enabled:!!r&&"map-image"===(null===(n=r.layer)||void 0===n?void 0:n.type)&&(r.writeSublayerStructure||i)}}function $(e,t,r){var n;return{enabled:!!r&&"tile"===(null===(n=r.layer)||void 0===n?void 0:n.type)&&(r.origin&&this.originIdOf(t)>=(0,D.M9)(r.origin)||this._isOverridden(t))}}function ee(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function te(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=(0,D.M9)(r.origin))}}var re=0,ne=new Set;ne.add("layer"),ne.add("parent"),ne.add("loaded"),ne.add("loadStatus"),ne.add("loadError"),ne.add("loadWarnings");var ie=n=function(e){(0,p.Z)(c,e);var t=(0,d.Z)(c);function c(e){var r;return(0,s.Z)(this,c),(r=t.call(this,e)).capabilities=void 0,r.fields=null,r.fullExtent=null,r.geometryType=null,r.globalIdField=null,r.legendEnabled=!0,r.objectIdField=null,r.parent=null,r.popupEnabled=!0,r.popupTemplate=null,r.sourceJSON=null,r.title=null,r.typeIdField=null,r.types=null,r._lastParsedUrl=null,r}return(0,u.Z)(c,[{key:"load",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t){var r=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this.addResolvingPromise((0,l.Z)((0,o.Z)().mark((function e(){var n,i,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.layer,i=r.url,n||i){e.next=3;break}throw new b.Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:r});case 3:if(!n){e.next=9;break}return e.next=6,n.fetchSublayerInfo(r,t);case 6:e.t0=e.sent,e.next=12;break;case 9:return e.next=11,(0,v.default)(i,(0,a.Z)({responseType:"json",query:{f:"json"}},t));case 11:e.t0=e.sent.data;case 12:(l=e.t0)&&(r.sourceJSON=l,r.read({layerDefinition:l},{origin:"service"}));case 14:case"end":return e.stop()}}),e)})))()),this));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"readCapabilities",value:function(e,t){t=t.layerDefinition||t;var r=(0,z.h)(t,this.url),n=r.operations,i=n.supportsQuery,o=n.supportsQueryAttachments,a=r.query.supportsFormatPBF,l=r.data.supportsAttachment;return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:i,supportsQueryAttachments:o},data:{supportsAttachment:l},query:{supportsFormatPBF:a}}}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"definitionExpression",set:function(e){this._setAndNotifyLayer("definitionExpression",e)}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"fieldsIndex",get:function(){return new R.Z(this.fields||[])}},{key:"floorInfo",set:function(e){this._setAndNotifyLayer("floorInfo",e)}},{key:"readGlobalIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){var r,n=(0,i.Z)(t.fields);try{for(n.s();!(r=n.n()).done;){var o=r.value;if("esriFieldTypeGlobalID"===o.type)return o.name}}catch(a){n.e(a)}finally{n.f()}}}},{key:"id",get:function(){var e=this._get("id");return null!==e&&void 0!==e?e:re++},set:function(e){var t;this._get("id")!==e&&(!1!==(null===(t=this.layer)||void 0===t||null===(t=t.capabilities)||void 0===t||null===(t=t.exportMap)||void 0===t?void 0:t.supportsDynamicLayers)?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}},{key:"labelingInfo",set:function(e){this._setAndNotifyLayer("labelingInfo",e)}},{key:"writeLabelingInfo",value:function(e,t,r,n){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map((function(e){return e.write({},n)}))}})}},{key:"labelsVisible",set:function(e){this._setAndNotifyLayer("labelsVisible",e)}},{key:"layer",set:function(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach((function(t){return t.layer=e}))}},{key:"listMode",set:function(e){this._set("listMode",e)}},{key:"minScale",set:function(e){this._setAndNotifyLayer("minScale",e)}},{key:"readMinScale",value:function(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}},{key:"maxScale",set:function(e){this._setAndNotifyLayer("maxScale",e)}},{key:"readMaxScale",value:function(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}},{key:"readObjectIdFieldFromService",value:function(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){var r,n=(0,i.Z)(t.fields);try{for(n.s();!(r=n.n()).done;){var o=r.value;if("esriFieldTypeOID"===o.type)return o.name}}catch(a){n.e(a)}finally{n.f()}}}},{key:"opacity",set:function(e){this._setAndNotifyLayer("opacity",e)}},{key:"readOpacity",value:function(e,t){var r,n,i=t.layerDefinition;return 1-.01*(null!==(r=null!=(null===i||void 0===i?void 0:i.transparency)?i.transparency:null===i||void 0===i||null===(n=i.drawingInfo)||void 0===n?void 0:n.transparency)&&void 0!==r?r:0)}},{key:"writeOpacity",value:function(e,t,r,n){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}},{key:"writeParent",value:function(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=(0,A.vU)(this.parent.id):t.parentLayerId=-1}},{key:"queryTask",get:function(){var e,t;if(!this.layer)return null;var r=this.layer.spatialReference,n="gdbVersion"in this.layer?this.layer.gdbVersion:void 0,i=this.capabilities,o=this.fieldsIndex,a=(0,S.Z)("featurelayer-pbf")&&(null===i||void 0===i?void 0:i.query.supportsFormatPBF),l=null!==(e=null===i||void 0===i||null===(t=i.operations)||void 0===t?void 0:t.supportsQueryAttachments)&&void 0!==e&&e;return new M.Z({url:this.url,pbfSupported:a,fieldsIndex:o,gdbVersion:n,sourceSpatialReference:r,queryAttachmentsSupported:l})}},{key:"renderer",set:function(e){if(e){var t,r=(0,i.Z)(e.getSymbols());try{for(r.s();!(t=r.n()).done;){var n=t.value;if((0,h.dU)(n)){Z.Z.getLogger(this).warn("Sublayer renderer should use 2D symbols");break}}}catch(o){r.e(o)}finally{r.f()}}this._setAndNotifyLayer("renderer",e)}},{key:"source",get:function(){return this._get("source")||new J.R({mapLayerId:this.id})},set:function(e){this._setAndNotifyLayer("source",e)}},{key:"sublayers",set:function(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}},{key:"castSublayers",value:function(e){return(0,A.se)(m.Z.ofType(n),e)}},{key:"writeSublayers",value:function(e,t,r){var n;(null===(n=this.sublayers)||void 0===n?void 0:n.length)&&(t[r]=this.sublayers.map((function(e){return e.id})).toArray().reverse())}},{key:"readTypeIdField",value:function(e,t){var r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();var n=t.fields.find((function(e){return e.name.toLowerCase()===r}));n&&(r=n.name)}return r}},{key:"url",get:function(){var e,t,r=null!==(e=null===(t=this.layer)||void 0===t?void 0:t.parsedUrl)&&void 0!==e?e:this._lastParsedUrl,n=this.source;if(!r)return null;if(this._lastParsedUrl=r,"map-layer"===(null===n||void 0===n?void 0:n.type))return"".concat(r.path,"/").concat(n.mapLayerId);var i={layer:JSON.stringify({source:this.source})};return"".concat(r.path,"/dynamicLayer?").concat((0,k.B7)(i))},set:function(e){this._overrideIfSome("url",e)}},{key:"visible",set:function(e){this._setAndNotifyLayer("visible",e)}},{key:"writeVisible",value:function(e,t,r,n){t[r]=this.getAtOrigin("defaultVisibility","service")||e}},{key:"clone",value:function(){var e=(0,V.vw)(this).store,t=new n;return(0,V.vw)(t).store=e.clone(ne),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}},{key:"createPopupTemplate",value:function(e){return(0,H.eZ)(this,e)}},{key:"createQuery",value:function(){return new G.Z({returnGeometry:!0,where:this.definitionExpression||"1=1"})}},{key:"createFeatureLayer",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t,n,i,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.hasOwnProperty("sublayers")){e.next=2;break}return e.abrupt("return",null);case 2:return n=this.layer,i=null===n||void 0===n?void 0:n.parsedUrl,e.next=7,Promise.all([r.e(478),r.e(558),r.e(3657),r.e(337),r.e(4326)]).then(r.bind(r,64326));case 7:return e.t0=e.sent.default,e.t1={url:null===i||void 0===i?void 0:i.path},a=new e.t0(e.t1),e.abrupt("return",(i&&this.source&&("map-layer"===this.source.type?a.layerId=this.source.mapLayerId:a.dynamicDataSource=this.source),null!=(null===n||void 0===n?void 0:n.refreshInterval)&&(a.refreshInterval=n.refreshInterval),this.definitionExpression&&(a.definitionExpression=this.definitionExpression),this.floorInfo&&(a.floorInfo=(0,_.d9)(this.floorInfo)),this.originIdOf("labelingInfo")>D.s3.SERVICE&&(a.labelingInfo=(0,_.d9)(this.labelingInfo)),this.originIdOf("labelsVisible")>D.s3.DEFAULTS&&(a.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>D.s3.DEFAULTS&&(a.legendEnabled=this.legendEnabled),this.originIdOf("visible")>D.s3.DEFAULTS&&(a.visible=this.visible),this.originIdOf("minScale")>D.s3.DEFAULTS&&(a.minScale=this.minScale),this.originIdOf("maxScale")>D.s3.DEFAULTS&&(a.maxScale=this.maxScale),this.originIdOf("opacity")>D.s3.DEFAULTS&&(a.opacity=this.opacity),this.originIdOf("popupTemplate")>D.s3.DEFAULTS&&(a.popupTemplate=(0,_.d9)(this.popupTemplate)),this.originIdOf("renderer")>D.s3.SERVICE&&(a.renderer=(0,_.d9)(this.renderer)),"data-layer"===(null===(t=this.source)||void 0===t?void 0:t.type)&&(a.dynamicDataSource=this.source.clone()),this.originIdOf("title")>D.s3.DEFAULTS&&(a.title=this.title),"map-image"===(null===n||void 0===n?void 0:n.type)&&n.originIdOf("customParameters")>D.s3.DEFAULTS&&(a.customParameters=n.customParameters),"tile"===(null===n||void 0===n?void 0:n.type)&&n.originIdOf("customParameters")>D.s3.DEFAULTS&&(a.customParameters=n.customParameters),a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFeatureType",value:function(e){var t=this.typeIdField,r=this.types;if(!t||!e)return null;var n=e.attributes?e.attributes[t]:void 0;if(null==n)return null;var i=null;return null!==r&&void 0!==r&&r.some((function(e){var t=e.id;return null!=t&&(t.toString()===n.toString()&&(i=e),!!i)})),i}},{key:"getFieldDomain",value:function(e,t){var r=t&&t.feature,n=this.getFeatureType(r);if(n){var i=n.domains&&n.domains[e];if(i&&"inherited"!==i.type)return i}return this._getLayerDomain(e)}},{key:"queryAttachments",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t,r){var n,i,a,l,s,u,p,d,c,y,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=U.Z.from(t),null!==(a=this.capabilities)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.supportsAttachment){e.next=6;break}throw new b.Z("queryAttachments:not-supported","this layer doesn't support attachments");case 6:if(s=(l=t).attachmentTypes,u=l.objectIds,p=l.globalIds,d=l.num,c=l.size,y=l.start,f=l.where,null!==a&&void 0!==a&&null!==(i=a.operations)&&void 0!==i&&i.supportsQueryAttachments){e.next=10;break}if(!((null===s||void 0===s?void 0:s.length)>0||(null===p||void 0===p?void 0:p.length)>0||(null===c||void 0===c?void 0:c.length)>0||d||y||f)){e.next=10;break}throw new b.Z("queryAttachments:option-not-supported","when 'capabilities.operations.supportsQueryAttachments' is false, only objectIds is supported",t);case 10:if(null!==u&&void 0!==u&&u.length||null!==p&&void 0!==p&&p.length||f){e.next=12;break}throw new b.Z("queryAttachments:invalid-query","'objectIds', 'globalIds', or 'where' are required to perform attachment query",t);case 12:return e.abrupt("return",this.queryTask.executeAttachmentQuery(t,r));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,l.Z)((0,o.Z)().mark((function e(){var t,r,n,l,s,u,p,d=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>0&&void 0!==d[0]?d[0]:this.createQuery(),l=d.length>1?d[1]:void 0,e.next=4,this.load();case 4:if(this.capabilities.operations.supportsQuery){e.next=6;break}throw new b.Z("queryFeatures:not-supported","this layer doesn't support queries.");case 6:if(this.url){e.next=8;break}throw new b.Z("queryFeatures:not-supported","this layer has no url.");case 8:return e.next=10,this.queryTask.execute(n,(0,a.Z)((0,a.Z)({},l),{},{query:(0,a.Z)((0,a.Z)({},null===(t=this.layer)||void 0===t?void 0:t.customParameters),{},{token:null===(r=this.layer)||void 0===r?void 0:r.apiKey})}));case 10:if(null!==(s=e.sent)&&void 0!==s&&s.features){u=(0,i.Z)(s.features);try{for(u.s();!(p=u.n()).done;)p.value.sourceLayer=this}catch(o){u.e(o)}finally{u.f()}}return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toExportImageJSON",value:function(e){var t,r=this,n={id:this.id,source:(null===(t=this.source)||void 0===t?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}},i=(0,C._)(e,this.definitionExpression);null!=i&&(n.definitionExpression=i);var o=["renderer","labelingInfo","opacity","labelsVisible"].reduce((function(e,t){return e[t]=r.originIdOf(t),e}),{}),a=Object.keys(o).some((function(e){return o[e]>D.s3.SERVICE}));if(a){var l=n.drawingInfo={};if(o.renderer>D.s3.SERVICE&&(l.renderer=this.renderer?this.renderer.toJSON():null),o.labelsVisible>D.s3.SERVICE&&(l.showLabels=this.labelsVisible),this.labelsVisible&&o.labelingInfo>D.s3.SERVICE){!this.loaded&&this.labelingInfo.some((function(e){return!e.labelPlacement}))&&Z.Z.getLogger(this).warnOnce("A Sublayer (title: ".concat(this.title,", id: ").concat(this.id,") has an undefined 'labelPlacement' and so labels cannot be displayed. Either define a valid 'labelPlacement' or call Sublayer.load() to use a default value based on geometry type."),{sublayer:this});var s=this.labelingInfo;null!=this.geometryType&&(s=(0,q.a)(this.labelingInfo,K.M.toJSON(this.geometryType))),l.labelingInfo=s.filter((function(e){return e.labelPlacement})).map((function(e){return e.toJSON({origin:"service",layer:r.layer})})),l.showLabels=!0}o.opacity>D.s3.SERVICE&&(l.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(l.renderer)}return n}},{key:"_assignDefaultSymbolColors",value:function(e){this._forEachSimpleMarkerSymbols(e,(function(e){e.color||"esriSMSX"!==e.style&&"esriSMSCross"!==e.style||(e.outline&&e.outline.color?e.color=e.outline.color:e.color=[0,0,0,0])}))}},{key:"_forEachSimpleMarkerSymbols",value:function(e,t){if(e){var r,n,o=null!==(r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:null)&&void 0!==r?r:[],a=(0,i.Z)(o);try{for(a.s();!(n=a.n()).done;){var l=n.value;X(l.symbol)&&t(l.symbol)}}catch(s){a.e(s)}finally{a.f()}"symbol"in e&&X(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&X(e.defaultSymbol)&&t(e.defaultSymbol)}}},{key:"_setAndNotifyLayer",value:function(e,t){var r,n,i=this.layer,o=this._get(e);switch(e){case"definitionExpression":case"floorInfo":r="supportsSublayerDefinitionExpression";break;case"minScale":case"maxScale":case"visible":r="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":r="supportsDynamicLayers",n="supportsModification"}var a=(0,V.vw)(this).getDefaultOrigin();if("service"!==a){var l,s;if(r&&!1===(null===(l=this.layer)||void 0===l||null===(l=l.capabilities)||void 0===l||null===(l=l.exportMap)||void 0===l?void 0:l[r]))return void this._logLockedError(e,"capability not available 'layer.capabilities.exportMap.".concat(r,"'"));if(n&&!1===(null===(s=this.capabilities)||void 0===s?void 0:s.exportMap[n]))return void this._logLockedError(e,"capability not available 'capabilities.exportMap.".concat(n,"'"))}"source"!==e||"not-loaded"===this.loadStatus?(this._set(e,t),"service"!==a&&o!==t&&i&&i.emit&&i.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null,e.layer=null})),this.handles.removeAll()),e&&(e.forEach((function(e){e.parent=r,e.layer=r.layer})),this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,t.layer=r.layer})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,t.layer=null})),e.on("before-changes",(function(e){var t,n=null===(t=r.layer)||void 0===t||null===(t=t.capabilities)||void 0===t||null===(t=t.exportMap)||void 0===t?void 0:t.supportsSublayersChanges;null==n||n||(Z.Z.getLogger(r).error(new b.Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:r,layer:r.layer})),e.preventDefault())}))]))}},{key:"_logLockedError",value:function(e,t){var r=this.layer,n=this.declaredClass;Z.Z.getLogger(n).error(new b.Z("sublayer:locked","Property '".concat(String(e),"' can't be changed on Sublayer from the layer '").concat(null===r||void 0===r?void 0:r.id,"'"),{reason:t,sublayer:this,layer:r}))}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),c}((0,g.p)((0,x.R)((0,w.IG)(I.Z))));ie.test={isMapImageLayerOverridePolicy:function(e){return e===ee||e===Y},isTileImageLayerOverridePolicy:function(e){return e===$}},(0,c._)([(0,F.Cb)({readOnly:!0})],ie.prototype,"capabilities",void 0),(0,c._)([(0,E.r)("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],ie.prototype,"readCapabilities",null),(0,c._)([(0,F.Cb)()],ie.prototype,"defaultPopupTemplate",null),(0,c._)([(0,F.Cb)({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:Y}}})],ie.prototype,"definitionExpression",null),(0,c._)([(0,F.Cb)({readOnly:!0})],ie.prototype,"effectiveScaleRange",null),(0,c._)([(0,F.Cb)({type:[P.Z],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],ie.prototype,"fields",void 0),(0,c._)([(0,F.Cb)({readOnly:!0})],ie.prototype,"fieldsIndex",null),(0,c._)([(0,F.Cb)({type:Q.Z,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:Y},origins:{"web-scene":{read:!1,write:!1}}}})],ie.prototype,"floorInfo",null),(0,c._)([(0,F.Cb)({type:W.Z,json:{read:{source:"layerDefinition.extent"}}})],ie.prototype,"fullExtent",void 0),(0,c._)([(0,F.Cb)({type:K.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:K.M.read}}}}})],ie.prototype,"geometryType",void 0),(0,c._)([(0,F.Cb)({type:String})],ie.prototype,"globalIdField",void 0),(0,c._)([(0,E.r)("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],ie.prototype,"readGlobalIdFieldFromService",null),(0,c._)([(0,F.Cb)({type:A.z8,json:{write:{ignoreOrigin:!0}}})],ie.prototype,"id",null),(0,c._)([(0,F.Cb)({value:null,type:[N.Z],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:ee}}})],ie.prototype,"labelingInfo",null),(0,c._)([(0,L.c)("labelingInfo")],ie.prototype,"writeLabelingInfo",null),(0,c._)([(0,F.Cb)({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:ee}}})],ie.prototype,"labelsVisible",null),(0,c._)([(0,F.Cb)({value:null})],ie.prototype,"layer",null),(0,c._)([(0,F.Cb)({type:String,json:{write:{overridePolicy:$}}})],ie.prototype,"layerItemId",void 0),(0,c._)([(0,F.Cb)({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:te}}})],ie.prototype,"legendEnabled",void 0),(0,c._)([(0,F.Cb)({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],ie.prototype,"listMode",null),(0,c._)([(0,F.Cb)({type:Number,value:0,json:{write:{overridePolicy:ee}}})],ie.prototype,"minScale",null),(0,c._)([(0,E.r)("minScale",["minScale","layerDefinition.minScale"])],ie.prototype,"readMinScale",null),(0,c._)([(0,F.Cb)({type:Number,value:0,json:{write:{overridePolicy:ee}}})],ie.prototype,"maxScale",null),(0,c._)([(0,E.r)("maxScale",["maxScale","layerDefinition.maxScale"])],ie.prototype,"readMaxScale",null),(0,c._)([(0,F.Cb)({type:String})],ie.prototype,"objectIdField",void 0),(0,c._)([(0,E.r)("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],ie.prototype,"readObjectIdFieldFromService",null),(0,c._)([(0,F.Cb)({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:ee}}})],ie.prototype,"opacity",null),(0,c._)([(0,E.r)("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],ie.prototype,"readOpacity",null),(0,c._)([(0,L.c)("opacity")],ie.prototype,"writeOpacity",null),(0,c._)([(0,F.Cb)({json:{type:A.z8,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:ee}}})],ie.prototype,"parent",void 0),(0,c._)([(0,L.c)("parent")],ie.prototype,"writeParent",null),(0,c._)([(0,F.Cb)({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",overridePolicy:te,writer:function(e,t,r){t[r]=!e}}}})],ie.prototype,"popupEnabled",void 0),(0,c._)([(0,F.Cb)({type:y.Z,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:te}}})],ie.prototype,"popupTemplate",void 0),(0,c._)([(0,F.Cb)({readOnly:!0})],ie.prototype,"queryTask",null),(0,c._)([(0,F.Cb)({types:f.A,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ee},origins:{"web-scene":{types:f.o,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:ee}}}}})],ie.prototype,"renderer",null),(0,c._)([(0,F.Cb)({types:{key:"type",base:null,typeMap:{"data-layer":B.n,"map-layer":J.R}},cast:function(e){if(e){if("mapLayerId"in e)return(0,A.TJ)(J.R,e);if("dataSource"in e)return(0,A.TJ)(B.n,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:ee}}})],ie.prototype,"source",null),(0,c._)([(0,F.Cb)()],ie.prototype,"sourceJSON",void 0),(0,c._)([(0,F.Cb)({value:null,json:{type:[A.z8],write:{target:"subLayerIds",allowNull:!0,overridePolicy:ee}}})],ie.prototype,"sublayers",null),(0,c._)([(0,T.p)("sublayers")],ie.prototype,"castSublayers",null),(0,c._)([(0,L.c)("sublayers")],ie.prototype,"writeSublayers",null),(0,c._)([(0,F.Cb)({type:String,json:{name:"name",write:{overridePolicy:te}}})],ie.prototype,"title",void 0),(0,c._)([(0,F.Cb)({type:String})],ie.prototype,"typeIdField",void 0),(0,c._)([(0,E.r)("typeIdField",["layerDefinition.typeIdField"])],ie.prototype,"readTypeIdField",null),(0,c._)([(0,F.Cb)({type:[j.Z],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],ie.prototype,"types",void 0),(0,c._)([(0,F.Cb)({type:String,json:{name:"layerUrl",write:{overridePolicy:$}}})],ie.prototype,"url",null),(0,c._)([(0,F.Cb)({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:ee}}})],ie.prototype,"visible",null),(0,c._)([(0,L.c)("visible")],ie.prototype,"writeVisible",null);var oe=ie=n=(0,c._)([(0,O.j)("esri.layers.support.Sublayer")],ie)},66591:function(e,t,r){r.d(t,{im:function(){return F},V5:function(){return k}});r(93169);var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),s=r(27366),u=r(84652),p=r(49861),d=(r(25243),r(27135)),c=r(69912),y=r(46784),f=(r(63780),n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(y.wq));(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],f.prototype,"name",void 0),(0,s._)([(0,p.Cb)({type:[String,Number],json:{write:!0}})],f.prototype,"code",void 0),f=n=(0,s._)([(0,c.j)("esri.layers.support.CodedValue")],f);var v=new(r(43404).X)({inherited:"inherited",codedValue:"coded-value",range:"range"}),h=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return(0,o.Z)(r)}(y.wq);(0,s._)([(0,p.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,s._)([(0,d.J)(v)],h.prototype,"type",void 0);var m,b=h=(0,s._)([(0,c.j)("esri.layers.support.Domain")],h),g=m=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new m({codedValues:(0,u.d9)(this.codedValues),name:this.name})}}]),r}(b);(0,s._)([(0,p.Cb)({type:[f],json:{write:!0}})],g.prototype,"codedValues",void 0),(0,s._)([(0,d.J)({codedValue:"coded-value"})],g.prototype,"type",void 0);var S,w=g=m=(0,s._)([(0,c.j)("esri.layers.support.CodedValueDomain")],g),_=(r(32718),r(10064),S=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="inherited",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new S}}]),r}(b));(0,s._)([(0,d.J)({inherited:"inherited"})],_.prototype,"type",void 0);var I,Z=_=S=(0,s._)([(0,c.j)("esri.layers.support.InheritedDomain")],_),x=I=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new I({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(b);(0,s._)([(0,p.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],x.prototype,"maxValue",void 0),(0,s._)([(0,p.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],x.prototype,"minValue",void 0),(0,s._)([(0,d.J)({range:"range"})],x.prototype,"type",void 0);var C=x=I=(0,s._)([(0,c.j)("esri.layers.support.RangeDomain")],x),k={key:"type",base:b,typeMap:{range:x,"coded-value":w,inherited:Z}};function F(e){if(!e||!e.type)return null;switch(e.type){case"range":return C.fromJSON(e);case"codedValue":return w.fromJSON(e);case"inherited":return Z.fromJSON(e)}return null}},85249:function(e,t,r){r.d(t,{v:function(){return n}});var n=new(r(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},83690:function(e,t,r){r.d(t,{V:function(){return u},g:function(){return l}});var n=r(74165),i=r(15861),o=r(10064),a=r(66978);function l(e,t,r){return s.apply(this,arguments)}function s(){return s=(0,i.Z)((0,n.Z)().mark((function e(t,r,i){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,createImageBitmap(t);case 3:l=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new o.Z("request:server","Unable to load ".concat(r),{url:r,error:e.t0});case 9:return e.abrupt("return",((0,a.k_)(i),l));case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),s.apply(this,arguments)}function u(e,t,r,n,i){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,n.Z)().mark((function e(t,r,i,l,s){var u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,createImageBitmap(t);case 3:u=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new o.Z("request:server","Unable to load tile ".concat(r,"/").concat(i,"/").concat(l),{error:e.t0,level:r,row:i,col:l});case 9:return e.abrupt("return",((0,a.k_)(s),u));case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),p.apply(this,arguments)}},94582:function(e,t,r){r.d(t,{h:function(){return d}});var n=r(93169),i=r(25899),o={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function a(e,t,r){return!!s(e,t,r)}function l(e,t,r){return s(e,t,r)}function s(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function u(e){var t,r=null===e||void 0===e||null===(t=e.supportedSpatialAggregationStatistics)||void 0===t?void 0:t.map((function(e){return e.toLowerCase()}));return{envelope:!(null===r||void 0===r||!r.includes("envelopeaggregate")),centroid:!(null===r||void 0===r||!r.includes("centroidaggregate")),convexHull:!(null===r||void 0===r||!r.includes("convexhullaggregate"))}}function p(e,t){var r,n=null===e||void 0===e||null===(r=e.supportedOperationsWithCacheHint)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()}));return!(null===n||void 0===n||!n.includes(t.toLowerCase()))}function d(e,t){return{analytics:c(e),attachment:y(e),data:f(e),metadata:v(e),operations:h(e.capabilities,e,t),query:m(e,t),queryRelated:b(e),queryTopFeatures:g(e),editing:S(e)}}function c(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function y(e){var t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:a(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((function(e){var t=o[e.name];t&&(r[t]=!!e.isEnabled)})),r}function f(e){return{isVersioned:a(e,"isDataVersioned",!1),supportsAttachment:a(e,"hasAttachments",!1),supportsM:a(e,"hasM",!1),supportsZ:a(e,"hasZ",!1)}}function v(e){return{supportsAdvancedFieldProperties:a(e,"supportsFieldDescriptionProperty",!1)}}function h(e,t,r){var n=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],o=r?(0,i.Qc)(r):null,l=n.includes(null!=o&&"MapServer"===o.serverType?"data":"query"),s=n.includes("editing")&&!t.datesInUnknownTimezone,u=s&&n.includes("create"),p=s&&n.includes("delete"),d=s&&n.includes("update"),c=n.includes("changetracking"),y=t.advancedQueryCapabilities;return s&&!(u||p||d)&&(u=p=d=!0),{supportsCalculate:a(t,"supportsCalculate",!1),supportsTruncate:a(t,"supportsTruncate",!1),supportsValidateSql:a(t,"supportsValidateSql",!1),supportsAdd:u,supportsDelete:p,supportsEditing:s,supportsChangeTracking:c,supportsQuery:l,supportsQueryAnalytics:a(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:a(y,"supportsQueryAttachments",!1),supportsQueryTopFeatures:a(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:a(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:d,supportsExceedsLimitStatistics:a(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:a(t,"supportsAsyncConvert3D",!1)}}function m(e,t){var r,o=e.advancedQueryCapabilities,s=e.ownershipBasedAccessControlForFeatures,d=e.archivingInfo,c=e.currentVersion,y=!(null===t||void 0===t?void 0:t.includes("MapServer"))||c>=(0,n.Z)("mapserver-pbf-version-support"),f=(0,i.M8)(t),v=new Set((null!==(r=e.supportedQueryFormats)&&void 0!==r?r:"").split(",").map((function(e){return e.toLowerCase().trim()})));return{supportsStatistics:a(o,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:a(o,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:a(o,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:u(o),supportsCentroid:a(o,"supportsReturningGeometryCentroid",!1),supportsDistance:a(o,"supportsQueryWithDistance",!1),supportsDistinct:a(o,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:a(o,"supportsReturningQueryExtent",!1),supportsGeometryProperties:a(o,"supportsReturningGeometryProperties",!1),supportsHavingClause:a(o,"supportsHavingClause",!1),supportsOrderBy:a(o,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:a(o,"supportsPagination",!1),supportsQuantization:a(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:a(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:a(e,"supportsReturningQueryGeometry",!1),supportsResultType:a(o,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:a(o,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:a(o,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:a(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:a(o,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:a(s,"allowOthersToQuery",!0),supportsHistoricMoment:a(d,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&v.has("pbf"),supportsDisjointSpatialRelationship:a(o,"supportsDisjointSpatialRel",!1),supportsCacheHint:a(o,"supportsQueryWithCacheHint",!1)||p(o,"query"),supportsDefaultSpatialReference:a(o,"supportsDefaultSR",!1),supportsCompactGeometry:f,supportsFullTextSearch:a(o,"supportsFullTextSearch",!1),maxRecordCountFactor:l(e,"maxRecordCountFactor",void 0),maxRecordCount:l(e,"maxRecordCount",void 0),standardMaxRecordCount:l(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:l(e,"tileMaxRecordCount",void 0)}}function b(e){var t=e.advancedQueryCapabilities,r=a(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:a(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p(t,"queryRelated")}}function g(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function S(e){var t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:a(e,"allowGeometryUpdates",!0),supportsGlobalId:a(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:a(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:a(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:a(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:a(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:a(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:a(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:a(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:a(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:a(r,"supportsAsyncApplyEdits",!1)}}},58132:function(e,t,r){r.d(t,{FN:function(){return a},QV:function(){return o},ac:function(){return s}});var n=r(37762),i=r(25265);function o(e,t,r){return t.flatten((function(e){return e.sublayers})).length!==e.length||(!!e.some((function(e){return e.originIdOf("minScale")>r||e.originIdOf("maxScale")>r||e.originIdOf("renderer")>r||e.originIdOf("labelingInfo")>r||e.originIdOf("opacity")>r||e.originIdOf("labelsVisible")>r||e.originIdOf("source")>r}))||!l(e,t))}function a(e,t,r){return!!e.some((function(e){var t=e.source;return!(!t||"map-layer"===t.type&&t.mapLayerId===e.id&&(null==t.gdbVersion||t.gdbVersion===r))||e.originIdOf("renderer")>i.s3.SERVICE||e.originIdOf("labelingInfo")>i.s3.SERVICE||e.originIdOf("opacity")>i.s3.SERVICE||e.originIdOf("labelsVisible")>i.s3.SERVICE}))||!l(e,t)}function l(e,t){if(!e||!e.length||null==t)return!0;var r=t.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).map((function(e){return e.id})).toArray();if(e.length>r.length)return!1;var i,o=0,a=r.length,l=(0,n.Z)(e);try{for(l.s();!(i=l.n()).done;){for(var s=i.value.id;o<a&&r[o]!==s;)o++;if(o>=a)return!1}}catch(u){l.e(u)}finally{l.f()}return!0}function s(e){return!!e&&e.some((function(e){return null!=e.minScale||e.layerDefinition&&null!=e.layerDefinition.minScale}))}},68620:function(e,t,r){r.d(t,{p:function(){return o}});var n=r(37762),i=r(93501);function o(e,t,r){if(r&&r.features&&r.hasZ){var o=(0,i.k)(r.geometryType,t,e.outSpatialReference);if(null!=o){var a,l=(0,n.Z)(r.features);try{for(l.s();!(a=l.n()).done;){o(a.value.geometry)}}catch(s){l.e(s)}finally{l.f()}}}}},49818:function(e,t,r){r.d(t,{Z:function(){return x}});var n,i=r(29439),o=r(37762),a=r(15671),l=r(43144),s=r(60136),u=r(29388),p=r(27366),d=r(59486),c=r(52639),y=r(43404),f=r(46784),v=r(84652),h=r(49861),m=(r(25243),r(38511)),b=r(69912),g=r(31201),S=r(78952),w=r(77981),_=r(83040),I=new y.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),Z=n=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,l.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=S.Z.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],a=c.Z.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;null==a.geometry||l||(a.geometry.spatialReference=r);var s=o.aggregateGeometries,u=a.aggregateGeometries;if(s&&null!=u)for(var p in u){var d=u[p],y=s[p],f=null===y||void 0===y?void 0:y.spatialReference;null==d||f||(d.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)I.write(e,t,r,n);else{var i=this.features;if(i){var a,l=(0,o.Z)(i);try{for(l.s();!(a=l.n()).done;){var s=a.value;if(s&&null!=s.geometry)return void I.write(s.geometry.type,t,r,n)}}catch(u){l.e(u)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,w.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=S.Z.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=(0,o.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&null!=a.geometry&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(l){i.e(l)}finally{i.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,v.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),r=t[0],n=t[1],o=(0,i.Z)(e.translate,2),a=o[0],l=o[1],s=this.features,u=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((l-e)/n)})),p=0,d=s.length;p<d;p++)(null===u||void 0===u?void 0:u(s[p].geometry))||(s.splice(p,1),p--,d--);return this.transform=e,this}},{key:"unquantize",value:function(){var e,t,r=this.geometryType,n=this.features,a=this.transform;if(!a)return this;var l=(0,i.Z)(a.translate,2),s=l[0],u=l[1],p=(0,i.Z)(a.scale,2),d=p[0],c=p[1],y=null,f=null;if(this.hasZ&&null!=(null===a||void 0===a||null===(e=a.scale)||void 0===e?void 0:e[2])){var v=(0,i.Z)(a.translate,3)[2],h=(0,i.Z)(a.scale,3)[2];y=function(e){return e*h+v}}if(this.hasM&&null!=(null===a||void 0===a||null===(t=a.scale)||void 0===t?void 0:t[3])){var m=(0,i.Z)(a.translate,4)[3],b=(0,i.Z)(a.scale,4)[3];f=function(e){return null==e?e:e*b+m}}var g,S=this._getHydrationFunction(r,(function(e){return e*d+s}),(function(e){return u-e*c}),y,f),w=(0,o.Z)(n);try{for(w.s();!(g=w.n()).done;){var _=g.value.geometry;null!=_&&S&&S(_)}}catch(I){w.e(I)}finally{w.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,o=[],a=0,l=e.length;a<l;a++){var s=e[a];if(a>0){var u=t(s[0]),p=r(s[1]);u===n&&p===i||(o.push([u-n,p-i]),n=u,i=p)}else n=t(s[0]),i=r(s[1]),o.push([n,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,w.oU)(e)?e.rings:e.paths,o=[],a=0,l=i.length;a<l;a++){var s=i[a],u=n._quantizePoints(s,t,r);u&&o.push(u)}return o.length>0?((0,w.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r,n,i){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?function(e){for(var o,a,l=(0,w.oU)(e)?e.rings:e.paths,s=0,u=l.length;s<u;s++)for(var p=l[s],d=0,c=p.length;d<c;d++){var y=p[d];d>0?(o+=y[0],a+=y[1]):(o=y[0],a=y[1]),y[0]=t(o),y[1]=r(a)}if(n&&i)for(var f=0,v=l.length;f<v;f++)for(var h=l[f],m=0,b=h.length;m<b;m++){var g=h[m];g[2]=n(g[2]),g[3]=i(g[3])}else if(n)for(var S=0,_=l.length;S<_;S++)for(var I=l[S],Z=0,x=I.length;Z<x;Z++){var C=I[Z];C[2]=n(C[2])}else if(i)for(var k=0,F=l.length;k<F;k++)for(var T=l[k],E=0,O=T.length;E<O;E++){var L=T[E];L[2]=i(L[2])}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?function(e){for(var o,a,l=e.points,s=0,u=l.length;s<u;s++){var p=l[s];s>0?(o+=p[0],a+=p[1]):(o=p[0],a=p[1]),p[0]=t(o),p[1]=r(a)}if(n&&i)for(var d=0,c=l.length;d<c;d++){var y=l[d];y[2]=n(y[2]),y[3]=i(y[3])}else if(n)for(var f=0,v=l.length;f<v;f++){var h=l[f];h[2]=n(h[2])}else if(i)for(var m=0,b=l.length;m<b;m++){var g=l[m];g[2]=i(g[2])}}:null}}]),r}(f.wq);(0,p._)([(0,h.Cb)({type:String,json:{write:!0}})],Z.prototype,"displayFieldName",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],Z.prototype,"exceededTransferLimit",void 0),(0,p._)([(0,h.Cb)({type:[c.Z],json:{write:!0}})],Z.prototype,"features",void 0),(0,p._)([(0,m.r)("features")],Z.prototype,"readFeatures",null),(0,p._)([(0,h.Cb)({type:[_.Z],json:{write:!0}})],Z.prototype,"fields",void 0),(0,p._)([(0,h.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:I.read}}})],Z.prototype,"geometryType",void 0),(0,p._)([(0,g.c)("geometryType")],Z.prototype,"writeGeometryType",null),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],Z.prototype,"hasM",void 0),(0,p._)([(0,h.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],Z.prototype,"hasZ",void 0),(0,p._)([(0,h.Cb)({types:d.qM,json:{write:!0}})],Z.prototype,"queryGeometry",void 0),(0,p._)([(0,m.r)("queryGeometry")],Z.prototype,"readQueryGeometry",null),(0,p._)([(0,h.Cb)({type:S.Z,json:{write:!0}})],Z.prototype,"spatialReference",void 0),(0,p._)([(0,g.c)("spatialReference")],Z.prototype,"writeSpatialReference",null),(0,p._)([(0,h.Cb)({json:{write:!0}})],Z.prototype,"transform",void 0),(Z=n=(0,p._)([(0,b.j)("esri.rest.support.FeatureSet")],Z)).prototype.toJSON.isDefaultToJSON=!0;var x=Z},76115:function(e,t,r){r.d(t,{ET:function(){return o},I4:function(){return i},eG:function(){return s},lF:function(){return a},lj:function(){return p},qP:function(){return l},wW:function(){return u}});var n=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},o={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},l={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},s={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},u={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=1744.83f49c40.chunk.js.map