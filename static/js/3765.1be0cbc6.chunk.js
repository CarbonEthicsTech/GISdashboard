"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[3765],{12355:function(e,t,r){r.d(t,{Z:function(){return p}});var i=r(15671),n=r(43144),a=r(60136),s=r(29388),o=r(27366),u=r(11582),l=r(46784),d=r(86710),f=r(49861),c=(r(25243),r(63780),r(93169),r(27135)),v=r(69912),h=r(58359),y=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).unit="milliseconds",n.value=0,n}return(0,n.Z)(r,[{key:"toMilliseconds",value:function(){return(0,d.rJ)(this.value,this.unit,"milliseconds")}}]),r}((0,u.J)(l.wq));(0,o._)([(0,c.J)(h.v,{nonNullable:!0})],y.prototype,"unit",void 0),(0,o._)([(0,f.Cb)({type:Number,json:{write:!0},nonNullable:!0})],y.prototype,"value",void 0);var p=y=(0,o._)([(0,v.j)("esri.TimeInterval")],y)},16054:function(e,t,r){r.d(t,{z:function(){return s}});var i=r(15671),n=r(43144),a=r(18759),s=function(){function e(t,r){(0,i.Z)(this,e),this._storage=new a.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,n.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return d},Xq:function(){return l}});var i,n=r(29439),a=r(37762),s=r(15671),o=r(43144),u=r(27546);!function(e){e[e.ALL=0]="ALL",e[e.SOME=1]="SOME"}(i||(i={}));var l=function(){function e(t,r,i){(0,s.Z)(this,e),this.name=t,this._storage=r,this.id=f+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),i&&(this._storage.registerRemoveFunc(this.id,i),this._removeFunc=!0)}return(0,o.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,i)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,s.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new u.Z,this._users=new u.Z}return(0,o.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,n,a){t=e.id+t;var s=this._db.get(t);if(s&&(this._size-=s.size,e.size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,i.ALL)),n>this._maxSize)this._notifyRemove(t,r,i.ALL);else if(void 0!==r)if(!n||n<0)console.warn("Refusing to cache entry with invalid size "+n);else{var o=1+Math.max(a,-3)- -3;this._db.set(t,{entry:r,size:n,lifetime:o,lives:o}),this._size+=n,e.size+=n,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,n){t=e.id+t;var a=this._db.get(t);if(a&&a.entry===r){for(this._size-=a.size,e.size-=a.size;n>this._maxSize;){var s=this._notifyRemove(t,r,i.SOME);if(!(null!=s&&s>0))return void this._db.delete(t);n=s}a.size=n,this._size+=n,e.size+=n,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((function(t,n){var a=t.lifetime;i[a]=(i[a]||0)+t.size,e._users.forAll((function(e){var i=e.id,a=e.name;if(n.startsWith(i)){var s=r[a]||0;r[a]=s+t.size}}))}));var n={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var i=r[t]||0;r[t]=i,n[t]=Math.round(100*e.hitRate)+"%"}else n[t]="0%"}));var a=Object.keys(r);a.sort((function(e,t){return r[t]-r[e]})),a.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+n[e]}));for(var s=i.length-1;s>=0;--s){var o=i[s];o&&(t["Priority "+(s+-3-1)]=Math.round(o/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,n){n.startsWith(r)&&(t._size-=e.size,t._db.delete(n),t._notifyRemove(n,e.entry,i.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,i.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var i;return this._removeFuncs.some((function(n){if(e.startsWith(n[0])){var a=n[1](t,r);return"number"==typeof a&&(i=a),!0}return!1})),i}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,a.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var i=(0,n.Z)(t.value,2),s=i[0],o=i[1];if(this._purgeItem(s,o),this._size<=.9*this.maxSize)return}}catch(u){r.e(u)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,i=(0,a.Z)(e._db);try{for(i.s();!(r=i.n()).done;){var s=(0,n.Z)(r.value,2),o=s[0],l=s[1];if(o.startsWith(t.id)&&(e._purgeItem(o,l,t),t.size<=.9*t.maxSize))return}}catch(u){i.e(u)}finally{i.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var n=this._notifyRemove(e,t.entry,i.SOME);null!=n&&n>0&&(this._size+=n,r&&(r.size+=n),t.lives=t.lifetime,t.size=n,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),f=0},82582:function(e,t,r){r.d(t,{dp:function(){return s},yZ:function(){return a}});var i=r(68860),n=96;function a(e,t){var r=t||e.extent,a=e.width,s=(0,i.c9)(r&&r.spatialReference);return r&&a?r.width/a*s*i.hd*n:0}function s(e,t){return e/((0,i.c9)(t)*i.hd*n)}},19583:function(e,t,r){r.r(t),r.d(t,{default:function(){return W}});var i=r(74165),n=r(15861),a=r(1413),s=r(15671),o=r(43144),u=r(60136),l=r(29388),d=r(27366),f=r(76200),c=r(62044),v=r(10064),h=r(41691),y=r(93002),p=r(97642),m=r(66978),_=r(49861),g=r(25243),b=(r(63780),r(93169),r(38511)),S=r(69912),k=r(31201),w=r(25265),x=r(53866),Z=r(82582),z=r(30651),I=r(27961),T=r(6741),E=r(11936),C=r(6693),O=r(46671),L=r(6061),R=r(29598),F=r(71684),M=r(56811),N=r(18870),U=r(99063),j=r(45948),A=r(44041),D=r(83690),J=r(77990),P=r(58132),V=r(26704),q=r(16354),H=function(e){(0,u.Z)(r,e);var t=(0,l.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))).dateFieldsTimeReference=null,e.datesInUnknownTimezone=!1,e.dpi=96,e.gdbVersion=null,e.imageFormat="png24",e.imageMaxHeight=2048,e.imageMaxWidth=2048,e.imageTransparency=!0,e.isReference=null,e.labelsVisible=!1,e.operationalLayerType="ArcGISMapServiceLayer",e.preferredTimeReference=null,e.sourceJSON=null,e.sublayers=null,e.type="map-image",e.url=null,e}return(0,o.Z)(r,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,a.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(m.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"readImageFormat",value:function(e,t){var r=t.supportedImageFormatTypes;return r&&r.includes("PNG32")?"png32":"png24"}},{key:"writeSublayers",value:function(e,t,r,i){var n;if(this.loaded&&e){var s=e.slice().reverse().flatten((function(e){var t=e.sublayers;return t&&t.toArray().reverse()})).toArray(),o=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&null!==(n=this.capabilities.exportMap)&&void 0!==n&&n.supportsDynamicLayers){var u=(0,w.M9)(i.origin);if(u===w.s3.PORTAL_ITEM){var l=this.createSublayersForOrigin("service").sublayers;o=(0,P.QV)(s,l,w.s3.SERVICE)}else if(u>w.s3.PORTAL_ITEM){var d=this.createSublayersForOrigin("portal-item");o=(0,P.QV)(s,d.sublayers,(0,w.M9)(d.origin))}}var f=[],c=(0,a.Z)({writeSublayerStructure:o},i),v=o;s.forEach((function(e){var t=e.write({},c);f.push(t),v=v||"user"===e.originOf("visible")})),f.some((function(e){return Object.keys(e).length>1}))&&(t.layers=f),v&&(t.visibleLayers=s.filter((function(e){return e.visible})).map((function(e){return e.id})))}}},{key:"createExportImageParameters",value:function(e,t,r,i){var n=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());var s=new A.R({layer:this,floors:null===i||void 0===i?void 0:i.floors,scale:(0,Z.yZ)({extent:e,width:t})*n}),o=s.toJSON();s.destroy();var u=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=e&&e.spatialReference,d=l.wkid||JSON.stringify(l.toJSON());o.dpi*=n;var f={};if(null!==i&&void 0!==i&&i.timeExtent){var c=i.timeExtent.toJSON(),v=c.start,h=c.end;f.time=v&&h&&v===h?""+v:"".concat(null!==v&&void 0!==v?v:"null",",").concat(null!==h&&void 0!==h?h:"null")}else this.timeInfo&&!this.timeInfo.hasLiveData&&(f.time="null,null");return(0,a.Z)((0,a.Z)((0,a.Z)({bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:d,imageSR:d,size:t+","+r},o),u),f)}},{key:"fetchImage",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,r,n,a){var s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchImage("image",t,r,n,a);case 2:return s=e.sent,o=s.data,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchImageBitmap",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,r,n,a){var s,o,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fetchImage("blob",t,r,n,a);case 2:return s=e.sent,o=s.data,u=s.url,e.abrupt("return",(0,D.g)(o,u,null===a||void 0===a?void 0:a.signal));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(){var t,r,n,s,o,u,l,d,v=arguments;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},r=(0,a.Z)((0,a.Z)({},t),{},{query:(0,a.Z)((0,a.Z)({returnUpdates:!0,f:"json"},this.customParameters),{},{token:this.apiKey})}),e.next=4,(0,f.default)(this.url,r);case 4:return n=e.sent,s=n.data,o=s.extent,u=s.fullExtent,l=s.timeExtent,d=o||u,e.abrupt("return",{fullExtent:d&&x.Z.fromJSON(d),timeExtent:l&&c.Z.fromJSON({start:l[0],end:l[1]})});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadAll",value:function(){var e=this;return(0,y.G)(this,(function(t){t(e.allSublayers)}))}},{key:"serviceSupportsSpatialReference",value:function(e){return(0,V.D)(this,e)}},{key:"_fetchImage",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,r,n,s,o){var u,l,d,c,h,y,p;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c={responseType:t,signal:null!==(u=null===o||void 0===o?void 0:o.signal)&&void 0!==u?u:null,query:(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({},this.parsedUrl.query),this.createExportImageParameters(r,n,s,o)),{},{f:"image"},this.refreshParameters),this.customParameters),{},{token:this.apiKey})},h=this.parsedUrl.path+"/export",null==(null===(l=c.query)||void 0===l?void 0:l.dynamicLayers)||null!==(d=this.capabilities)&&void 0!==d&&null!==(d=d.exportMap)&&void 0!==d&&d.supportsDynamicLayers){e.next=3;break}throw new v.Z("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:c.query});case 3:return e.prev=3,e.next=6,(0,f.default)(h,c);case 6:return y=e.sent,p=y.data,e.abrupt("return",{data:p,url:h});case 11:if(e.prev=11,e.t0=e.catch(3),!(0,m.D_)(e.t0)){e.next=15;break}throw e.t0;case 15:throw new v.Z("mapimagelayer:image-fetch-error","Unable to load image: ".concat(h),{error:e.t0});case 16:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"_fetchService",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl}));case 2:return e.next=4,(0,f.default)(this.parsedUrl.path,{query:(0,a.Z)((0,a.Z)((0,a.Z)({f:"json"},this.parsedUrl.query),this.customParameters),{},{token:this.apiKey}),signal:t});case 4:r=e.sent,n=r.data,r.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=n,this.read(n,{origin:"service",url:this.parsedUrl});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}((0,C.h)((0,U.n)((0,M.M)((0,N.x)((0,T.O)((0,E.Y)((0,L.q)((0,R.I)((0,p.R)((0,F.Q)((0,I.V)((0,O.N)((0,h.p)(z.Z))))))))))))));(0,d._)([(0,_.Cb)({type:q.Z})],H.prototype,"dateFieldsTimeReference",void 0),(0,d._)([(0,_.Cb)({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),(0,d._)([(0,_.Cb)()],H.prototype,"dpi",void 0),(0,d._)([(0,_.Cb)()],H.prototype,"gdbVersion",void 0),(0,d._)([(0,_.Cb)()],H.prototype,"imageFormat",void 0),(0,d._)([(0,b.r)("imageFormat",["supportedImageFormatTypes"])],H.prototype,"readImageFormat",null),(0,d._)([(0,_.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],H.prototype,"imageMaxHeight",void 0),(0,d._)([(0,_.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],H.prototype,"imageMaxWidth",void 0),(0,d._)([(0,_.Cb)()],H.prototype,"imageTransparency",void 0),(0,d._)([(0,_.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:function(){return{enabled:!1}}}}})],H.prototype,"isReference",void 0),(0,d._)([(0,_.Cb)({json:{read:!1,write:!1}})],H.prototype,"labelsVisible",void 0),(0,d._)([(0,_.Cb)({type:["ArcGISMapServiceLayer"]})],H.prototype,"operationalLayerType",void 0),(0,d._)([(0,_.Cb)({json:{read:!1,write:!1}})],H.prototype,"popupEnabled",void 0),(0,d._)([(0,_.Cb)({type:q.Z})],H.prototype,"preferredTimeReference",void 0),(0,d._)([(0,_.Cb)()],H.prototype,"sourceJSON",void 0),(0,d._)([(0,_.Cb)({json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,d._)([(0,k.c)("sublayers",{layers:{type:[J.Z]},visibleLayers:{type:[g.z8]}})],H.prototype,"writeSublayers",null),(0,d._)([(0,_.Cb)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,d._)([(0,_.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],H.prototype,"type",void 0),(0,d._)([(0,_.Cb)(j.HQ)],H.prototype,"url",void 0);var W=H=(0,d._)([(0,S.j)("esri.layers.MapImageLayer")],H)},11936:function(e,t,r){r.d(t,{Y:function(){return c}});var i=r(15671),n=r(43144),a=r(60136),s=r(29388),o=r(27366),u=r(32718),l=r(49861),d=(r(25243),r(63780),r(93169),r(69912)),f=r(25899),c=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,n.Z)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,f.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,f.Nm)(e,u.Z.getLogger(this)))}}]),r}(e);return(0,o._)([(0,l.Cb)()],t.prototype,"title",null),(0,o._)([(0,l.Cb)({type:String})],t.prototype,"url",null),t=(0,o._)([(0,d.j)("esri.layers.mixins.ArcGISService")],t)}},99063:function(e,t,r){r.d(t,{n:function(){return p}});var i=r(15671),n=r(43144),a=r(60136),s=r(29388),o=r(27366),u=r(62044),l=r(12355),d=r(49861),f=(r(25243),r(63780),r(93169),r(38511)),c=r(69912),v=r(37270),h=r(57370),y=r(58359),p=function(e){var t=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).timeExtent=null,e.timeOffset=null,e.useViewTime=!0,e}return(0,n.Z)(r,[{key:"readOffset",value:function(e,t){var r=t.timeInfo.exportOptions;if(!r)return null;var i=r.timeOffset,n=y.v.fromJSON(r.timeOffsetUnits);return i&&n?new l.Z({value:i,unit:n}):null}},{key:"timeInfo",set:function(e){(0,v.UF)(e,this.fieldsIndex),this._set("timeInfo",e)}}]),r}(e);return(0,o._)([(0,d.Cb)({type:u.Z,json:{write:!1}})],t.prototype,"timeExtent",void 0),(0,o._)([(0,d.Cb)({type:l.Z})],t.prototype,"timeOffset",void 0),(0,o._)([(0,f.r)("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),(0,o._)([(0,d.Cb)({value:null,type:h.Z,json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),(0,o._)([(0,d.Cb)({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=(0,o._)([(0,c.j)("esri.layers.mixins.TemporalLayer")],t)}},44041:function(e,t,r){r.d(t,{R:function(){return _}});var i=r(1413),n=r(15671),a=r(43144),s=r(60136),o=r(29388),u=r(27366),l=r(7138),d=r(41691),f=r(76672),c=r(49861),v=(r(25243),r(63780),r(93169),r(69912)),h=r(45948),y=r(87072),p=r(58132),m={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"},_=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(e){var i;return(0,n.Z)(this,r),(i=t.call(this,e)).floors=null,i.scale=0,i}return(0,a.Z)(r,[{key:"destroy",value:function(){this.layer=null}},{key:"dynamicLayers",get:function(){var e=this;if(!this.hasDynamicLayers)return null;var t=this.visibleSublayers.map((function(t){var r=(0,y.f)(e.floors,t);return t.toExportImageJSON(r)}));return t.length?JSON.stringify(t):null}},{key:"hasDynamicLayers",get:function(){return this.layer&&(0,p.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}},{key:"layer",set:function(e){var t=this;this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",(function(){return t.notifyChange("visibleSublayers")})),e.on("sublayer-update",(function(e){return t.notifyChange(m[e.propertyName])}))],"layer"))}},{key:"layers",get:function(){var e=this.visibleSublayers;return e?e.length?"show:"+e.map((function(e){return e.id})).join(","):"show:-1":null}},{key:"layerDefs",get:function(){var e,t=this,r=!(null===(e=this.floors)||void 0===e||!e.length),i=this.visibleSublayers.filter((function(e){return null!=e.definitionExpression||r&&null!=e.floorInfo}));return i.length?JSON.stringify(i.reduce((function(e,r){var i=(0,y.f)(t.floors,r),n=(0,f._)(i,r.definitionExpression);return null!=n&&(e[r.id]=n),e}),{})):null}},{key:"version",get:function(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");var e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}},{key:"visibleSublayers",get:function(){var e=this,t=[];if(!this.layer)return t;var r=this.layer.sublayers;r&&r.forEach((function r(i){var n=e.scale,a=0===n,s=0===i.minScale||n<=i.minScale,o=0===i.maxScale||n>=i.maxScale;i.visible&&(a||s&&o)&&(i.sublayers?i.sublayers.forEach(r):t.unshift(i))}));var i=this._get("visibleSublayers");return!i||i.length!==t.length||i.some((function(e,r){return t[r]!==e}))?t:i}},{key:"toJSON",value:function(){var e=this.layer,t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t=(0,i.Z)((0,i.Z)({},t),{},{layers:this.layers,layerDefs:this.layerDefs}),t}}]),r}((0,d.p)(l.Z));(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"dynamicLayers",null),(0,u._)([(0,c.Cb)()],_.prototype,"floors",void 0),(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"hasDynamicLayers",null),(0,u._)([(0,c.Cb)()],_.prototype,"layer",null),(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"layers",null),(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"layerDefs",null),(0,u._)([(0,c.Cb)({type:Number})],_.prototype,"scale",void 0),(0,u._)([(0,c.Cb)(h.qG)],_.prototype,"timeExtent",void 0),(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"version",null),(0,u._)([(0,c.Cb)({readOnly:!0})],_.prototype,"visibleSublayers",null),_=(0,u._)([(0,v.j)("esri.layers.mixins.ExportImageParameters")],_)},57370:function(e,t,r){r.d(t,{Z:function(){return g}});var i=r(15671),n=r(43144),a=r(60136),s=r(29388),o=r(27366),u=r(62044),l=r(12355),d=r(11582),f=r(46784),c=r(49861),v=(r(25243),r(63780),r(93169),r(38511)),h=r(69912),y=r(31201),p=r(16354);function m(e,t){return l.Z.fromJSON({value:e,unit:t})}var _=function(e){(0,a.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).cumulative=!1,n.endField=null,n.fullTimeExtent=null,n.hasLiveData=!1,n.interval=null,n.startField=null,n.timeReference=null,n.trackIdField=null,n.useTime=!0,n}return(0,n.Z)(r,[{key:"readFullTimeExtent",value:function(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||2!==t.timeExtent.length)return null;var r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new u.Z({start:r,end:i})}},{key:"writeFullTimeExtent",value:function(e,t){e&&null!=e.start&&null!=e.end?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}},{key:"readInterval",value:function(e,t){return t.timeInterval&&t.timeIntervalUnits?m(t.timeInterval,t.timeIntervalUnits):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?m(t.defaultTimeInterval,t.defaultTimeIntervalUnits):null}},{key:"writeInterval",value:function(e,t){var r,i;t.timeInterval=null!==(r=null===e||void 0===e?void 0:e.toJSON().value)&&void 0!==r?r:null,t.timeIntervalUnits=null!==(i=null===e||void 0===e?void 0:e.toJSON().unit)&&void 0!==i?i:null}}]),r}((0,d.J)(f.wq));(0,o._)([(0,c.Cb)({type:Boolean,json:{name:"exportOptions.timeDataCumulative",write:!0}})],_.prototype,"cumulative",void 0),(0,o._)([(0,c.Cb)({type:String,json:{name:"endTimeField",write:{enabled:!0,allowNull:!0}}})],_.prototype,"endField",void 0),(0,o._)([(0,c.Cb)({type:u.Z,json:{write:{enabled:!0,allowNull:!0}}})],_.prototype,"fullTimeExtent",void 0),(0,o._)([(0,v.r)("fullTimeExtent",["timeExtent"])],_.prototype,"readFullTimeExtent",null),(0,o._)([(0,y.c)("fullTimeExtent")],_.prototype,"writeFullTimeExtent",null),(0,o._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"hasLiveData",void 0),(0,o._)([(0,c.Cb)({type:l.Z,json:{write:{enabled:!0,allowNull:!0}}})],_.prototype,"interval",void 0),(0,o._)([(0,v.r)("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],_.prototype,"readInterval",null),(0,o._)([(0,y.c)("interval")],_.prototype,"writeInterval",null),(0,o._)([(0,c.Cb)({type:String,json:{name:"startTimeField",write:{enabled:!0,allowNull:!0}}})],_.prototype,"startField",void 0),(0,o._)([(0,c.Cb)({type:p.Z,json:{write:{enabled:!0,allowNull:!0}}})],_.prototype,"timeReference",void 0),(0,o._)([(0,c.Cb)({type:String,json:{write:{enabled:!0,allowNull:!0}}})],_.prototype,"trackIdField",void 0),(0,o._)([(0,c.Cb)({type:Boolean,json:{name:"exportOptions.useTime",write:!0}})],_.prototype,"useTime",void 0);var g=_=(0,o._)([(0,h.j)("esri.layers.support.TimeInfo")],_)},87072:function(e,t,r){function i(e){var t,r=e.layer;return"floorInfo"in r&&null!==(t=r.floorInfo)&&void 0!==t&&t.floorField&&"floors"in e.view?a(e.view.floors,r.floorInfo.floorField):null}function n(e,t){var r;return"floorInfo"in t&&null!==(r=t.floorInfo)&&void 0!==r&&r.floorField?a(e,t.floorInfo.floorField):null}function a(e,t){if(null===e||void 0===e||!e.length)return null;var r=e.filter((function(e){return""!==e})).map((function(e){return"'".concat(e,"'")}));return r.push("''"),"".concat(t," IN (").concat(r.join(","),") OR ").concat(t," IS NULL")}r.d(t,{c:function(){return i},f:function(){return n}})},26704:function(e,t,r){r.d(t,{D:function(){return s}});var i=r(37762),n=r(25899),a=[];function s(e,t){var r;if((0,n.M8)(null!==(r=e.url)&&void 0!==r?r:""))return!0;var s,o=t.wkid,u=(0,i.Z)(a);try{for(u.s();!(s=u.n()).done;){var l,d=s.value;if((null!==(l=e.version)&&void 0!==l?l:0)>=d[0])return!0;if("function"==typeof d[1]&&(d[1]=d[1]()),d[1].has(o))return!1}}catch(f){u.e(f)}finally{u.f()}return!0}a.push([10.91,function(){for(var e=new Set([9709,9716,9741,9761,9766]),t=9712;t<=9713;t++)e.add(t);for(var r=9748;r<=9749;r++)e.add(r);for(var i=20904;i<=20932;i++)e.add(i);for(var n=21004;n<=21032;n++)e.add(n);for(var a=21207;a<=21264;a++)e.add(a);for(var s=21307;s<=21364;s++)e.add(s);for(var o=102759;o<=102760;o++)e.add(o);for(var u=102901;u<=102955;u++)e.add(u);return e}]),a.push([10.9,function(){for(var e=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]),t=9356;t<=9360;t++)e.add(t);for(var r=9404;r<=9407;r++)e.add(r);for(var i=9476;i<=9482;i++)e.add(i);for(var n=9487;n<=9494;n++)e.add(n);for(var a=9697;a<=9699;a++)e.add(a);return e}]),a.push([10.81,function(){for(var e=new Set([9265,9333,103598,103699]),t=9248;t<=9254;t++)e.add(t);for(var r=9271;r<=9273;r++)e.add(r);for(var i=9284;i<=9285;i++)e.add(i);for(var n=21453;n<=21463;n++)e.add(n);return e}]),a.push([10.8,function(){for(var e=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]),t=8035;t<=8036;t++)e.add(t);for(var r=8455;r<=8456;r++)e.add(r);for(var i=8518;i<=8529;i++)e.add(i);for(var n=8533;n<=8536;n++)e.add(n);for(var a=8538;a<=8540;a++)e.add(a);for(var s=8677;s<=8679;s++)e.add(s);for(var o=8902;o<=8903;o++)e.add(o);for(var u=8907;u<=8910;u++)e.add(u);for(var l=8949;l<=8951;l++)e.add(l);for(var d=8972;d<=8987;d++)e.add(d);for(var f=9039;f<=9040;f++)e.add(f);for(var c=9068;c<=9069;c++)e.add(c);for(var v=9140;v<=9141;v++)e.add(v);for(var h=9148;h<=9150;h++)e.add(h);for(var y=9153;y<=9159;y++)e.add(y);for(var p=9205;p<=9218;p++)e.add(p);for(var m=9221;m<=9222;m++)e.add(m);for(var _=54098;_<=54101;_++)e.add(_);return e}]),a.push([10.71,function(){for(var e=new Set([6316]),t=8351;t<=8353;t++)e.add(t);for(var r=9294;r<=9297;r++)e.add(r);for(var i=22619;i<=22621;i++)e.add(i);for(var n=103586;n<=103594;n++)e.add(n);return e}]),a.push([10.7,function(){for(var e=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]),t=8065;t<=8068;t++)e.add(t);for(var r=8082;r<=8083;r++)e.add(r);for(var i=8379;i<=8385;i++)e.add(i);for(var n=8836;n<=8840;n++)e.add(n);for(var a=8857;a<=8860;a++)e.add(a);for(var s=53035;s<=53037;s++)e.add(s);for(var o=54090;o<=54091;o++)e.add(o);for(var u=102498;u<=102499;u++)e.add(u);return e}]),a.push([10.61,function(){return new Set([102497])}]),a.push([10.6,function(){for(var e=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]),t=7755;t<=7787;t++)e.add(t);for(var r=7791;r<=7795;r++)e.add(r);for(var i=7799;i<=7801;i++)e.add(i);for(var n=7825;n<=7831;n++)e.add(n);for(var a=7877;a<=7878;a++)e.add(a);for(var s=7882;s<=7883;s++)e.add(s);for(var o=7991;o<=7992;o++)e.add(o);for(var u=8042;u<=8043;u++)e.add(u);for(var l=8058;l<=8059;l++)e.add(l);for(var d=8311;d<=8348;d++)e.add(d);for(var f=9060;f<=9067;f++)e.add(f);for(var c=102562;c<=102568;c++)e.add(c);for(var v=102799;v<=102900;v++)e.add(v);return e}]),a.push([10.51,function(){for(var e=new Set([7683,7881,7886,7899,8888,9e3]),t=8013;t<=8032;t++)e.add(t);for(var r=9053;r<=9057;r++)e.add(r);for(var i=104017;i<=104018;i++)e.add(i);for(var n=104971;n<=104974;n++)e.add(n);return e}]),a.push([10.5,function(){for(var e=new Set([6962,7035,7037,7039,7041,7084,7086,7133,7798,102399]),t=4087;t<=4088;t++)e.add(t);for(var r=5896;r<=5899;r++)e.add(r);for(var i=7005;i<=7007;i++)e.add(i);for(var n=7057;n<=7070;n++)e.add(n);for(var a=7073;a<=7082;a++)e.add(a);for(var s=7109;s<=7128;s++)e.add(s);for(var o=7844;o<=7859;o++)e.add(o);return e}])},58359:function(e,t,r){r.d(t,{v:function(){return i}});var i=(0,r(43404).w)()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0})}}]);
//# sourceMappingURL=3765.1be0cbc6.chunk.js.map