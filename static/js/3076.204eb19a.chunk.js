"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[3076],{16054:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(15671),i=r(43144),s=r(18759),o=function(){function e(t,r){(0,n.Z)(this,e),this._storage=new s.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,i.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return c},Xq:function(){return p}});var n,i,s=r(29439),o=r(37762),u=r(15671),a=r(43144),l=r(27546);(i=n||(n={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";var p=function(){function e(t,r,n){(0,u.Z)(this,e),this.name=t,this._storage=r,this.id=d+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),n&&(this._storage.registerRemoveFunc(this.id,n),this._removeFunc=!0)}return(0,a.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,n)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,u.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new l.Z,this._users=new l.Z}return(0,a.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,i,s){t=e.id+t;var o=this._db.get(t);if(o&&(this._size-=o.size,e.size-=o.size,this._db.delete(t),o.entry!==r&&this._notifyRemove(t,o.entry,n.ALL)),i>this._maxSize)this._notifyRemove(t,r,n.ALL);else if(void 0!==r)if(!i||i<0)console.warn("Refusing to cache entry with invalid size "+i);else{var u=1+Math.max(s,-3)- -3;this._db.set(t,{entry:r,size:i,lifetime:u,lives:u}),this._size+=i,e.size+=i,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,i){t=e.id+t;var s=this._db.get(t);if(s&&s.entry===r){for(this._size-=s.size,e.size-=s.size;i>this._maxSize;){var o=this._notifyRemove(t,r,n.SOME);if(!(null!=o&&o>0))return void this._db.delete(t);i=o}s.size=i,this._size+=i,e.size+=i,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},n=new Array;this._db.forEach((function(t,i){var s=t.lifetime;n[s]=(n[s]||0)+t.size,e._users.forAll((function(e){var n=e.id,s=e.name;if(i.startsWith(n)){var o=r[s]||0;r[s]=o+t.size}}))}));var i={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var n=r[t]||0;r[t]=n,i[t]=Math.round(100*e.hitRate)+"%"}else i[t]="0%"}));var s=Object.keys(r);s.sort((function(e,t){return r[t]-r[e]})),s.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+i[e]}));for(var o=n.length-1;o>=0;--o){var u=n[o];u&&(t["Priority "+(o+-3-1)]=Math.round(u/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,i){i.startsWith(r)&&(t._size-=e.size,t._db.delete(i),t._notifyRemove(i,e.entry,n.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,n.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var n;return this._removeFuncs.some((function(i){if(e.startsWith(i[0])){var s=i[1](t,r);return"number"==typeof s&&(n=s),!0}return!1})),n}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,o.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var n=(0,s.Z)(t.value,2),i=n[0],u=n[1];if(this._purgeItem(i,u),this._size<=.9*this.maxSize)return}}catch(a){r.e(a)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,n=(0,o.Z)(e._db);try{for(n.s();!(r=n.n()).done;){var i=(0,s.Z)(r.value,2),u=i[0],l=i[1];if(u.startsWith(t.id)&&(e._purgeItem(u,l,t),t.size<=.9*t.maxSize))return}}catch(a){n.e(a)}finally{n.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var i=this._notifyRemove(e,t.entry,n.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),d=0},48732:function(e,t,r){r.d(t,{Hg:function(){return v},V7:function(){return h},uD:function(){return f}});var n=r(4942),i=r(37762),s=r(7138),o=r(40281),u=r(23879),a=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function l(e){return e instanceof s.Z}function p(e){return e instanceof o.Z?Object.keys(e.items):l(e)?(0,u.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof o.Z?e.items[t]:e[t]}function d(e){return e?e.declaredClass:null}function y(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var s=p(e),o=p(t);if(0!==s.length||0!==o.length){if(!s.length||!o.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var u,f=o.filter((function(e){return!s.includes(e)})),h=s.filter((function(e){return!o.includes(e)})),v=s.filter((function(r){return o.includes(r)&&c(e,r)!==c(t,r)})).concat(f,h).sort(),b=d(e);if(b&&a.includes(b)&&v.length)return{type:"complete",oldValue:e,newValue:t};var m,g=l(e)&&l(t),_=(0,i.Z)(v);try{for(_.s();!(m=_.n()).done;){var w=m.value,S=c(e,w),k=c(t,w),C=void 0;if((g||"function"!=typeof S&&"function"!=typeof k)&&S!==k&&(null!=S||null!=k)){var Z;if(r&&r[w]&&"function"==typeof r[w])C=null===(Z=r[w])||void 0===Z?void 0:Z.call(r,S,k);else if(S instanceof Date&&k instanceof Date){if(S.getTime()===k.getTime())continue;C={type:"complete",oldValue:S,newValue:k}}else C="object"==typeof S&&"object"==typeof k&&d(S)===d(k)?y(S,k):{type:"complete",oldValue:S,newValue:k};null!=C&&(null!=u?u.diff[w]=C:u={type:"partial",diff:(0,n.Z)({},w,C)})}}}catch(x){_.e(x)}finally{_.f()}return u}}function f(e,t){if(null==e)return!1;var r,n=t.split("."),s=e,o=(0,i.Z)(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;if("complete"===s.type)return!0;if("partial"!==s.type)return!1;var a=s.diff[u];if(!a)return!1;s=a}}catch(l){o.e(l)}finally{o.f()}return!0}function h(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(f(e,r.value))return!0}}catch(s){n.e(s)}finally{n.f()}return!1}function v(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&d(e)!==d(t)?{type:"complete",oldValue:e,newValue:t}:y(e,t)}},50255:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ee}});var n=r(37762),i=r(74165),s=r(15861),o=r(1413),u=r(15671),a=r(43144),l=r(11752),p=r(61120),c=r(60136),d=r(29388),y=r(27366),f=r(40281),h=r(10064),v=r(41691),b=r(93002),m=r(97642),g=r(66978),_=r(94172),w=r(76672),S=r(35995),k=r(49861),C=(r(25243),r(63780),r(93169),r(38511)),Z=r(69912),x=r(25265),F=r(30651),A=r(27961),z=r(11936),I=r(6693),O=r(46671),R=r(56601),E=r(32526),j=r(6061),L=r(29598),T=r(71684),M=r(56811),P=r(99063),Q=r(25899),D=r(45948),q=r(62594),G=r(25610),V=r(37270),U=r(46784),H=r(31201),N=r(66591),B=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(){var e;return(0,u.Z)(this,r),(e=t.apply(this,arguments)).code=null,e.defaultValues={},e.domains=null,e.name=null,e}return(0,a.Z)(r,[{key:"readDomains",value:function(e){if(!e)return null;for(var t={},r=0,n=Object.keys(e);r<n.length;r++){var i=n[r];t[i]=(0,N.im)(e[i])}return t}},{key:"writeDomains",value:function(e,t){if(e){for(var r={},n=0,i=Object.keys(e);n<i.length;n++){var s,o=i[n];e[o]&&(r[o]=null===(s=e[o])||void 0===s?void 0:s.toJSON())}t.domains=r}}}]),r}(U.wq);(0,y._)([(0,k.Cb)({type:Number,json:{write:!0}})],B.prototype,"code",void 0),(0,y._)([(0,k.Cb)({type:Object,json:{write:!0}})],B.prototype,"defaultValues",void 0),(0,y._)([(0,k.Cb)({json:{write:!0}})],B.prototype,"domains",void 0),(0,y._)([(0,C.r)("domains")],B.prototype,"readDomains",null),(0,y._)([(0,H.c)("domains")],B.prototype,"writeDomains",null),(0,y._)([(0,k.Cb)({type:String,json:{write:!0}})],B.prototype,"name",void 0);var W=B=(0,y._)([(0,Z.j)("esri.layers.support.Subtype")],B),K=r(44055),J=r(94931),Y=(r(78451),r(98689),r(57823),r(32066),r(30505)),X=r(34999),$=r(28189),ee=(r(9014),r(79056)),te=r(84652),re=r(54472),ne=r(32718),ie=r(18202),se=r(47492),oe=r(40743),ue=r(12224),ae=r(77748),le=r(85116),pe=r(86638),ce=r(81085),de=r(61574),ye=["charts","editingEnabled","formTemplate","labelsVisible","labelingInfo","legendEnabled","minScale","maxScale","opacity","popupEnabled","popupTemplate","renderer","subtypeCode","templates","title","visible"],fe={key:"type",base:Y.Z,errorContext:"renderer",typeMap:{simple:X.Z,"unique-value":$.Z,"class-breaks":J.Z}},he=(0,G.v)(),ve=(0,se.d)({types:fe}),be=0;function me(e){var t=e.json.write;return"object"==typeof t?t.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function ge(e){switch(e){case"point":case"multipoint":return de.xA.clone();case"polyline":return de.CJ.clone();case"polygon":case"multipatch":return de.z3.clone();default:return null}}function _e(e,t){var r;return null==e?null:null===(r=t.subtypes)||void 0===r?void 0:r.find((function(t){return t.code===e}))}function we(e,t){var r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:t.type,r=null}var n={},i=_e(e,t);if(null!=i){var s=i.defaultValues;for(var o in s)n[o]=s[o]}return n[t.subtypeField]=e,new ue.Z({name:"New Feature",drawingTool:r,prototype:{attributes:n}})}var Se="esri.layers.support.SubtypeSublayer",ke=function(e){(0,c.Z)(r,e);var t=(0,d.Z)(r);function r(e){var n;return(0,u.Z)(this,r),(n=t.call(this,e)).charts=null,n.editingEnabled=!0,n.fieldOverrides=null,n.fieldsIndex=null,n.formTemplate=null,n.id="".concat(Date.now().toString(16),"-subtype-sublayer-").concat(be++),n.type="subtype-sublayer",n.labelsVisible=!0,n.labelingInfo=null,n.layerType="ArcGISFeatureLayer",n.legendEnabled=!0,n.listMode="show",n.minScale=0,n.maxScale=0,n.opacity=1,n.parent=null,n.popupEnabled=!0,n.popupTemplate=null,n.subtypeCode=null,n.templates=null,n.title=null,n.visible=!0,n}return(0,a.Z)(r,[{key:"capabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}},{key:"effectiveCapabilities",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}},{key:"effectiveEditingEnabled",get:function(){var e=this.parent;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}},{key:"elevationInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.elevationInfo}},{key:"writeFieldOverrides",value:function(e,t,r){var n,i,s=this.fields,o=this.parent;if(s){i=[];var u=0;s.forEach((function(e){var t,r=e.name,n=e.alias,s=e.editable;if(e.visible){var a=null===o||void 0===o||null===(t=o.fields)||void 0===t?void 0:t.find((function(e){return e.name===r}));if(a){var l={name:r},p=!1;n!==a.alias&&(l.alias=n,p=!0),s!==a.editable&&(l.editable=s,p=!0),i.push(l),p&&u++}}})),0===u&&i.length===s.length&&(i=null)}else i=(0,te.d9)(e);(null===(n=i)||void 0===n?void 0:n.length)&&(0,ie.RB)(r,i,t)}},{key:"fields",get:function(){var e=this.parent,t=this.fieldOverrides,r=this.subtypeCode,i=null===e||void 0===e?void 0:e.fields;if(!e||null===i||void 0===i||!i.length)return null;var s,o=e.subtypes,u=e.subtypeField,a=null===o||void 0===o?void 0:o.find((function(e){return e.code===r})),l=null===a||void 0===a?void 0:a.defaultValues,p=null===a||void 0===a?void 0:a.domains,c=[],d=(0,n.Z)(i);try{var y=function(){var e,n,i=s.value.clone(),o=i.name,a=null===t||void 0===t?void 0:t.find((function(e){return e.name===o}));if(i.visible=!t||!!a,a){var d=a.alias,y=a.editable;d&&(i.alias=d),!1===y&&(i.editable=!1)}var f=null!==(e=null===l||void 0===l?void 0:l[o])&&void 0!==e?e:null;i.defaultValue=o===u?r:f;var h=null!==(n=null===p||void 0===p?void 0:p[o])&&void 0!==n?n:null;i.domain=o===u?null:h?"inherited"===h.type?i.domain:h.clone():null,c.push(i)};for(d.s();!(s=d.n()).done;)y()}catch(f){d.e(f)}finally{d.f()}return c}},{key:"floorInfo",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.floorInfo}},{key:"geometryType",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}},{key:"effectiveScaleRange",get:function(){return{minScale:this.minScale,maxScale:this.maxScale}}},{key:"objectIdField",get:function(){var e;return this.parent||ne.Z.getLogger(Se).error(Ze("objectIdField")),null===(e=this.parent)||void 0===e?void 0:e.objectIdField}},{key:"defaultPopupTemplate",get:function(){return this.createPopupTemplate()}},{key:"renderer",get:function(){if(this._isOverridden("renderer"))return this._get("renderer");var e=this.parent;return e&&!e.isTable&&"mesh"!==e.geometryType?function(e){return new X.Z({symbol:ge(e)})}(e.geometryType):null},set:function(e){(0,V.YN)(e,this.fieldsIndex),this._override("renderer",e)}},{key:"readRendererFromService",value:function(e,t,r){var n,i;if("Table"===t.type)return null;var s,o=null===(n=t.drawingInfo)||void 0===n?void 0:n.renderer,u=ve(o,t,r),a=this.subtypeCode;if(null!=a&&function(e,t){return!!t&&"unique-value"===(null===e||void 0===e?void 0:e.type)&&"string"==typeof e.field&&e.field.toLowerCase()===t.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(u,t.subtypeField)){var l,p=null===(l=u.uniqueValueInfos)||void 0===l?void 0:l.find((function(e){var t=e.value;return(t="number"==typeof t?String(t):t)===String(a)}));p&&(s=new X.Z({symbol:p.symbol}))}else"simple"!==(null===u||void 0===u?void 0:u.type)||(null===(i=u.visualVariables)||void 0===i?void 0:i.length)||(s=u);return s}},{key:"readRenderer",value:function(e,t,r){var n,i,s=null===t||void 0===t||null===(n=t.layerDefinition)||void 0===n||null===(n=n.drawingInfo)||void 0===n?void 0:n.renderer;if(s){var o=null===(i=s.visualVariables)||void 0===i?void 0:i.some((function(e){return"rotationInfo"!==e.type}));return o?void 0:ve(s,t,r)||void 0}}},{key:"spatialReference",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.spatialReference}},{key:"readTemplatesFromService",value:function(e,t){return[we(this.subtypeCode,t)]}},{key:"readTitleFromService",value:function(e,t){var r=_e(this.subtypeCode,t);return null!=r?r.name:null}},{key:"url",get:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.url}},{key:"userHasUpdateItemPrivileges",get:function(){var e;return!(null===(e=this.parent)||void 0===e||!e.userHasUpdateItemPrivileges)}},{key:"addAttachment",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.parent){e.next=3;break}throw Ze("addAttachment");case 3:if(t.getAttribute(n.subtypeField)===this.subtypeCode){e.next=5;break}throw new h.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",n.addAttachment(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){var s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=this.parent){e.next=3;break}throw Ze("updateAttachment");case 3:if(t.getAttribute(s.subtypeField)===this.subtypeCode){e.next=5;break}throw new h.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",s.updateAttachment(t,r,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"deleteAttachments",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.parent){e.next=3;break}throw Ze("deleteAttachments");case 3:if(t.getAttribute(n.subtypeField)===this.subtypeCode){e.next=5;break}throw new h.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");case 5:return e.abrupt("return",n.deleteAttachments(t,r));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parent){e.next=2;break}throw Ze("applyEdits");case 2:return e.abrupt("return",this.parent.applyEdits(t,r));case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createPopupTemplate",value:function(e){var t=this,r=this.parent,n=this.fields,i=this.title;r&&(t={displayField:r.displayField,editFieldsInfo:r.editFieldsInfo,fields:n,objectIdField:r.objectIdField,title:i});return(0,ce.eZ)(t,e)}},{key:"createQuery",value:function(){if(!this.parent)throw Ze("createQuery");var e=(0,q.rP)(this.parent),t="".concat(this.parent.subtypeField,"=").concat(this.subtypeCode);return e.where=(0,w._)(t,this.parent.definitionExpression),e}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"getFieldDomain",value:function(e){return this._getLayerDomain(e)}},{key:"hasUserOverrides",value:function(){var e=this;return ye.some((function(t){return e.originIdOf(t)===x.s3.USER}))}},{key:"queryAttachments",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((n=e.sent).parent){e.next=5;break}throw Ze("queryAttachments");case 5:return s=t.clone(),e.abrupt("return",(s.where=Ce(s.where,n.parent.subtypeField,n.subtypeCode),n.parent.queryAttachments(t,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var n,s,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if((s=e.sent).parent){e.next=5;break}throw Ze("queryFeatures");case 5:return o=null!==(n=pe.Z.from(t))&&void 0!==n?n:s.createQuery(),e.abrupt("return",(null!=t&&(o.where=Ce(o.where,s.parent.subtypeField,s.subtypeCode)),s.parent.queryFeatures(o,r)));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}}]),r}((0,v.p)((0,m.R)((0,ee.IG)(re.Z))));(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"capabilities",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"effectiveCapabilities",null),(0,y._)([(0,k.Cb)({json:{write:{ignoreOrigin:!0}}})],ke.prototype,"charts",void 0),(0,y._)([(0,k.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],ke.prototype,"editingEnabled",void 0),(0,y._)([(0,k.Cb)({type:Boolean,readOnly:!0})],ke.prototype,"effectiveEditingEnabled",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"elevationInfo",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],ke.prototype,"fieldOverrides",void 0),(0,y._)([(0,H.c)("fieldOverrides")],ke.prototype,"writeFieldOverrides",null),(0,y._)([(0,k.Cb)((0,o.Z)((0,o.Z)({},he.fields),{},{readOnly:!0,json:{read:!1}}))],ke.prototype,"fields",null),(0,y._)([(0,k.Cb)(he.fieldsIndex)],ke.prototype,"fieldsIndex",void 0),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"floorInfo",null),(0,y._)([(0,k.Cb)({type:oe.Z,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],ke.prototype,"formTemplate",void 0),(0,y._)([(0,k.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],ke.prototype,"id",void 0),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"geometryType",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"type",void 0),(0,y._)([(0,k.Cb)(me((0,te.d9)(D.iR)))],ke.prototype,"labelsVisible",void 0),(0,y._)([(0,k.Cb)({type:[ae.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:le.r},write:{ignoreOrigin:!0}}})],ke.prototype,"labelingInfo",void 0),(0,y._)([(0,k.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],ke.prototype,"layerType",void 0),(0,y._)([(0,k.Cb)(me((0,te.d9)(D.rn)))],ke.prototype,"legendEnabled",void 0),(0,y._)([(0,k.Cb)({type:["show","hide"]})],ke.prototype,"listMode",void 0),(0,y._)([(0,k.Cb)(function(){var e=(0,te.d9)(D.rO);return e.json.origins.service.read=!1,me(e)}())],ke.prototype,"minScale",void 0),(0,y._)([(0,k.Cb)(function(){var e=(0,te.d9)(D.u1);return e.json.origins.service.read=!1,me(e)}())],ke.prototype,"maxScale",void 0),(0,y._)([(0,k.Cb)({readOnly:!0})],ke.prototype,"effectiveScaleRange",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"objectIdField",null),(0,y._)([(0,k.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],ke.prototype,"opacity",void 0),(0,y._)([(0,k.Cb)()],ke.prototype,"parent",void 0),(0,y._)([(0,k.Cb)(me((0,te.d9)(D.C_)))],ke.prototype,"popupEnabled",void 0),(0,y._)([(0,k.Cb)({type:K.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],ke.prototype,"popupTemplate",void 0),(0,y._)([(0,k.Cb)({readOnly:!0})],ke.prototype,"defaultPopupTemplate",null),(0,y._)([(0,k.Cb)({types:fe,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],ke.prototype,"renderer",null),(0,y._)([(0,C.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],ke.prototype,"readRendererFromService",null),(0,y._)([(0,C.r)("renderer",["layerDefinition.drawingInfo.renderer"])],ke.prototype,"readRenderer",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"spatialReference",null),(0,y._)([(0,k.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],ke.prototype,"subtypeCode",void 0),(0,y._)([(0,k.Cb)({type:[ue.Z],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],ke.prototype,"templates",void 0),(0,y._)([(0,C.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],ke.prototype,"readTemplatesFromService",null),(0,y._)([(0,k.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],ke.prototype,"title",void 0),(0,y._)([(0,C.r)("service","title",["subtypes"])],ke.prototype,"readTitleFromService",null),(0,y._)([(0,k.Cb)({readOnly:!0,json:{read:!1}})],ke.prototype,"url",null),(0,y._)([(0,k.Cb)({readOnly:!0})],ke.prototype,"userHasUpdateItemPrivileges",null),(0,y._)([(0,k.Cb)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],ke.prototype,"visible",void 0),ke=(0,y._)([(0,Z.j)(Se)],ke);var Ce=function(e,t,r){var n=new RegExp("".concat(t,"\\s*=\\s*\\d+")),i="".concat(t,"=").concat(r),s=null!==e&&void 0!==e?e:"";return n.test(s)?s.replace(n,i):(0,w._)(i,s)},Ze=function(e){return new h.Z("This sublayer must have a parent SubtypeGroupLayer in order to use ".concat(e))},xe=ke,Fe=r(57370),Ae=r(26704),ze="SubtypeGroupLayer";function Ie(e,t){return new h.Z("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(t),{layer:e})}var Oe=(0,G.v)(),Re=function(e){(0,c.Z)(y,e);var t=(0,d.Z)(y);function y(){var e;(0,u.Z)(this,y);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n)))._sublayersCollectionChanged=!1,e._sublayerLookup=new Map,e.fields=null,e.fieldsIndex=null,e.outFields=null,e.subtypes=null,e.sublayers=new(f.Z.ofType(xe)),e.timeInfo=null,e.title="Layer",e.type="subtype-group",e.addHandles((0,_.YP)((function(){return e.sublayers}),(function(t,r){return e._handleSublayersChange(t,r)}),_.Z_)),e}return(0,a.Z)(y,[{key:"destroy",value:function(){var e;null===(e=this.source)||void 0===e||e.destroy()}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,o.Z)({url:e},t):e}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null,n=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(g.r9).then((0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url){e.next=2;break}throw new h.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");case 2:if(null!=t.layerId){e.next=4;break}throw new h.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");case 4:return e.t0=t,e.next=7,t.createGraphicsSource(r);case 7:return e.t1=e.sent,e.abrupt("return",e.t0._initLayerProperties.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e)})))).then((function(){return t._setUserPrivileges(t.serviceItemId,e)})).then((function(){return(0,q.nU)(t,e)}));return this.addResolvingPromise(n),Promise.resolve(this)}},{key:"createQueryVersion",get:function(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}},{key:"editingEnabled",get:function(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}},{key:"effectiveEditingEnabled",get:function(){return(0,q.sX)(this)}},{key:"parsedUrl",get:function(){var e=(0,S.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,S.v_)(e.path,this.layerId.toString())),e}},{key:"source",set:function(e){this._get("source")!==e&&this._set("source",e)}},{key:"readTitleFromService",value:function(e,t){var r=t.name;return this.url?(0,Q.a7)(this.url,r):r}},{key:"addAttachment",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.JD)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"updateAttachment",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r,n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Y5)(this,t,r,n,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"applyEdits",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Jj)(this,t,r));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"on",value:function(e,t){return(0,l.Z)((0,p.Z)(y.prototype),"on",this).call(this,e,t)}},{key:"createGraphicsSource",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var n,s;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,g.Hl)(Promise.all([r.e(3406),r.e(1340),r.e(7607),r.e(5226),r.e(9887),r.e(9623),r.e(8734),r.e(1220)]).then(r.bind(r,68734)),t);case 2:return n=e.sent,s=n.default,e.abrupt("return",new s({layer:this}).load({signal:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createQuery",value:function(){var e=(0,q.rP)(this),t=this.sublayers.map((function(e){return e.subtypeCode}));return e.where=(0,w._)("".concat(this.subtypeField," IN (").concat(t.join(","),")"),this.definitionExpression),e}},{key:"deleteAttachments",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.FV)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"fetchRecomputedExtents",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.Ci)(this,t,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"findSublayerForFeature",value:function(e){var t=this.fieldsIndex.get(this.subtypeField),r=e.attributes[t.name];return this.findSublayerForSubtypeCode(r)}},{key:"findSublayerForSubtypeCode",value:function(e){return this._sublayerLookup.get(e)}},{key:"getFieldDomain",value:function(e,t){return this._getLayerDomain(e)}},{key:"getField",value:function(e){return this.fieldsIndex.get(e)}},{key:"loadAll",value:function(){var e=this;return(0,b.G)(this,(function(t){t(e.sublayers)}))}},{key:"queryAttachments",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.SU)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatures",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){var s,o,u,a,l,p,c,d,y;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:return u=e.sent,a=null!==(s=pe.Z.from(t))&&void 0!==s?s:u.createQuery(),(l=null!==(o=a.outFields)&&void 0!==o?o:[]).includes(this.subtypeField)||(l.push(this.subtypeField),a.outFields=l),e.next=8,u.source.queryFeatures(a,r);case 8:if(null!==(p=e.sent)&&void 0!==p&&p.features){c=(0,n.Z)(p.features);try{for(c.s();!(d=c.n()).done;)(y=d.value).layer=y.sourceLayer=this.findSublayerForFeature(y)}catch(i){c.e(i)}finally{c.f()}}return e.abrupt("return",p);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryObjectIds",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.tD)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryFeatureCount",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.VG)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryExtent",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.KE)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeatures",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.kp)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"queryRelatedFeaturesCount",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.C9)(this,t,r,ze));case 1:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"write",value:function(e,t){var r,n=t.origin,i=t.layerContainerType,s=t.messages;if(this.isTable){if("web-scene"===n||"web-map"===n&&"tables"!==i)return null!==s&&void 0!==s&&s.push(Ie(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===n&&"tables"===i)return null!==s&&void 0!==s&&s.push(Ie(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(r=this.sublayers)&&void 0!==r&&r.length?(0,l.Z)((0,p.Z)(y.prototype),"write",this).call(this,e,t):(null!==s&&void 0!==s&&s.push(new h.Z("web-document-write:invalid-property","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer"),{layer:this})),null)}},{key:"serviceSupportsSpatialReference",value:function(e){return!!this.loaded&&(0,Ae.D)(this,e)}},{key:"_getLayerDomain",value:function(e){var t=this.fieldsIndex.get(e);return t?t.domain:null}},{key:"_initLayerProperties",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(t){var r,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._set("source",t),(n=t.sourceJSON)&&(this.sourceJSON=n,this.read(n,{origin:"service",url:this.parsedUrl})),!this.isTable){e.next=4;break}throw new h.Z("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");case 4:if(null!==(r=this.subtypes)&&void 0!==r&&r.length){e.next=6;break}throw new h.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");case 6:this._verifyFields(),(0,V.UF)(this.timeInfo,this.fieldsIndex);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasDataChanged",value:function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,q.gG)(this));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_verifyFields",value:function(){var e,t,r,n=null!==(e=null===(t=this.parsedUrl)||void 0===t?void 0:t.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+n+")"),this.isTable||-1!==n.search(/\/FeatureServer\//i)||(null===(r=this.fields)||void 0===r?void 0:r.some((function(e){return"geometry"===e.type})))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+n+")")}},{key:"_handleSublayersChange",value:function(e,t){var r=this;t&&(t.forEach((function(e){e.parent=null})),this.handles.remove("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((function(e){e.parent=r,r._sublayerLookup.set(e.subtypeCode,e)})),this._sublayersCollectionChanged=!1,this.handles.add([e.on("after-add",(function(e){var t=e.item;t.parent=r,r._sublayerLookup.set(t.subtypeCode,t)})),e.on("after-remove",(function(e){var t=e.item;t.parent=null,r._sublayerLookup.delete(t.subtypeCode)})),e.on("after-changes",(function(){r._sublayersCollectionChanged=!0}))],"sublayers-owner"))}}]),y}((0,E.B)((0,R.o1)((0,I.h)((0,P.n)((0,M.M)((0,T.Q)((0,z.Y)((0,j.q)((0,L.I)((0,m.R)((0,O.N)((0,A.V)((0,v.p)(F.Z))))))))))))));(0,y._)([(0,k.Cb)({readOnly:!0})],Re.prototype,"createQueryVersion",null),(0,y._)([(0,k.Cb)({readOnly:!0})],Re.prototype,"editingEnabled",null),(0,y._)([(0,k.Cb)({readOnly:!0})],Re.prototype,"effectiveEditingEnabled",null),(0,y._)([(0,k.Cb)((0,o.Z)((0,o.Z)({},Oe.fields),{},{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],Re.prototype,"fields",void 0),(0,y._)([(0,k.Cb)(Oe.fieldsIndex)],Re.prototype,"fieldsIndex",void 0),(0,y._)([(0,k.Cb)(D.id)],Re.prototype,"id",void 0),(0,y._)([(0,k.Cb)({type:["show","hide","hide-children"]})],Re.prototype,"listMode",void 0),(0,y._)([(0,k.Cb)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"]})],Re.prototype,"operationalLayerType",void 0),(0,y._)([(0,k.Cb)(Oe.outFields)],Re.prototype,"outFields",void 0),(0,y._)([(0,k.Cb)({readOnly:!0})],Re.prototype,"parsedUrl",null),(0,y._)([(0,k.Cb)()],Re.prototype,"source",null),(0,y._)([(0,k.Cb)({type:[W],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],Re.prototype,"subtypes",void 0),(0,y._)([(0,k.Cb)({type:f.Z.ofType(xe),json:{origins:{service:{read:{source:"subtypes",reader:function(e,t,r){var n=e.map((function(e){var n=e.code,i=new xe({subtypeCode:n});return i.read(t,r),i}));return new(f.Z.ofType(xe))(n)}}}},name:"layers",write:{overridePolicy:function(e,t,r){var n=this.originOf("sublayers"),i=x.s3.PORTAL_ITEM,s=!0;if((0,x.M9)(n)===i&&(0,x.M9)(r.origin)>i){var o=e.some((function(e){return e.hasUserOverrides()}));s=this._sublayersCollectionChanged||o}return{enabled:s,ignoreOrigin:!0}}}}})],Re.prototype,"sublayers",void 0),(0,y._)([(0,k.Cb)({type:Fe.Z})],Re.prototype,"timeInfo",void 0),(0,y._)([(0,k.Cb)({json:{origins:{"portal-item":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],Re.prototype,"title",void 0),(0,y._)([(0,C.r)("service","title",["name"])],Re.prototype,"readTitleFromService",null),(0,y._)([(0,k.Cb)({json:{read:!1}})],Re.prototype,"type",void 0);var Ee=Re=(0,y._)([(0,Z.j)("esri.layers.SubtypeGroupLayer")],Re)},27961:function(e,t,r){r.d(t,{V:function(){return p}});var n=r(15671),i=r(43144),s=r(60136),o=r(29388),u=r(27366),a=r(49861),l=(r(25243),r(63780),r(93169),r(69912));var p=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"apiKey",get:function(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null},set:function(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}}]),r}(e);return(0,u._)([(0,a.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,u._)([(0,l.j)("esri.layers.mixins.APIKeyMixin")],t)}},11936:function(e,t,r){r.d(t,{Y:function(){return d}});var n=r(15671),i=r(43144),s=r(60136),o=r(29388),u=r(27366),a=r(32718),l=r(49861),p=(r(25243),r(63780),r(93169),r(69912)),c=r(25899),d=function(e){var t=function(e){(0,s.Z)(r,e);var t=(0,o.Z)(r);function r(){return(0,n.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"title",get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=(0,c.Qc)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)}},{key:"url",set:function(e){this._set("url",(0,c.Nm)(e,a.Z.getLogger(this)))}}]),r}(e);return(0,u._)([(0,l.Cb)()],t.prototype,"title",null),(0,u._)([(0,l.Cb)({type:String})],t.prototype,"url",null),t=(0,u._)([(0,p.j)("esri.layers.mixins.ArcGISService")],t)}},71065:function(e,t,r){r.d(t,{Z:function(){return f}});var n,i=r(15671),s=r(43144),o=r(60136),u=r(29388),a=r(27366),l=r(40281),p=r(46784),c=r(49861),d=(r(25243),r(63780),r(93169),r(69912)),y=n=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).floorField=null,n.viewAllMode=!1,n.viewAllLevelIds=new l.Z,n}return(0,s.Z)(r,[{key:"clone",value:function(){return new n({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}}]),r}(p.wq);(0,a._)([(0,c.Cb)({type:String,json:{write:!0}})],y.prototype,"floorField",void 0),(0,a._)([(0,c.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllMode",void 0),(0,a._)([(0,c.Cb)({json:{read:!1,write:!1}})],y.prototype,"viewAllLevelIds",void 0);var f=y=n=(0,a._)([(0,d.j)("esri.layers.support.LayerFloorInfo")],y)},94582:function(e,t,r){r.d(t,{h:function(){return c}});var n=r(93169),i=r(25899),s={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function o(e,t,r){return!!a(e,t,r)}function u(e,t,r){return a(e,t,r)}function a(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}function l(e){var t,r=null===e||void 0===e||null===(t=e.supportedSpatialAggregationStatistics)||void 0===t?void 0:t.map((function(e){return e.toLowerCase()}));return{envelope:!(null===r||void 0===r||!r.includes("envelopeaggregate")),centroid:!(null===r||void 0===r||!r.includes("centroidaggregate")),convexHull:!(null===r||void 0===r||!r.includes("convexhullaggregate"))}}function p(e,t){var r,n=null===e||void 0===e||null===(r=e.supportedOperationsWithCacheHint)||void 0===r?void 0:r.map((function(e){return e.toLowerCase()}));return!(null===n||void 0===n||!n.includes(t.toLowerCase()))}function c(e,t){return{analytics:d(e),attachment:y(e),data:f(e),metadata:h(e),operations:v(e.capabilities,e,t),query:b(e,t),queryRelated:m(e),queryTopFeatures:g(e),editing:_(e)}}function d(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryAnalytics")}}function y(e){var t=e.attachmentProperties,r={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:p(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:o(e,"supportsAttachmentsResizing",!1)};return t&&Array.isArray(t)&&t.forEach((function(e){var t=s[e.name];t&&(r[t]=!!e.isEnabled)})),r}function f(e){return{isVersioned:o(e,"isDataVersioned",!1),supportsAttachment:o(e,"hasAttachments",!1),supportsM:o(e,"hasM",!1),supportsZ:o(e,"hasZ",!1)}}function h(e){return{supportsAdvancedFieldProperties:o(e,"supportsFieldDescriptionProperty",!1)}}function v(e,t,r){var n=e?e.toLowerCase().split(",").map((function(e){return e.trim()})):[],s=r?(0,i.Qc)(r):null,u=n.includes(null!=s&&"MapServer"===s.serverType?"data":"query"),a=n.includes("editing")&&!t.datesInUnknownTimezone,l=a&&n.includes("create"),p=a&&n.includes("delete"),c=a&&n.includes("update"),d=n.includes("changetracking"),y=t.advancedQueryCapabilities;return a&&!(l||p||c)&&(l=p=c=!0),{supportsCalculate:o(t,"supportsCalculate",!1),supportsTruncate:o(t,"supportsTruncate",!1),supportsValidateSql:o(t,"supportsValidateSql",!1),supportsAdd:l,supportsDelete:p,supportsEditing:a,supportsChangeTracking:d,supportsQuery:u,supportsQueryAnalytics:o(y,"supportsQueryAnalytic",!1),supportsQueryAttachments:o(y,"supportsQueryAttachments",!1),supportsQueryTopFeatures:o(y,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:o(t,"supportsAttachmentsResizing",!1),supportsSync:n.includes("sync"),supportsUpdate:c,supportsExceedsLimitStatistics:o(t,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:o(t,"supportsAsyncConvert3D",!1)}}function b(e,t){var r,s=e.advancedQueryCapabilities,a=e.ownershipBasedAccessControlForFeatures,c=e.archivingInfo,d=e.currentVersion,y=!(null===t||void 0===t?void 0:t.includes("MapServer"))||d>=(0,n.Z)("mapserver-pbf-version-support"),f=(0,i.M8)(t),h=new Set((null!==(r=e.supportedQueryFormats)&&void 0!==r?r:"").split(",").map((function(e){return e.toLowerCase().trim()})));return{supportsStatistics:o(s,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:o(s,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:o(s,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:l(s),supportsCentroid:o(s,"supportsReturningGeometryCentroid",!1),supportsDistance:o(s,"supportsQueryWithDistance",!1),supportsDistinct:o(s,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:o(s,"supportsReturningQueryExtent",!1),supportsGeometryProperties:o(s,"supportsReturningGeometryProperties",!1),supportsHavingClause:o(s,"supportsHavingClause",!1),supportsOrderBy:o(s,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:o(s,"supportsPagination",!1),supportsQuantization:o(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:o(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:o(e,"supportsReturningQueryGeometry",!1),supportsResultType:o(s,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:o(s,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:o(s,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:o(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:o(s,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:o(a,"allowOthersToQuery",!0),supportsHistoricMoment:o(c,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:y&&h.has("pbf"),supportsDisjointSpatialRelationship:o(s,"supportsDisjointSpatialRel",!1),supportsCacheHint:o(s,"supportsQueryWithCacheHint",!1)||p(s,"query"),supportsDefaultSpatialReference:o(s,"supportsDefaultSR",!1),supportsCompactGeometry:f,supportsFullTextSearch:o(s,"supportsFullTextSearch",!1),maxRecordCountFactor:u(e,"maxRecordCountFactor",void 0),maxRecordCount:u(e,"maxRecordCount",void 0),standardMaxRecordCount:u(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:u(e,"tileMaxRecordCount",void 0)}}function m(e){var t=e.advancedQueryCapabilities,r=o(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:o(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r,supportsCacheHint:p(t,"queryRelated")}}function g(e){return{supportsCacheHint:p(e.advancedQueryCapabilities,"queryTopFilter")}}function _(e){var t=e.ownershipBasedAccessControlForFeatures,r=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:o(e,"allowGeometryUpdates",!0),supportsGlobalId:o(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:o(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:o(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:o(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:o(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:o(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:o(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:o(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:o(t,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:o(r,"supportsAsyncApplyEdits",!1)}}},76115:function(e,t,r){r.d(t,{ET:function(){return s},I4:function(){return i},eG:function(){return a},lF:function(){return o},lj:function(){return p},qP:function(){return u},wW:function(){return l}});var n=[252,146,31,255],i={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},s={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},o={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},u={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},a={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},l={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},p={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}}}]);
//# sourceMappingURL=3076.204eb19a.chunk.js.map