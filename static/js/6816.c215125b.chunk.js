"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[6816],{46816:function(e,t,r){r.r(t),r.d(t,{default:function(){return U}});var i=r(74165),n=r(15861),a=r(1413),l=r(15671),o=r(43144),s=r(60136),u=r(29388),c=r(27366),h=r(76200),p=r(10064),d=r(92026),v=r(97642),f=r(66978),y=r(35995),m=r(49861),_=(r(25243),r(63780)),b=(r(93169),r(38511)),k=r(69912),g=r(90724),w=r(30651),Z=r(17775),x=r(11936),D=r(6061),C=r(29598),L=r(45948),S=r(37762),T=function(){function e(t,r,i,n){(0,l.Z)(this,e),this._hasNoDataValues=null,this._minValue=null,this._maxValue=null,"pixelData"in t?(this.values=t.pixelData,this.width=t.width,this.height=t.height,this.noDataValue=t.noDataValue):(this.values=t,this.width=r,this.height=i,this.noDataValue=n)}return(0,o.Z)(e,[{key:"hasNoDataValues",get:function(){if(null==this._hasNoDataValues){var e=this.noDataValue;this._hasNoDataValues=this.values.includes(e)}return this._hasNoDataValues}},{key:"minValue",get:function(){return this._ensureBounds(),this._minValue}},{key:"maxValue",get:function(){return this._ensureBounds(),this._maxValue}},{key:"_ensureBounds",value:function(){if(null==this._minValue){var e,t=this.noDataValue,r=this.values,i=1/0,n=-1/0,a=!0,l=(0,S.Z)(r);try{for(l.s();!(e=l.n()).done;){var o=e.value;o===t?this._hasNoDataValues=!0:(i=o<i?o:i,n=o>n?o:n,a=!1)}}catch(s){l.e(s)}finally{l.f()}a?(this._minValue=0,this._maxValue=0):(this._minValue=i,this._maxValue=n>-3e38?n:0)}}}]),e}(),I=r(42537),O=r(32718),V=r(31009),M=function(){function e(t,r,i,n){var o=this,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};(0,l.Z)(this,e),this._mainMethod=r,this._transferLists=i,this._listeners=[],this._promise=(0,V.bA)(t,(0,a.Z)((0,a.Z)({},s),{},{schedule:n})).then((function(e){if(void 0===o._thread){o._thread=e,o._promise=null,s.hasInitialize&&o.broadcast({},"initialize");var t,r=(0,S.Z)(o._listeners);try{for(r.s();!(t=r.n()).done;){var i=t.value;o._connectListener(i)}}catch(n){r.e(n)}finally{r.f()}}else e.close()})),this._promise.catch((function(e){return O.Z.getLogger("esri.core.workers.WorkerHandle").error("Failed to initialize ".concat(t," worker: ").concat(e))}))}return(0,o.Z)(e,[{key:"on",value:function(e,t){var r=this,i={removed:!1,eventName:e,callback:t,threadHandle:null};return this._listeners.push(i),this._connectListener(i),(0,I.kB)((function(){i.removed=!0,(0,_.Od)(r._listeners,i),r._thread&&null!=i.threadHandle&&i.threadHandle.remove()}))}},{key:"destroy",value:function(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}},{key:"invoke",value:function(e,t){return this.invokeMethod(this._mainMethod,e,t)}},{key:"invokeMethod",value:function(e,t,r){var i=this;if(this._thread){var n=this._transferLists[e],a=n?n(t):[];return this._thread.invoke(e,t,{transferList:a,signal:r})}return this._promise?this._promise.then((function(){return(0,f.k_)(r),i.invokeMethod(e,t,r)})):Promise.reject(null)}},{key:"broadcast",value:function(e,t){var r=this;return this._thread?Promise.all(this._thread.broadcast(t,e)).then((function(){})):this._promise?this._promise.then((function(){return r.broadcast(e,t)})):Promise.reject()}},{key:"promise",get:function(){return this._promise}},{key:"_connectListener",value:function(e){this._thread&&this._thread.on(e.eventName,e.callback).then((function(t){e.removed||(e.threadHandle=t)}))}}]),e}(),A=function(e){(0,s.Z)(r,e);var t=(0,u.Z)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(0,l.Z)(this,r),(e=t.call(this,"LercWorker","_decode",{_decode:function(e){return[e.buffer]}},i,{strategy:"dedicated"})).schedule=i,e.ref=0,e}return(0,o.Z)(r,[{key:"decode",value:function(e,t,r){return e&&0!==e.byteLength?this.invoke({buffer:e,options:t},r):Promise.resolve(null)}},{key:"release",value:function(){var e=this;--this.ref<=0&&(j.forEach((function(t,r){t===e&&j.delete(r)})),this.destroy())}}]),r}(M),j=new Map;var N=function(e){(0,s.Z)(c,e);var t=(0,u.Z)(c);function c(){var e;(0,l.Z)(this,c);for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];return(e=t.call.apply(t,[this].concat(i))).capabilities={operations:{supportsTileMap:!1}},e.copyright=null,e.heightModelInfo=null,e.path=null,e.minScale=void 0,e.maxScale=void 0,e.opacity=1,e.operationalLayerType="ArcGISTiledElevationServiceLayer",e.sourceJSON=null,e.type="elevation",e.url=null,e.version=null,e._lercDecoder=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=j.get(e);return t||(null!=e?(t=new A((function(t){return e.immediate.schedule(t)})),j.set(e,t)):(t=new A,j.set(null,t))),++t.ref,t}(),e}return(0,o.Z)(c,[{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,a.Z)({url:e},t):e}},{key:"destroy",value:function(){this._lercDecoder=(0,d.RY)(this._lercDecoder)}},{key:"readCapabilities",value:function(e,t){var r=t.capabilities&&t.capabilities.split(",").map((function(e){return e.toLowerCase().trim()}));return r?{operations:{supportsTileMap:r.includes("tilemap")}}:{operations:{supportsTileMap:!1}}}},{key:"readVersion",value:function(e,t){var r=t.currentVersion;return r||(r=9.3),r}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(e){for(var t=0;t<e.typeKeywords.length;t++)if("elevation 3d layer"===e.typeKeywords[t].toLowerCase())return!0;throw new p.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},e).catch(f.r9).then((function(){return t._fetchImageService(r)}))),Promise.resolve(this)}},{key:"fetchTile",value:function(e,t,r,i){var n=this,a=null!=(i=i||{signal:null}).signal?i.signal:i.signal=(new AbortController).signal,l={responseType:"array-buffer",signal:a},o={noDataValue:i.noDataValue,returnFileInfo:!0};return this.load().then((function(){return n._fetchTileAvailability(e,t,r,i)})).then((function(){return(0,h.default)(n.getTileUrl(e,t,r),l)})).then((function(e){return n._lercDecoder.decode(e.data,o,a)})).then((function(e){return new T(e)}))}},{key:"getTileUrl",value:function(e,t,r){var i=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,n=(0,y.B7)((0,a.Z)((0,a.Z)({},this.parsedUrl.query),{},{blankTile:!i&&null}));return"".concat(this.parsedUrl.path,"/tile/").concat(e,"/").concat(t,"/").concat(r).concat(n?"?"+n:"")}},{key:"queryElevation",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,n){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5887).then(r.bind(r,35887));case 2:return a=e.sent,l=a.ElevationQuery,(0,f.k_)(n),e.abrupt("return",(new l).query(this,t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createElevationSampler",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,n){var a,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.e(5887).then(r.bind(r,35887));case 2:return a=e.sent,l=a.ElevationQuery,(0,f.k_)(n),e.abrupt("return",(new l).createSampler(this,t,n));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_fetchTileAvailability",value:function(e,t,r,i){return this.tilemapCache?this.tilemapCache.fetchAvailability(e,t,r,i):Promise.resolve("unknown")}},{key:"_fetchImageService",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t){var r,n,l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sourceJSON){e.next=2;break}return e.abrupt("return",this.sourceJSON);case 2:return n={query:(0,a.Z)({f:"json"},this.parsedUrl.query),responseType:"json",signal:t},e.next=5,(0,h.default)(this.parsedUrl.path,n);case 5:(l=e.sent).ssl&&(this.url=null===(r=this.url)||void 0===r?void 0:r.replace(/^http:/i,"https:")),this.sourceJSON=l.data,this.read(l.data,{origin:"service",url:this.parsedUrl});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"hasOverriddenFetchTile",get:function(){return!this.fetchTile[E]}}]),c}((0,Z.Z)((0,x.Y)((0,D.q)((0,C.I)((0,v.R)(w.Z))))));(0,c._)([(0,m.Cb)({readOnly:!0})],N.prototype,"capabilities",void 0),(0,c._)([(0,b.r)("service","capabilities",["capabilities"])],N.prototype,"readCapabilities",null),(0,c._)([(0,m.Cb)({json:{read:{source:"copyrightText"}}})],N.prototype,"copyright",void 0),(0,c._)([(0,m.Cb)({readOnly:!0,type:g.Z})],N.prototype,"heightModelInfo",void 0),(0,c._)([(0,m.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],N.prototype,"path",void 0),(0,c._)([(0,m.Cb)({type:["show","hide"]})],N.prototype,"listMode",void 0),(0,c._)([(0,m.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],N.prototype,"minScale",void 0),(0,c._)([(0,m.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}},readOnly:!0})],N.prototype,"maxScale",void 0),(0,c._)([(0,m.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],N.prototype,"opacity",void 0),(0,c._)([(0,m.Cb)({type:["ArcGISTiledElevationServiceLayer"]})],N.prototype,"operationalLayerType",void 0),(0,c._)([(0,m.Cb)()],N.prototype,"sourceJSON",void 0),(0,c._)([(0,m.Cb)({json:{read:!1},value:"elevation",readOnly:!0})],N.prototype,"type",void 0),(0,c._)([(0,m.Cb)(L.HQ)],N.prototype,"url",void 0),(0,c._)([(0,m.Cb)()],N.prototype,"version",void 0),(0,c._)([(0,b.r)("version",["currentVersion"])],N.prototype,"readVersion",null),N=(0,c._)([(0,k.j)("esri.layers.ElevationLayer")],N);var E=Symbol("default-fetch-tile");N.prototype.fetchTile[E]=!0;var U=N},17775:function(e,t,r){r.d(t,{Z:function(){return y}});var i=r(37762),n=r(15671),a=r(43144),l=r(60136),o=r(29388),s=r(27366),u=(r(59486),r(49861)),c=(r(25243),r(63780),r(93169),r(38511)),h=r(69912),p=r(22824),d=r(53184),v=r(34810),f=r(78952),y=function(e){var t=function(e){(0,l.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,n.Z)(this,r),(e=t.apply(this,arguments)).copyright=null,e.minScale=0,e.maxScale=0,e.spatialReference=null,e.tileInfo=null,e.tilemapCache=null,e}return(0,a.Z)(r,[{key:"destroy",value:function(){var e,t;null===(e=this.tilemapCache)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}},{key:"readMinScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"readMaxScale",value:function(e,t){return null!=t.minLOD&&null!=t.maxLOD?e:0}},{key:"supportsBlankTile",get:function(){return this.version>=10.2}},{key:"readTilemapCache",value:function(e,t,r){var n,a=null===(n=t.capabilities)||void 0===n?void 0:n.includes("Tilemap"),l=t.minLOD,o=t.maxLOD,s=t.minScale,u=t.maxScale;if(null==l&&null==o&&0!==s&&0!==u){var c=function(e){return Math.round(1e4*e)/1e4};s=c(s||t.tileInfo.lods[0].scale),u=c(u||t.tileInfo.lods[t.tileInfo.lods.length-1].scale);var h,f=(0,i.Z)(t.tileInfo.lods);try{for(f.s();!(h=f.n()).done;){var y=h.value,m=c(y.scale);l=m>=s?y.level:l,o=m>=u?y.level:o}}catch(b){f.e(b)}finally{f.f()}}if(a)return new v.y({layer:this,minLOD:l,maxLOD:o});if(t.tileInfo){var _=new p.Z;return _.read(t.tileInfo,r),new d.Z(_,l,o)}return null}}]),r}(e);return(0,s._)([(0,u.Cb)({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),(0,s._)([(0,u.Cb)()],t.prototype,"minScale",void 0),(0,s._)([(0,c.r)("service","minScale")],t.prototype,"readMinScale",null),(0,s._)([(0,u.Cb)()],t.prototype,"maxScale",void 0),(0,s._)([(0,c.r)("service","maxScale")],t.prototype,"readMaxScale",null),(0,s._)([(0,u.Cb)({type:f.Z})],t.prototype,"spatialReference",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],t.prototype,"supportsBlankTile",null),(0,s._)([(0,u.Cb)({type:p.Z})],t.prototype,"tileInfo",void 0),(0,s._)([(0,u.Cb)()],t.prototype,"tilemapCache",void 0),(0,s._)([(0,c.r)("service","tilemapCache",["capabilities","tileInfo"])],t.prototype,"readTilemapCache",null),(0,s._)([(0,u.Cb)()],t.prototype,"version",void 0),t=(0,s._)([(0,h.j)("esri.layers.mixins.ArcGISCachedService")],t)}},53184:function(e,t,r){r.d(t,{Z:function(){return u}});var i=r(74165),n=r(15861),a=r(15671),l=r(43144),o=r(10064),s=r(66978),u=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.lods[t.lods.length-1].level;(0,a.Z)(this,e),this.tileInfo=t,this.minLOD=r,this.maxLOD=i,t.lodAt(r)||(this.minLOD=t.lods[0].level),t.lodAt(i)||(this.maxLOD=t.lods[t.lods.length-1].level)}return(0,l.Z)(e,[{key:"effectiveMinLOD",get:function(){var e;return null!==(e=this.minLOD)&&void 0!==e?e:this.tileInfo.lods[0].level}},{key:"effectiveMaxLOD",get:function(){var e;return null!==(e=this.maxLOD)&&void 0!==e?e:this.tileInfo.lods[this.tileInfo.lods.length-1].level}},{key:"getAvailability",value:function(e,t,r){var i,n=null===(i=this.tileInfo)||void 0===i?void 0:i.lodAt(e);return!n||e<this.minLOD||e>this.maxLOD?"unavailable":n.cols&&n.rows?r>=n.cols[0]&&r<=n.cols[1]&&t>=n.rows[0]&&t<=n.rows[1]?"unknown":"unavailable":"unknown"}},{key:"fetchAvailability",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,r,n,a){var l;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Yn)(a);case 2:if("unavailable"!==(l=this.getAvailability(t,r,n))){e.next=5;break}throw new o.Z("tile-map:tile-unavailable","Tile is not available",{level:t,row:r,col:n});case 5:return e.abrupt("return",l);case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchAvailabilityUpsample",value:function(){var e=(0,n.Z)((0,i.Z)().mark((function e(t,r,n,a,l){var o,u=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Yn)(l);case 2:return a.level=t,a.row=r,a.col=n,o=this.tileInfo,e.abrupt("return",(o.updateTileInfo(a),this.fetchAvailability(t,r,n,l).catch((function(e){if((0,s.D_)(e))throw e;if(o.upsampleTile(a))return u.fetchAvailabilityUpsample(a.level,a.row,a.col,a,l);throw e}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()}]),e}()}}]);
//# sourceMappingURL=6816.c215125b.chunk.js.map