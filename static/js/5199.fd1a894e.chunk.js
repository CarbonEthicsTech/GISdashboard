"use strict";(self.webpackChunkgis_dashboard=self.webpackChunkgis_dashboard||[]).push([[5199,7945],{67077:function(e,t,r){function n(){return[0,0,0,0]}function i(e,t,r,n){return[e,t,r,n]}function o(e,t){return new Float64Array(e,t,4)}function a(){return[0,0,0,0]}function l(){return i(1,1,1,1)}function u(){return i(1,0,0,0)}function s(){return i(0,1,0,0)}function f(){return i(0,0,1,0)}function c(){return i(0,0,0,1)}r.d(t,{a:function(){return o},c:function(){return n},f:function(){return i}});var y=[0,0,0,0],d=l(),h=u(),p=s(),v=f(),m=c();Object.freeze(Object.defineProperty({__proto__:null,ONES:d,UNIT_W:m,UNIT_X:h,UNIT_Y:p,UNIT_Z:v,ZEROS:y,clone:function(e){return[e[0],e[1],e[2],e[3]]},create:n,createView:o,fromArray:function(e){for(var t=[0,0,0,0],r=Math.min(4,e.length),n=0;n<r;++n)t[n]=e[n];return t},fromValues:i,ones:l,unitW:c,unitX:u,unitY:s,unitZ:f,zeros:a},Symbol.toStringTag,{value:"Module"}))},16054:function(e,t,r){r.d(t,{z:function(){return a}});var n=r(15671),i=r(43144),o=r(18759),a=function(){function e(t,r){(0,n.Z)(this,e),this._storage=new o.WJ,this.id="",this.name="",this.size=0,this._storage.maxSize=t,this._storage.register(this),r&&this._storage.registerRemoveFunc("",r)}return(0,i.Z)(e,[{key:"destroy",value:function(){this._storage.deregister(this),this._storage.destroy()}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._storage.put(this,e,t,r,1)}},{key:"pop",value:function(e){return this._storage.pop(this,e)}},{key:"get",value:function(e){return this._storage.get(this,e)}},{key:"clear",value:function(){this._storage.clearAll()}},{key:"maxSize",get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e}},{key:"resetHitRate",value:function(){}}]),e}()},18759:function(e,t,r){r.d(t,{WJ:function(){return c},Xq:function(){return f}});var n,i,o=r(29439),a=r(37762),l=r(15671),u=r(43144),s=r(27546);(i=n||(n={}))[i.ALL=0]="ALL",i[i.SOME=1]="SOME";var f=function(){function e(t,r,n){(0,l.Z)(this,e),this.name=t,this._storage=r,this.id=y+++":",this.size=0,this.maxSize=0,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),n&&(this._storage.registerRemoveFunc(this.id,n),this._removeFunc=!0)}return(0,u.Z)(e,[{key:"destroy",value:function(){this._storage.clear(this),this._removeFunc&&this._storage.deregisterRemoveFunc(this.id),this._storage.deregister(this),this._storage=null}},{key:"hitRate",get:function(){return this._hit/(this._hit+this._miss)}},{key:"sizeAll",get:function(){return this._storage.size}},{key:"resetHitRate",value:function(){this._hit=this._miss=0}},{key:"put",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this._storage.put(this,e,t,r,n)}},{key:"get",value:function(e){var t=this._storage.get(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"pop",value:function(e){var t=this._storage.pop(this,e);return void 0===t?++this._miss:++this._hit,t}},{key:"updateSize",value:function(e,t,r){this._storage.updateSize(this,e,t,r)}},{key:"clear",value:function(){this._storage.clear(this)}},{key:"clearAll",value:function(){this._storage.clearAll()}},{key:"performanceInfo",get:function(){return this._storage.performanceInfo}},{key:"resetStats",value:function(){this._storage.resetStats()}}]),e}(),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10485760;(0,l.Z)(this,e),this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new s.Z,this._users=new s.Z}return(0,u.Z)(e,[{key:"size",get:function(){return this._size}},{key:"destroy",value:function(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}},{key:"register",value:function(e){this._users.push(e)}},{key:"deregister",value:function(e){this._users.removeUnordered(e)}},{key:"registerRemoveFunc",value:function(e,t){this._removeFuncs.push([e,t])}},{key:"deregisterRemoveFunc",value:function(e){this._removeFuncs.filterInPlace((function(t){return t[0]!==e}))}},{key:"maxSize",get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimits()}},{key:"put",value:function(e,t,r,i,o){t=e.id+t;var a=this._db.get(t);if(a&&(this._size-=a.size,e.size-=a.size,this._db.delete(t),a.entry!==r&&this._notifyRemove(t,a.entry,n.ALL)),i>this._maxSize)this._notifyRemove(t,r,n.ALL);else if(void 0!==r)if(!i||i<0)console.warn("Refusing to cache entry with invalid size "+i);else{var l=1+Math.max(o,-3)- -3;this._db.set(t,{entry:r,size:i,lifetime:l,lives:l}),this._size+=i,e.size+=i,this._checkSizeLimits()}else console.warn("Refusing to cache undefined entry ")}},{key:"updateSize",value:function(e,t,r,i){t=e.id+t;var o=this._db.get(t);if(o&&o.entry===r){for(this._size-=o.size,e.size-=o.size;i>this._maxSize;){var a=this._notifyRemove(t,r,n.SOME);if(!(null!=a&&a>0))return void this._db.delete(t);i=a}o.size=i,this._size+=i,e.size+=i,this._checkSizeLimits()}}},{key:"pop",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(r)return this._size-=r.size,e.size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}},{key:"get",value:function(e,t){t=e.id+t;var r=this._db.get(t);if(void 0!==r)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}},{key:"performanceInfo",get:function(){var e=this,t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},n=new Array;this._db.forEach((function(t,i){var o=t.lifetime;n[o]=(n[o]||0)+t.size,e._users.forAll((function(e){var n=e.id,o=e.name;if(i.startsWith(n)){var a=r[o]||0;r[o]=a+t.size}}))}));var i={};this._users.forAll((function(e){var t=e.name;if("hitRate"in e&&"number"==typeof e.hitRate&&!isNaN(e.hitRate)&&e.hitRate>0){var n=r[t]||0;r[t]=n,i[t]=Math.round(100*e.hitRate)+"%"}else i[t]="0%"}));var o=Object.keys(r);o.sort((function(e,t){return r[t]-r[e]})),o.forEach((function(e){return t[e]=Math.round(r[e]/Math.pow(2,20))+"MB / "+i[e]}));for(var a=n.length-1;a>=0;--a){var l=n[a];l&&(t["Priority "+(a+-3-1)]=Math.round(l/this._size*100)+"%")}return t}},{key:"resetStats",value:function(){this._hit=this._miss=0,this._users.forAll((function(e){return e.resetHitRate()}))}},{key:"clear",value:function(e){var t=this,r=e.id;this._db.forEach((function(e,i){i.startsWith(r)&&(t._size-=e.size,t._db.delete(i),t._notifyRemove(i,e.entry,n.ALL))})),e.size=0}},{key:"clearAll",value:function(){var e=this;this._db.forEach((function(t,r){return e._notifyRemove(r,t.entry,n.ALL)})),this._users.forEach((function(e){return e.size=0})),this._size=0,this._db.clear()}},{key:"_getHitRate",value:function(){return this._hit/(this._hit+this._miss)}},{key:"_notifyRemove",value:function(e,t,r){var n;return this._removeFuncs.some((function(i){if(e.startsWith(i[0])){var o=i[1](t,r);return"number"==typeof o&&(n=o),!0}return!1})),n}},{key:"_checkSizeLimits",value:function(){var e=this;if(this._size>this._maxSize){var t,r=(0,a.Z)(this._db);try{for(r.s();!(t=r.n()).done;){var n=(0,o.Z)(t.value,2),i=n[0],l=n[1];if(this._purgeItem(i,l),this._size<=.9*this.maxSize)return}}catch(u){r.e(u)}finally{r.f()}}this._users.forEach((function(t){if(t.maxSize>0&&t.size>t.maxSize){var r,n=(0,a.Z)(e._db);try{for(n.s();!(r=n.n()).done;){var i=(0,o.Z)(r.value,2),l=i[0],s=i[1];if(l.startsWith(t.id)&&(e._purgeItem(l,s,t),t.size<=.9*t.maxSize))return}}catch(u){n.e(u)}finally{n.f()}}}))}},{key:"_purgeItem",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._users.find((function(t){return e.startsWith(t.id)}));if(this._db.delete(e),t.lives<=1){this._size-=t.size,r&&(r.size-=t.size);var i=this._notifyRemove(e,t.entry,n.SOME);null!=i&&i>0&&(this._size+=i,r&&(r.size+=i),t.lives=t.lifetime,t.size=i,this._db.set(e,t))}else--t.lives,this._db.set(e,t)}}]),e}(),y=0},48732:function(e,t,r){r.d(t,{Hg:function(){return v},V7:function(){return p},uD:function(){return h}});var n=r(4942),i=r(37762),o=r(7138),a=r(40281),l=r(23879),u=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function s(e){return e instanceof o.Z}function f(e){return e instanceof a.Z?Object.keys(e.items):s(e)?(0,l.vw)(e).keys():e?Object.keys(e):[]}function c(e,t){return e instanceof a.Z?e.items[t]:e[t]}function y(e){return e?e.declaredClass:null}function d(e,t){var r=e.diff;if(r&&"function"==typeof r)return r(e,t);var o=f(e),a=f(t);if(0!==o.length||0!==a.length){if(!o.length||!a.length||function(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}(e,t))return{type:"complete",oldValue:e,newValue:t};var l,h=a.filter((function(e){return!o.includes(e)})),p=o.filter((function(e){return!a.includes(e)})),v=o.filter((function(r){return a.includes(r)&&c(e,r)!==c(t,r)})).concat(h,p).sort(),m=y(e);if(m&&u.includes(m)&&v.length)return{type:"complete",oldValue:e,newValue:t};var g,_=s(e)&&s(t),b=(0,i.Z)(v);try{for(b.s();!(g=b.n()).done;){var Z=g.value,w=c(e,Z),k=c(t,Z),S=void 0;if((_||"function"!=typeof w&&"function"!=typeof k)&&w!==k&&(null!=w||null!=k)){var z;if(r&&r[Z]&&"function"==typeof r[Z])S=null===(z=r[Z])||void 0===z?void 0:z.call(r,w,k);else if(w instanceof Date&&k instanceof Date){if(w.getTime()===k.getTime())continue;S={type:"complete",oldValue:w,newValue:k}}else S="object"==typeof w&&"object"==typeof k&&y(w)===y(k)?d(w,k):{type:"complete",oldValue:w,newValue:k};null!=S&&(null!=l?l.diff[Z]=S:l={type:"partial",diff:(0,n.Z)({},Z,S)})}}}catch(x){b.e(x)}finally{b.f()}return l}}function h(e,t){if(null==e)return!1;var r,n=t.split("."),o=e,a=(0,i.Z)(n);try{for(a.s();!(r=a.n()).done;){var l=r.value;if("complete"===o.type)return!0;if("partial"!==o.type)return!1;var u=o.diff[l];if(!u)return!1;o=u}}catch(s){a.e(s)}finally{a.f()}return!0}function p(e,t){var r,n=(0,i.Z)(t);try{for(n.s();!(r=n.n()).done;){if(h(e,r.value))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}function v(e,t){if("function"!=typeof e&&"function"!=typeof t&&(null!=e||null!=t))return null==e||null==t||"object"==typeof e&&"object"==typeof t&&y(e)!==y(t)?{type:"complete",oldValue:e,newValue:t}:d(e,t)}},13838:function(e,t,r){r.r(t),r.d(t,{default:function(){return H}});var n,i=r(37762),o=r(74165),a=r(15861),l=r(93433),u=r(1413),s=r(15671),f=r(43144),c=r(11752),y=r(61120),d=r(60136),h=r(29388),p=r(27366),v=(r(59486),r(40281)),m=r(77178),g=r(97642),_=r(66978),b=r(94172),Z=r(35995),w=r(49861),k=r(25243),S=(r(63780),r(93169),r(38511)),z=r(69912),x=r(31201),F=r(78952),C=r(30651),M=r(6693),T=r(6061),I=r(29598),O=r(71684),R=r(56811),j=r(45948),N=r(97326),A=r(91505),V=r(46784),P=r(54472),L=r(643),E=r(21857),G=r(53866),D=n=function(e){(0,d.Z)(r,e);var t=(0,h.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).description=null,e.fullExtent=null,e.id=null,e.networkLink=null,e.parent=null,e.sublayers=null,e.title=null,e.sourceJSON=null,e.layer=null,e.addHandles([(0,b.on)((function(){return e.sublayers}),"after-add",(function(t){var r=t.item;r.parent=(0,N.Z)(e),r.layer=e.layer}),b.Z_),(0,b.on)((function(){return e.sublayers}),"after-remove",(function(e){var t=e.item;t.layer=t.parent=null}),b.Z_),(0,b.YP)((function(){return e.sublayers}),(function(t,r){if(r){var n,o=(0,i.Z)(r);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.layer=a.parent=null}}catch(f){o.e(f)}finally{o.f()}}if(t){var l,u=(0,i.Z)(t);try{for(u.s();!(l=u.n()).done;){var s=l.value;s.parent=(0,N.Z)(e),s.layer=e.layer}}catch(f){u.e(f)}finally{u.f()}}}),b.Z_),(0,b.YP)((function(){return e.layer}),(function(t){if(e.sublayers){var r,n=(0,i.Z)(e.sublayers);try{for(n.s();!(r=n.n()).done;){r.value.layer=t}}catch(o){n.e(o)}finally{n.f()}}}),b.Z_)]),e}return(0,f.Z)(r,[{key:"initialize",value:function(){var e=this;(0,b.N1)((function(){return e.networkLink})).then((function(){return(0,b.N1)((function(){return!0===e.visible}))})).then((function(){return e.load()}))}},{key:"load",value:function(e){var t,r,i=this;if(this.networkLink&&!this.networkLink.viewFormat){var o=null!=e?e.signal:null,a=this._fetchService(null!==(t=null===(r=this._get("networkLink"))||void 0===r?void 0:r.href)&&void 0!==t?t:"",o).then((function(e){var t,r=(0,E.lm)(e.sublayers);i.fullExtent=G.Z.fromJSON(r),i.sourceJSON=e;var o=(0,k.se)(v.Z.ofType(n),(0,E.j5)(n,e));i.sublayers?i.sublayers.addMany(o):i.sublayers=o,null!==(t=i.layer)&&void 0!==t&&t.emit("sublayer-update"),i.layer&&i.layer.notifyChange("visibleSublayers")}));return this.addResolvingPromise(a),Promise.resolve(this)}}},{key:"visible",get:function(){return this._get("visible")},set:function(e){this._get("visible")!==e&&(this._set("visible",e),this.layer&&this.layer.notifyChange("visibleSublayers"))}},{key:"readVisible",value:function(e,t){return!!t.visibility}},{key:"_fetchService",value:function(e,t){return(0,E.CS)(e,this.layer.outSpatialReference,this.layer.refreshInterval,t).then((function(e){return(0,E.Cw)(e.data)}))}}]),r}(A.Z.EventedMixin((0,V.eC)(P.Z)));(0,p._)([(0,w.Cb)()],D.prototype,"description",void 0),(0,p._)([(0,w.Cb)({type:G.Z})],D.prototype,"fullExtent",void 0),(0,p._)([(0,w.Cb)()],D.prototype,"id",void 0),(0,p._)([(0,w.Cb)({readOnly:!0,value:null})],D.prototype,"networkLink",void 0),(0,p._)([(0,w.Cb)({json:{write:{allowNull:!0}}})],D.prototype,"parent",void 0),(0,p._)([(0,w.Cb)({type:v.Z.ofType(n),json:{write:{allowNull:!0}}})],D.prototype,"sublayers",void 0),(0,p._)([(0,w.Cb)({value:null,json:{read:{source:"name",reader:function(e){return(0,L.Cb)(e)}}}})],D.prototype,"title",void 0),(0,p._)([(0,w.Cb)({value:!0})],D.prototype,"visible",null),(0,p._)([(0,S.r)("visible",["visibility"])],D.prototype,"readVisible",null),(0,p._)([(0,w.Cb)()],D.prototype,"sourceJSON",void 0),(0,p._)([(0,w.Cb)()],D.prototype,"layer",void 0);var J=D=n=(0,p._)([(0,z.j)("esri.layers.support.KMLSublayer")],D),q=["kml","xml"],U=function(e){(0,d.Z)(r,e);var t=(0,h.Z)(r);function r(){var e;(0,s.Z)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._visibleFolders=[],e.allSublayers=new m.Z({getCollections:function(){return[e.sublayers]},getChildrenFunction:function(e){return e.sublayers}}),e.outSpatialReference=F.Z.WGS84,e.path=null,e.legendEnabled=!1,e.operationalLayerType="KML",e.sublayers=null,e.type="kml",e.url=null,e}return(0,f.Z)(r,[{key:"initialize",value:function(){var e=this;this.addHandles([(0,b.YP)((function(){return e.sublayers}),(function(t,r){r&&r.forEach((function(e){e.parent=null,e.layer=null})),t&&t.forEach((function(t){t.parent=e,t.layer=e}))}),b.Z_),this.on("sublayer-update",(function(){return e.notifyChange("fullExtent")}))])}},{key:"normalizeCtorArgs",value:function(e,t){return"string"==typeof e?(0,u.Z)({url:e},t):e}},{key:"readSublayersFromItemOrWebMap",value:function(e,t){this._visibleFolders=t.visibleFolders}},{key:"readSublayers",value:function(e,t,r){return(0,E.j5)(J,t,r,this._visibleFolders)}},{key:"writeSublayers",value:function(e,t){for(var r=[],n=e.toArray();n.length;){var i=n[0];i.networkLink||(i.visible&&r.push(i.id),i.sublayers&&n.push.apply(n,(0,l.Z)(i.sublayers.toArray()))),n.shift()}t.visibleFolders=r}},{key:"title",get:function(){var e=this._get("title");return e&&"defaults"!==this.originOf("title")?e:this.url?(0,Z.vt)(this.url,q)||"KML":e||""},set:function(e){this._set("title",e)}},{key:"visibleSublayers",get:function(){var e=this.sublayers,t=[];return e&&e.forEach((function e(r){r.visible&&(t.push(r),r.sublayers&&r.sublayers.forEach(e))})),t}},{key:"fullExtent",get:function(){return this._recomputeFullExtent()}},{key:"load",value:function(e){var t=this,r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["KML"],supportsData:!1},e).catch(_.r9).then((function(){return t._fetchService(r)}))),Promise.resolve(this)}},{key:"destroy",value:function(){(0,c.Z)((0,y.Z)(r.prototype),"destroy",this).call(this),this.allSublayers.destroy()}},{key:"_fetchService",value:function(){var e=(0,a.Z)((0,o.Z)().mark((function e(t){var r,n,i=this;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then((function(){var e;return i.resourceInfo?{ssl:!1,data:i.resourceInfo}:(0,E.CS)(null!==(e=i.url)&&void 0!==e?e:"",i.outSpatialReference,i.refreshInterval,t)}));case 2:r=e.sent,(n=(0,E.Cw)(r.data))&&this.read(n,{origin:"service"});case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_recomputeFullExtent",value:function(){var e=null;null!=this.extent&&(e=this.extent.clone());return function t(r){if(r.sublayers){var n,o=(0,i.Z)(r.sublayers.items);try{for(o.s();!(n=o.n()).done;){var a=n.value;t(a),a.visible&&a.fullExtent&&(null!=e?e.union(a.fullExtent):e=a.fullExtent.clone())}}catch(l){o.e(l)}finally{o.f()}}}(this),e}}]),r}((0,M.h)((0,O.Q)((0,R.M)((0,T.q)((0,I.I)((0,g.R)(C.Z)))))));(0,p._)([(0,w.Cb)({readOnly:!0})],U.prototype,"allSublayers",void 0),(0,p._)([(0,w.Cb)({type:F.Z})],U.prototype,"outSpatialReference",void 0),(0,p._)([(0,w.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],U.prototype,"path",void 0),(0,p._)([(0,w.Cb)({readOnly:!0,json:{read:!1,write:!1}})],U.prototype,"legendEnabled",void 0),(0,p._)([(0,w.Cb)({type:["show","hide","hide-children"]})],U.prototype,"listMode",void 0),(0,p._)([(0,w.Cb)({type:["KML"]})],U.prototype,"operationalLayerType",void 0),(0,p._)([(0,w.Cb)({})],U.prototype,"resourceInfo",void 0),(0,p._)([(0,w.Cb)({type:v.Z.ofType(J),json:{write:{ignoreOrigin:!0}}})],U.prototype,"sublayers",void 0),(0,p._)([(0,S.r)(["web-map","portal-item"],"sublayers",["visibleFolders"])],U.prototype,"readSublayersFromItemOrWebMap",null),(0,p._)([(0,S.r)("service","sublayers",["sublayers"])],U.prototype,"readSublayers",null),(0,p._)([(0,x.c)("sublayers")],U.prototype,"writeSublayers",null),(0,p._)([(0,w.Cb)({readOnly:!0,json:{read:!1}})],U.prototype,"type",void 0),(0,p._)([(0,w.Cb)({json:{origins:{"web-map":{read:{source:"title"}}},write:{ignoreOrigin:!0}}})],U.prototype,"title",null),(0,p._)([(0,w.Cb)(j.HQ)],U.prototype,"url",void 0),(0,p._)([(0,w.Cb)({readOnly:!0})],U.prototype,"visibleSublayers",null),(0,p._)([(0,w.Cb)({type:G.Z})],U.prototype,"extent",void 0),(0,p._)([(0,w.Cb)()],U.prototype,"fullExtent",null);var H=U=(0,p._)([(0,z.j)("esri.layers.KMLLayer")],U)},71684:function(e,t,r){r.d(t,{Q:function(){return z}});var n=r(74165),i=r(15861),o=r(15671),a=r(43144),l=r(97326),u=r(60136),s=r(29388),f=r(27366),c=r(32718),y=r(66978),d=r(49861),h=(r(25243),r(63780),r(93169),r(69912)),p=r(37762),v=r(40281),m=(r(10064),r(2173),r(27088)),g=new v.Z,_=new WeakMap;function b(e){return null!=e&&"object"==typeof e&&"refreshInterval"in e&&"refresh"in e}function Z(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:Z(t,e%t):0}var w=0,k=0;function S(){var e,t=Date.now(),r=(0,p.Z)(g);try{for(r.s();!(e=r.n()).done;){var n,i=e.value;if(i.refreshInterval)t-(null!==(n=_.get(i))&&void 0!==n?n:0)+5>=6e4*i.refreshInterval&&(_.set(i,t),i.refresh(t))}}catch(o){r.e(o)}finally{r.f()}}(0,m.EH)((function(){var e,t=Date.now(),r=0,n=(0,p.Z)(g);try{for(n.s();!(e=n.n()).done;){var i=e.value;r=Z(Math.round(6e4*i.refreshInterval),r),i.refreshInterval?_.get(i)||_.set(i,t):_.delete(i)}}catch(o){n.e(o)}finally{n.f()}if(r!==k){if(k=r,clearInterval(w),0===k)return void(w=0);w=setInterval(S,k)}}));var z=function(e){var t=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(){var e;(0,o.Z)(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).refreshInterval=0,e.refreshTimestamp=0,e._debounceHasDataChanged=(0,y.Ds)((function(){return e.hasDataChanged()})),e.when().then((function(){e.destroyed||function(e){b(e)&&g.push(e)}((0,l.Z)(e))}),(function(){})),e}return(0,a.Z)(r,[{key:"destroy",value:function(){var e;b(e=this)&&g.includes(e)&&g.remove(e)}},{key:"refreshParameters",get:function(){return{_ts:this.refreshTimestamp||null}}},{key:"refresh",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();(0,y.R8)(this._debounceHasDataChanged()).then((function(r){r&&e._set("refreshTimestamp",t),e.emit("refresh",{dataChanged:r})}),(function(t){c.Z.getLogger(e).error(t),e.emit("refresh",{dataChanged:!1,error:t})}))}},{key:"hasDataChanged",value:function(){var e=(0,i.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(e);return(0,f._)([(0,d.Cb)({type:Number,cast:function(e){return e>=.1?e:e<=0?0:.1},json:{write:!0}})],t.prototype,"refreshInterval",void 0),(0,f._)([(0,d.Cb)({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),(0,f._)([(0,d.Cb)()],t.prototype,"refreshParameters",null),t=(0,f._)([(0,h.j)("esri.layers.mixins.RefreshableLayer")],t),t}},83040:function(e,t,r){r.d(t,{Z:function(){return b}});var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),u=r(27366),s=r(43404),f=r(46784),c=r(49861),y=r(25243),d=(r(63780),r(93169),r(27135)),h=r(38511),p=r(69912),v=r(66591),m=r(85249),g=new s.X({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"}),_=n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).alias=null,n.defaultValue=void 0,n.description=null,n.domain=null,n.editable=!0,n.length=-1,n.name=null,n.nullable=!0,n.type=null,n.valueType=null,n.visible=!0,n}return(0,o.Z)(r,[{key:"readDescription",value:function(e,t){var r,n,i=t.description,o=null;try{o=i?JSON.parse(i):null}catch(a){}return null!==(r=null===(n=o)||void 0===n?void 0:n.value)&&void 0!==r?r:null}},{key:"readValueType",value:function(e,t){var r=t.description,n=null;try{n=r?JSON.parse(r):null}catch(i){}return n?g.fromJSON(n.fieldValueType):null}},{key:"clone",value:function(){return new n({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType,visible:this.visible})}}]),r}(f.wq);(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],_.prototype,"alias",void 0),(0,u._)([(0,c.Cb)({type:[String,Number],json:{write:{allowNull:!0}}})],_.prototype,"defaultValue",void 0),(0,u._)([(0,c.Cb)()],_.prototype,"description",void 0),(0,u._)([(0,h.r)("description")],_.prototype,"readDescription",null),(0,u._)([(0,c.Cb)({types:v.V5,json:{read:{reader:v.im},write:!0}})],_.prototype,"domain",void 0),(0,u._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"editable",void 0),(0,u._)([(0,c.Cb)({type:y.z8,json:{write:!0}})],_.prototype,"length",void 0),(0,u._)([(0,c.Cb)({type:String,json:{write:!0}})],_.prototype,"name",void 0),(0,u._)([(0,c.Cb)({type:Boolean,json:{write:!0}})],_.prototype,"nullable",void 0),(0,u._)([(0,d.J)(m.v)],_.prototype,"type",void 0),(0,u._)([(0,c.Cb)()],_.prototype,"valueType",void 0),(0,u._)([(0,h.r)("valueType",["description"])],_.prototype,"readValueType",null),(0,u._)([(0,c.Cb)({type:Boolean,json:{read:!1}})],_.prototype,"visible",void 0);var b=_=n=(0,u._)([(0,p.j)("esri.layers.support.Field")],_)},52410:function(e,t,r){r.d(t,{Z:function(){return s}});var n=r(37762),i=r(15671),o=r(43144),a=r(37270);function l(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function u(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((0,i.Z)(this,e),this.fields=[],this._fieldsMap=new Map,this._normalizedFieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,t){this.fields=t;var r,o,s=[],y=(0,n.Z)(t);try{for(y.s();!(r=y.n()).done;){var d=r.value,h=null===d||void 0===d?void 0:d.name,p=c(null===d||void 0===d?void 0:d.name);if(h&&p){var v=f(h);this._fieldsMap.set(h,d),this._fieldsMap.set(v,d),this._normalizedFieldsMap.set(p,d),s.push(v),"date"===(o=d).type||"esriFieldTypeDate"===o.type||"date-only"===o.type||"esriFieldTypeDateOnly"===o.type||"timestamp-offset"===o.type||"esriFieldTypeTimestampOffset"===o.type?(this.dateFields.push(d),this._dateFieldsSet.add(d)):(0,a.H7)(d)&&(this._numericFieldsSet.add(d),this.numericFields.push(d)),l(d)||u(d)||(d.editable=null==d.editable||!!d.editable,d.nullable=null==d.nullable||!!d.nullable)}}}catch(m){y.e(m)}finally{y.f()}s.sort(),this.uid=s.join(",")}}return(0,o.Z)(e,[{key:"destroy",value:function(){this._fieldsMap.clear()}},{key:"requiredFields",get:function(){if(!this._requiredFields){this._requiredFields=[];var e,t=(0,n.Z)(this.fields);try{for(t.s();!(e=t.n()).done;){var r=e.value;l(r)||u(r)||r.nullable||void 0!==(0,a.os)(r)||this._requiredFields.push(r)}}catch(i){t.e(i)}finally{t.f()}}return this._requiredFields}},{key:"has",value:function(e){return null!=this.get(e)}},{key:"get",value:function(e){var t;if(e){var r=this._fieldsMap.get(e);return r||((r=null!==(t=this._fieldsMap.get(f(e)))&&void 0!==t?t:this._normalizedFieldsMap.get(c(e)))&&this._fieldsMap.set(e,r),r)}}},{key:"isDateField",value:function(e){return this._dateFieldsSet.has(this.get(e))}},{key:"isNumericField",value:function(e){return this._numericFieldsSet.has(this.get(e))}},{key:"normalizeFieldName",value:function(e){var t,r=this.get(e);if(r)return null!==(t=r.name)&&void 0!==t?t:void 0}}]),e}();function f(e){return e.trim().toLowerCase()}function c(e){var t,r;return null!==(t=null===(r=(0,a.q6)(e))||void 0===r?void 0:r.toLowerCase())&&void 0!==t?t:""}},66591:function(e,t,r){r.d(t,{im:function(){return C},V5:function(){return F}});r(93169);var n,i=r(15671),o=r(43144),a=r(60136),l=r(29388),u=r(27366),s=r(84652),f=r(49861),c=(r(25243),r(27135)),y=r(69912),d=r(46784),h=(r(63780),n=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.code=null,n}return(0,o.Z)(r,[{key:"clone",value:function(){return new n({name:this.name,code:this.code})}}]),r}(d.wq));(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],h.prototype,"name",void 0),(0,u._)([(0,f.Cb)({type:[String,Number],json:{write:!0}})],h.prototype,"code",void 0),h=n=(0,u._)([(0,y.j)("esri.layers.support.CodedValue")],h);var p=new(r(43404).X)({inherited:"inherited",codedValue:"coded-value",range:"range"}),v=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).name=null,n.type=null,n}return(0,o.Z)(r)}(d.wq);(0,u._)([(0,f.Cb)({type:String,json:{write:!0}})],v.prototype,"name",void 0),(0,u._)([(0,c.J)(p)],v.prototype,"type",void 0);var m,g=v=(0,u._)([(0,y.j)("esri.layers.support.Domain")],v),_=m=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).codedValues=null,n.type="coded-value",n}return(0,o.Z)(r,[{key:"getName",value:function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some((function(e){return String(e.code)===r&&(t=e.name),!!t}))}return t}},{key:"clone",value:function(){return new m({codedValues:(0,s.d9)(this.codedValues),name:this.name})}}]),r}(g);(0,u._)([(0,f.Cb)({type:[h],json:{write:!0}})],_.prototype,"codedValues",void 0),(0,u._)([(0,c.J)({codedValue:"coded-value"})],_.prototype,"type",void 0);var b,Z=_=m=(0,u._)([(0,y.j)("esri.layers.support.CodedValueDomain")],_),w=(r(32718),r(10064),b=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).type="inherited",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new b}}]),r}(g));(0,u._)([(0,c.J)({inherited:"inherited"})],w.prototype,"type",void 0);var k,S=w=b=(0,u._)([(0,y.j)("esri.layers.support.InheritedDomain")],w),z=k=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).maxValue=null,n.minValue=null,n.type="range",n}return(0,o.Z)(r,[{key:"clone",value:function(){return new k({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}}]),r}(g);(0,u._)([(0,f.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],z.prototype,"maxValue",void 0),(0,u._)([(0,f.Cb)({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],z.prototype,"minValue",void 0),(0,u._)([(0,c.J)({range:"range"})],z.prototype,"type",void 0);var x=z=k=(0,u._)([(0,y.j)("esri.layers.support.RangeDomain")],z),F={key:"type",base:g,typeMap:{range:z,"coded-value":Z,inherited:S}};function C(e){if(!e||!e.type)return null;switch(e.type){case"range":return x.fromJSON(e);case"codedValue":return Z.fromJSON(e);case"inherited":return S.fromJSON(e)}return null}},85249:function(e,t,r){r.d(t,{v:function(){return n}});var n=new(r(43404).X)({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml",esriFieldTypeBigInteger:"big-integer",esriFieldTypeDateOnly:"date-only",esriFieldTypeTimeOnly:"time-only",esriFieldTypeTimestampOffset:"timestamp-offset"})},21857:function(e,t,r){r.d(t,{CS:function(){return _},Cw:function(){return g},Yu:function(){return w},j5:function(){return b},lm:function(){return S}});var n=r(74165),i=r(15861),o=r(37762),a=r(42265),l=r(19545),u=r(44055),s=r(76200),f=r(84652),c=r(35995),y=r(78952),d=r(41414),h=r(376),p=r(9014),v=r(49818),m={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function g(e){var t=e.folders||[],r=t.slice(),n=new Map,i=new Map,a=new Map,l=new Map,u=new Map,s={esriGeometryPoint:i,esriGeometryPolyline:a,esriGeometryPolygon:l};(e.featureCollection&&e.featureCollection.layers||[]).forEach((function(e){var t=(0,f.d9)(e);t.featureSet.features=[];var r=e.featureSet.geometryType;n.set(r,t);var o=e.layerDefinition.objectIdField;"esriGeometryPoint"===r?Z(i,o,e.featureSet.features):"esriGeometryPolyline"===r?Z(a,o,e.featureSet.features):"esriGeometryPolygon"===r&&Z(l,o,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((function(e){u.set(e.id,e)})),t.forEach((function(t){t.networkLinkIds.forEach((function(n){var i=function(e,t,r){var n=function(e,t){var r;return t.some((function(t){return t.id===e&&(r=t,!0)})),r}(e,r);return n&&(n.parentFolderId=t,n.networkLink=n),n}(n,t.id,e.networkLinks);i&&r.push(i)}))})),r.forEach((function(e){if(e.featureInfos){e.points=(0,f.d9)(n.get("esriGeometryPoint")),e.polylines=(0,f.d9)(n.get("esriGeometryPolyline")),e.polygons=(0,f.d9)(n.get("esriGeometryPolygon")),e.mapImages=[];var t,r=(0,o.Z)(e.featureInfos);try{for(r.s();!(t=r.n()).done;){var i=t.value;switch(i.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":var a,l=s[i.type].get(i.id);l&&(null===(a=e[m[i.type]])||void 0===a||a.featureSet.features.push(l));break;case"GroundOverlay":var c=u.get(i.id);c&&e.mapImages.push(c)}}}catch(y){r.e(y)}finally{r.f()}e.fullExtent=S([e])}}));var c=S(r);return{folders:t,sublayers:r,extent:c}}function _(e,t,r,n){var i=l.id&&l.id.findCredential(e);e=(0,c.fl)(e,{token:i&&i.token});var o=a.Z.kmlServiceUrl;return(0,s.default)(o,{query:{url:e,model:"simple",folders:"",refresh:0!==r||void 0,outSR:JSON.stringify(t)},responseType:"json",signal:n})}function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],o={},a=t.sublayers,l=t.folders.map((function(e){return e.id}));return a.forEach((function(t){var a=new e;if(r?a.read(t,r):a.read(t),n.length&&l.includes(a.id)&&(a.visible=n.includes(a.id)),o[t.id]=a,null!=t.parentFolderId&&-1!==t.parentFolderId){var u,s=o[t.parentFolderId];s.sublayers||(s.sublayers=[]),null===(u=s.sublayers)||void 0===u||u.unshift(a)}else i.unshift(a)})),i}function Z(e,t,r){r.forEach((function(r){e.set(r.attributes[t],r)}))}function w(e){return k.apply(this,arguments)}function k(){return(k=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,a,l,s,f,c,y,d;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=v.Z.fromJSON(t.featureSet).features,i=t.layerDefinition,a=(0,p.i)(i.drawingInfo.renderer),l=u.Z.fromJSON(t.popupInfo),s=[],f=(0,o.Z)(r),e.prev=2,f.s();case 4:if((c=f.n()).done){e.next=12;break}return y=c.value,e.next=8,a.getSymbolAsync(y);case 8:d=e.sent,y.symbol=d,y.popupTemplate=l,y.visible=!0,s.push(y);case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),f.e(e.t0);case 17:return e.prev=17,f.f(),e.finish(17);case 20:return e.abrupt("return",s);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))).apply(this,arguments)}function S(e){var t,r=(0,d.Ue)(d.Gv),n=(0,d.Ue)(d.Gv),i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.polygons&&a.polygons.featureSet&&a.polygons.featureSet.features){var l,u=(0,o.Z)(a.polygons.featureSet.features);try{for(u.s();!(l=u.n()).done;){var s=l.value;(0,h.Yg)(r,s.geometry),(0,d.TC)(n,r)}}catch(w){u.e(w)}finally{u.f()}}if(a.polylines&&a.polylines.featureSet&&a.polylines.featureSet.features){var f,c=(0,o.Z)(a.polylines.featureSet.features);try{for(c.s();!(f=c.n()).done;){var p=f.value;(0,h.Yg)(r,p.geometry),(0,d.TC)(n,r)}}catch(w){c.e(w)}finally{c.f()}}if(a.points&&a.points.featureSet&&a.points.featureSet.features){var v,m=(0,o.Z)(a.points.featureSet.features);try{for(m.s();!(v=m.n()).done;){var g=v.value;(0,h.Yg)(r,g.geometry),(0,d.TC)(n,r)}}catch(w){m.e(w)}finally{m.f()}}if(a.mapImages){var _,b=(0,o.Z)(a.mapImages);try{for(b.s();!(_=b.n()).done;){var Z=_.value;(0,h.Yg)(r,Z.extent),(0,d.TC)(n,r)}}catch(w){b.e(w)}finally{b.f()}}}}catch(w){i.e(w)}finally{i.f()}return(0,d.fS)(n,d.Gv)?void 0:{xmin:n[0],ymin:n[1],zmin:n[2],xmax:n[3],ymax:n[4],zmax:n[5],spatialReference:y.Z.WGS84}}},27811:function(e,t,r){r.d(t,{AJ:function(){return f},If:function(){return p},QM:function(){return d},hy:function(){return h},k0:function(){return s},nu:function(){return u},uI:function(){return y},wx:function(){return v}});var n=r(37762),i=r(16889),o=r(17842),a=r(90045),l=r(67077),u=2.4;function s(e){return(0,o.Wz)(e*u)}function f(e){return(0,o.F2)(e)/u}function c(e,t,r,n){var o=t.color,l=t.ratio,u=r.color,s=r.ratio;if(s===l){var f=1e-6;1===s?l-=f:s+=f}var c=(0,i.uZ)((n-l)/(s-l),0,1);(0,a.l)(e,o.toArray(),u.toArray(),c)}function y(e){var t=new Uint8ClampedArray(2048);if(e=e.filter((function(e){var t=e.ratio;return t>=0&&t<=1})).sort((function(e,t){return e.ratio-t.ratio})).map((function(e){var t=e.color,r=e.ratio;return{color:t,ratio:Math.max(r,.001)}})),e.length<1)return t;for(var r=e[0],n=e[0],i=1,o=(0,l.c)(),a=0;a<512;a++){for(var u=(a+.5)/512;u>n.ratio&&i<e.length;)r=n,n=e[i++];c(o,r,n,u),t.set(o,4*a)}return t}function d(e,t,r,i){var a,l,u=t.radius,s=t.fieldOffset,f=t.field,c=Math.round((0,o.F2)(u)),y=new Float64Array(r*i),d=Number.NEGATIVE_INFINITY,h=function(e,t){return null!=e?"string"==typeof t?function(t){return-1*+t.readAttribute(e)}:function(r){return+r.readAttribute(e)+t}:function(e){return 1}}(f,s),v=new Set,m=(0,n.Z)(e);try{for(m.s();!(l=m.n()).done;)for(var g=l.value.getCursor();g.next();){var _=g.getObjectId();if(!v.has(_)){v.add(_);var b=g.readLegacyPointGeometry(),Z=128;if(!(b.x<-Z||b.x>=r+Z||b.y<-Z||b.y>i+Z))for(var w=+h(g),k=Math.max(0,Math.round(b.x)-c),S=Math.max(0,Math.round(b.y)-c),z=Math.min(i,Math.round(b.y)+c),x=Math.min(r,Math.round(b.x)+c),F=S;F<z;F++)for(var C=k;C<x;C++){var M=F*r+C,T=p(b.x-C,b.y-F,c);(a=y[M]+=T*w)>d&&(d=a)}}}}catch(I){m.e(I)}finally{m.f()}return{matrix:y.buffer,max:d}}function h(e,t,r,n,o,a){e.canvas.width=e.canvas.height=t,e.clearRect(0,0,t,t);var l=e.getImageData(0,0,t,t);r&&n&&l.data.set(new Uint8ClampedArray(function(e,t,r,n,o){for(var a=new Uint32Array(e*e),l=("buffer"in t?t:new Float64Array(t)),u=("buffer"in r?new Uint32Array(r.buffer):new Uint32Array(new Uint8Array(r).buffer)),s=u.length/(o-n),f=0;f<l.length;f++){var c=l[f],y=Math.floor((c-n)*s);a[f]=u[(0,i.uZ)(y,0,u.length-1)]}return a.buffer}(t,r,n,o,a))),e.putImageData(l,0,0)}function p(e,t,r){var n=Math.sqrt(Math.pow(e,2)+Math.pow(t,2))/r;return n>1?0:3/(Math.PI*Math.pow(r,2))*Math.pow(1-Math.pow(n,2),2)}function v(e,t){return"function"==typeof e?e:e?"string"==typeof t?function(t){return-1*+t[e]}:function(r){return+r[e]+t}:function(){return 1}}},49818:function(e,t,r){r.d(t,{Z:function(){return z}});var n,i=r(29439),o=r(37762),a=r(15671),l=r(43144),u=r(60136),s=r(29388),f=r(27366),c=r(59486),y=r(52639),d=r(43404),h=r(46784),p=r(84652),v=r(49861),m=(r(25243),r(38511)),g=r(69912),_=r(31201),b=r(78952),Z=r(77981),w=r(83040),k=new d.X({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null}),S=n=function(e){(0,u.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,a.Z)(this,r),(n=t.call(this,e)).displayFieldName=null,n.exceededTransferLimit=!1,n.features=[],n.fields=null,n.geometryType=null,n.hasM=!1,n.hasZ=!1,n.queryGeometry=null,n.spatialReference=null,n}return(0,l.Z)(r,[{key:"readFeatures",value:function(e,t){for(var r=b.Z.fromJSON(t.spatialReference),n=[],i=0;i<e.length;i++){var o=e[i],a=y.Z.fromJSON(o),l=o.geometry&&o.geometry.spatialReference;null==a.geometry||l||(a.geometry.spatialReference=r);var u=o.aggregateGeometries,s=a.aggregateGeometries;if(u&&null!=s)for(var f in s){var c=s[f],d=u[f],h=null===d||void 0===d?void 0:d.spatialReference;null==c||h||(c.spatialReference=r)}n.push(a)}return n}},{key:"writeGeometryType",value:function(e,t,r,n){if(e)k.write(e,t,r,n);else{var i=this.features;if(i){var a,l=(0,o.Z)(i);try{for(l.s();!(a=l.n()).done;){var u=a.value;if(u&&null!=u.geometry)return void k.write(u.geometry.type,t,r,n)}}catch(s){l.e(s)}finally{l.f()}}}}},{key:"readQueryGeometry",value:function(e,t){if(!e)return null;var r=!!e.spatialReference,n=(0,Z.im)(e);return n&&!r&&t.spatialReference&&(n.spatialReference=b.Z.fromJSON(t.spatialReference)),n}},{key:"writeSpatialReference",value:function(e,t){if(e)t.spatialReference=e.toJSON();else{var r=this.features;if(r){var n,i=(0,o.Z)(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a&&null!=a.geometry&&a.geometry.spatialReference)return void(t.spatialReference=a.geometry.spatialReference.toJSON())}}catch(l){i.e(l)}finally{i.f()}}}}},{key:"clone",value:function(){return new n(this.cloneProperties())}},{key:"cloneProperties",value:function(){return(0,p.d9)({displayFieldName:this.displayFieldName,exceededTransferLimit:this.exceededTransferLimit,features:this.features,fields:this.fields,geometryType:this.geometryType,hasM:this.hasM,hasZ:this.hasZ,queryGeometry:this.queryGeometry,spatialReference:this.spatialReference,transform:this.transform})}},{key:"toJSON",value:function(e){var t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var i=e&&e[r];n.geometry=i&&i.toJSON()||n.geometry}}return t}},{key:"quantize",value:function(e){for(var t=(0,i.Z)(e.scale,2),r=t[0],n=t[1],o=(0,i.Z)(e.translate,2),a=o[0],l=o[1],u=this.features,s=this._getQuantizationFunction(this.geometryType,(function(e){return Math.round((e-a)/r)}),(function(e){return Math.round((l-e)/n)})),f=0,c=u.length;f<c;f++)(null===s||void 0===s?void 0:s(u[f].geometry))||(u.splice(f,1),f--,c--);return this.transform=e,this}},{key:"unquantize",value:function(){var e,t,r=this.geometryType,n=this.features,a=this.transform;if(!a)return this;var l=(0,i.Z)(a.translate,2),u=l[0],s=l[1],f=(0,i.Z)(a.scale,2),c=f[0],y=f[1],d=null,h=null;if(this.hasZ&&null!=(null===a||void 0===a||null===(e=a.scale)||void 0===e?void 0:e[2])){var p=(0,i.Z)(a.translate,3)[2],v=(0,i.Z)(a.scale,3)[2];d=function(e){return e*v+p}}if(this.hasM&&null!=(null===a||void 0===a||null===(t=a.scale)||void 0===t?void 0:t[3])){var m=(0,i.Z)(a.translate,4)[3],g=(0,i.Z)(a.scale,4)[3];h=function(e){return null==e?e:e*g+m}}var _,b=this._getHydrationFunction(r,(function(e){return e*c+u}),(function(e){return s-e*y}),d,h),Z=(0,o.Z)(n);try{for(Z.s();!(_=Z.n()).done;){var w=_.value.geometry;null!=w&&b&&b(w)}}catch(k){Z.e(k)}finally{Z.f()}return this.transform=null,this}},{key:"_quantizePoints",value:function(e,t,r){for(var n,i,o=[],a=0,l=e.length;a<l;a++){var u=e[a];if(a>0){var s=t(u[0]),f=r(u[1]);s===n&&f===i||(o.push([s-n,f-i]),n=s,i=f)}else n=t(u[0]),i=r(u[1]),o.push([n,i])}return o.length>0?o:null}},{key:"_getQuantizationFunction",value:function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var i=(0,Z.oU)(e)?e.rings:e.paths,o=[],a=0,l=i.length;a<l;a++){var u=i[a],s=n._quantizePoints(u,t,r);s&&o.push(s)}return o.length>0?((0,Z.oU)(e)?e.rings=o:e.paths=o,e):null}:"multipoint"===e?function(e){var i=n._quantizePoints(e.points,t,r);return i&&i.length>0?(e.points=i,e):null}:"extent"===e?function(e){return e}:null}},{key:"_getHydrationFunction",value:function(e,t,r,n,i){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y),n&&(e.z=n(e.z))}:"polyline"===e||"polygon"===e?function(e){for(var o,a,l=(0,Z.oU)(e)?e.rings:e.paths,u=0,s=l.length;u<s;u++)for(var f=l[u],c=0,y=f.length;c<y;c++){var d=f[c];c>0?(o+=d[0],a+=d[1]):(o=d[0],a=d[1]),d[0]=t(o),d[1]=r(a)}if(n&&i)for(var h=0,p=l.length;h<p;h++)for(var v=l[h],m=0,g=v.length;m<g;m++){var _=v[m];_[2]=n(_[2]),_[3]=i(_[3])}else if(n)for(var b=0,w=l.length;b<w;b++)for(var k=l[b],S=0,z=k.length;S<z;S++){var x=k[S];x[2]=n(x[2])}else if(i)for(var F=0,C=l.length;F<C;F++)for(var M=l[F],T=0,I=M.length;T<I;T++){var O=M[T];O[2]=i(O[2])}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax),n&&null!=e.zmax&&null!=e.zmin&&(e.zmax=n(e.zmax),e.zmin=n(e.zmin)),i&&null!=e.mmax&&null!=e.mmin&&(e.mmax=i(e.mmax),e.mmin=i(e.mmin))}:"multipoint"===e?function(e){for(var o,a,l=e.points,u=0,s=l.length;u<s;u++){var f=l[u];u>0?(o+=f[0],a+=f[1]):(o=f[0],a=f[1]),f[0]=t(o),f[1]=r(a)}if(n&&i)for(var c=0,y=l.length;c<y;c++){var d=l[c];d[2]=n(d[2]),d[3]=i(d[3])}else if(n)for(var h=0,p=l.length;h<p;h++){var v=l[h];v[2]=n(v[2])}else if(i)for(var m=0,g=l.length;m<g;m++){var _=l[m];_[2]=i(_[2])}}:null}}]),r}(h.wq);(0,f._)([(0,v.Cb)({type:String,json:{write:!0}})],S.prototype,"displayFieldName",void 0),(0,f._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"exceededTransferLimit",void 0),(0,f._)([(0,v.Cb)({type:[y.Z],json:{write:!0}})],S.prototype,"features",void 0),(0,f._)([(0,m.r)("features")],S.prototype,"readFeatures",null),(0,f._)([(0,v.Cb)({type:[w.Z],json:{write:!0}})],S.prototype,"fields",void 0),(0,f._)([(0,v.Cb)({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:k.read}}})],S.prototype,"geometryType",void 0),(0,f._)([(0,_.c)("geometryType")],S.prototype,"writeGeometryType",null),(0,f._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasM",void 0),(0,f._)([(0,v.Cb)({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],S.prototype,"hasZ",void 0),(0,f._)([(0,v.Cb)({types:c.qM,json:{write:!0}})],S.prototype,"queryGeometry",void 0),(0,f._)([(0,m.r)("queryGeometry")],S.prototype,"readQueryGeometry",null),(0,f._)([(0,v.Cb)({type:b.Z,json:{write:!0}})],S.prototype,"spatialReference",void 0),(0,f._)([(0,_.c)("spatialReference")],S.prototype,"writeSpatialReference",null),(0,f._)([(0,v.Cb)({json:{write:!0}})],S.prototype,"transform",void 0),(S=n=(0,f._)([(0,g.j)("esri.rest.support.FeatureSet")],S)).prototype.toJSON.isDefaultToJSON=!0;var z=S}}]);
//# sourceMappingURL=5199.fd1a894e.chunk.js.map